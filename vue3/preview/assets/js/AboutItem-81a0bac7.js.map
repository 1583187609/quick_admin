{"version":3,"file":"AboutItem-81a0bac7.js","sources":["../../../src/components/CardCrud/_components/AboutItem.vue"],"sourcesContent":["<!-- 组件 - 资料巡查 -->\r\n<template>\r\n  <div class=\"about-item f-fs-s-c\" :class=\"{ passed: status === 0, rejected: status === 1 }\">\r\n    <div class=\"f-fs-s-c cont-box f-1\">\r\n      <div class=\"f-fs-c head f-0\" v-if=\"row.userData\">\r\n        <el-tooltip :show-after=\"300\" :content=\"row.userData.nickname\" :disabled=\"!row.userData.nickname\">\r\n          <span class=\"mr-a line-1\">{{ row.userData.nickname || \"-\" }}</span>\r\n        </el-tooltip>\r\n        <BaseCopy class=\"ml-12 f-0\" :text=\"row.userId\" />\r\n        <div class=\"ml-12 mr-12 f-0\">{{ row.userData.age || \"-\" }}岁</div>\r\n        <BaseTag name=\"Gender\" :value=\"row.userData.gender\" class=\"f-0\" pureText />\r\n      </div>\r\n      <div class=\"title f-sb-b f-0\">\r\n        <b class=\"b\">{{ getText(\"AboutInfo\", row.type) }}</b>\r\n        <span class=\"time-ago\">\r\n          <!-- {{ getTimeAgo(row.createdAt) || \"-\" }} -->\r\n          {{ getTimeAgo(row.updatedAt ? row.updatedAt : row.createdAt) || \"-\" }}\r\n        </span>\r\n      </div>\r\n      <div class=\"desc all-hide-scroll f-1\" ref=\"descRef\">\r\n        {{ row.content || \"-\" }}\r\n      </div>\r\n      <div class=\"bottom-text\" :style=\"{ minHeight: currSize.barHeight + 'px' }\" v-bind=\"bottomTip.attrs\" v-if=\"bottomTip.text\">\r\n        {{ bottomTip.text }}\r\n      </div>\r\n    </div>\r\n    <div class=\"foot-box f-c-c f-0\">\r\n      <BaseBtn :name=\"btn\" round size=\"small\" @click=\"() => emits('groupBtn', btn)\" v-for=\"(btn, ind) in groupBtns\" :key=\"ind\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ref, nextTick, inject } from \"vue\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { BtnItem } from \"@/components/BaseBtn\";\r\nimport { getTimeAgo, typeOf } from \"@/components/_utils\";\r\nimport { AuditStatus } from \"../Index.vue\";\r\nimport { DictItemProps } from \"@/dict\";\r\nimport { getBarObj } from \"@/components/CardCrud/_utils\";\r\nimport { useDictMap } from \"@/hooks\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"AboutItem\" }); \n\r\nconst { getText } = useDictMap();\r\nconst sizeMap: CommonObj = {\r\n  large: {\r\n    bottom: 0, //4\r\n    height: 36,\r\n    barHeight: 32,\r\n  },\r\n  default: {\r\n    bottom: 0, //2\r\n    height: 26,\r\n    barHeight: 26,\r\n  },\r\n  small: {\r\n    bottom: 0, //0\r\n    height: 22,\r\n    barHeight: 22,\r\n  },\r\n};\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    row?: CommonObj;\r\n    sizeType?: \"large\" | \"default\" | \"small\";\r\n    groupBtns?: BtnItem[];\r\n    status?: AuditStatus;\r\n    bottomBar?: string | DictItemProps;\r\n  }>(),\r\n  {\r\n    row: () => ({}),\r\n    sizeType: \"default\",\r\n    groupBtns: () => [],\r\n  }\r\n);\r\nconst emits = defineEmits([\"groupBtn\"]);\r\n//是否出现了滚动条\r\nconst hasScroll = ref(false);\r\nconst descRef = ref();\r\nconst moreRef = ref();\r\nconst popoverRef = ref();\r\nconst currSize = sizeMap[props.sizeType];\r\n//底部提示文字\r\nconst bottomTip = computed<any>(() => getBarObj(props.bottomBar));\r\nnextTick(() => {\r\n  getShowScroll();\r\n});\r\nfunction getShowScroll() {\r\n  const { scrollHeight, clientHeight } = descRef?.value || {};\r\n  hasScroll.value = scrollHeight > clientHeight;\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n$foot-height: 36px;\r\n.about-item {\r\n  min-width: 310px;\r\n  height: 50%;\r\n  width: calc(20% - $gap-half);\r\n  transition: all 0.85s;\r\n  &.passed {\r\n    // visibility: hidden;\r\n    // opacity: 0;\r\n  }\r\n  &.rejected {\r\n    // filter: grayscale(1);\r\n  }\r\n  .cont-box {\r\n    position: relative;\r\n    background: #fff;\r\n    border-radius: $radius-main;\r\n    overflow: hidden;\r\n    @include shadow-main();\r\n    &:hover {\r\n      .bottom-text {\r\n        transform: translateY(100%);\r\n      }\r\n    }\r\n    .bottom-text {\r\n      display: block;\r\n      padding: 7px $gap-qtr;\r\n      line-height: 1.2;\r\n      position: absolute;\r\n      bottom: 0;\r\n      height: auto;\r\n      font-size: 12px;\r\n      color: $color-warning;\r\n      background: var(--el-color-warning-light-9);\r\n      width: 100%;\r\n      text-align: center;\r\n      z-index: 1;\r\n      transition: all $transition-time-main;\r\n    }\r\n  }\r\n  .head {\r\n    font-size: 13px;\r\n    padding: $gap-qtr $gap-half;\r\n    background: $color-bg-lighter;\r\n  }\r\n  .title {\r\n    padding: $gap-qtr $gap-half;\r\n    font-size: 14px;\r\n    .time-ago {\r\n      font-size: 12px;\r\n      color: $color-text-light;\r\n    }\r\n  }\r\n  .desc {\r\n    padding: 0 $gap-half $gap-half;\r\n    overflow: auto;\r\n    white-space: pre-wrap;\r\n  }\r\n  .foot-box {\r\n    height: $foot-height;\r\n  }\r\n}\r\n</style>\r\n"],"names":["getText","useDictMap","props","__props","emits","__emit","hasScroll","ref","descRef","currSize","large","bottom","height","barHeight","default","small","sizeType","bottomTip","computed","getBarObj","bottomBar","nextTick","scrollHeight","clientHeight","value"],"mappings":"26DA2CM,MAAAA,QAAEA,GAAYC,IAkBdC,EAAQC,EAcRC,EAAQC,EAERC,EAAYC,GAAI,GAChBC,EAAUD,IACIA,IACGA,IACjB,MAAAE,EArCqB,CACzBC,MAAO,CACLC,OAAQ,EACRC,OAAQ,GACRC,UAAW,IAEbC,QAAS,CACPH,OAAQ,EACRC,OAAQ,GACRC,UAAW,IAEbE,MAAO,CACLJ,OAAQ,EACRC,OAAQ,GACRC,UAAW,KAuBUX,EAAMc,UAEzBC,EAAYC,UAAc,IAAMC,EAAUjB,EAAMkB,oBACtDC,GAAS,MAGT,WACE,MAAMC,aAAEA,EAAcC,aAAAA,IAAiB,MAAAf,OAAA,EAAAA,EAASgB,QAAS,CAAA,EACzDlB,EAAUkB,MAAQF,EAAeC,CACnC"}