{"version":3,"file":"vite-plugin-mock-fcfbfb18.js","sources":["../../../node_modules/vite-plugin-mock/es/createProdMockServer.js"],"sourcesContent":["/* eslint-disable */\nimport mockJs from 'mockjs';\nimport { pathToRegexp } from 'path-to-regexp';\nconst Mock = mockJs;\nexport function createProdMockServer(mockList) {\n    Mock.XHR.prototype.__send = Mock.XHR.prototype.send;\n    Mock.XHR.prototype.send = function () {\n        if (this.custom.xhr) {\n            this.custom.xhr.withCredentials = this.withCredentials || false;\n            if (this.responseType) {\n                this.custom.xhr.responseType = this.responseType;\n            }\n        }\n        if (this.custom.requestHeaders) {\n            const headers = {};\n            for (let k in this.custom.requestHeaders) {\n                headers[k.toString().toLowerCase()] = this.custom.requestHeaders[k];\n            }\n            this.custom.options = Object.assign({}, this.custom.options, { headers });\n        }\n        this.__send.apply(this, arguments);\n    };\n    Mock.XHR.prototype.proxy_open = Mock.XHR.prototype.open;\n    Mock.XHR.prototype.open = function () {\n        let responseType = this.responseType;\n        this.proxy_open(...arguments);\n        if (this.custom.xhr) {\n            if (responseType) {\n                this.custom.xhr.responseType = responseType;\n            }\n        }\n    };\n    for (const { url, method, response, timeout } of mockList) {\n        __setupMock__(timeout);\n        Mock.mock(pathToRegexp(url, undefined, { end: false }), method || 'get', __XHR2ExpressReqWrapper__(response));\n    }\n}\nfunction __param2Obj__(url) {\n    const search = url.split('?')[1];\n    if (!search) {\n        return {};\n    }\n    return JSON.parse('{\"' +\n        decodeURIComponent(search)\n            .replace(/\"/g, '\\\\\"')\n            .replace(/&/g, '\",\"')\n            .replace(/=/g, '\":\"')\n            .replace(/\\+/g, ' ') +\n        '\"}');\n}\nfunction __XHR2ExpressReqWrapper__(handle) {\n    return function (options) {\n        let result = null;\n        if (typeof handle === 'function') {\n            const { body, type, url, headers } = options;\n            let b = body;\n            try {\n                b = JSON.parse(body);\n            }\n            catch { }\n            result = handle({\n                method: type,\n                body: b,\n                query: __param2Obj__(url),\n                headers,\n            });\n        }\n        else {\n            result = handle;\n        }\n        return Mock.mock(result);\n    };\n}\nfunction __setupMock__(timeout = 0) {\n    timeout &&\n        Mock.setup({\n            timeout,\n        });\n}\n"],"names":["Mock","mockJs","createProdMockServer","mockList","XHR","prototype","__send","send","this","custom","xhr","withCredentials","responseType","requestHeaders","headers","k","toString","toLowerCase","options","Object","assign","apply","arguments","proxy_open","open","url","method","response","timeout","__setupMock__","mock","pathToRegexp","end","__XHR2ExpressReqWrapper__","__param2Obj__","search","split","JSON","parse","decodeURIComponent","replace","handle","result","body","type","b","query","setup"],"mappings":"0FAGA,MAAMA,EAAOC,EACN,SAASC,EAAqBC,GACjCH,EAAKI,IAAIC,UAAUC,OAASN,EAAKI,IAAIC,UAAUE,KAC1CP,EAAAI,IAAIC,UAAUE,KAAO,WAOlB,GANAC,KAAKC,OAAOC,MACZF,KAAKC,OAAOC,IAAIC,gBAAkBH,KAAKG,kBAAmB,EACtDH,KAAKI,eACAJ,KAAAC,OAAOC,IAAIE,aAAeJ,KAAKI,eAGxCJ,KAAKC,OAAOI,eAAgB,CAC5B,MAAMC,EAAU,CAAA,EACP,IAAA,IAAAC,KAAKP,KAAKC,OAAOI,eACdC,EAAAC,EAAEC,WAAWC,eAAiBT,KAAKC,OAAOI,eAAeE,GAEhEP,KAAAC,OAAOS,QAAUC,OAAOC,OAAO,CAAA,EAAIZ,KAAKC,OAAOS,QAAS,CAAEJ,WAClE,CACIN,KAAAF,OAAOe,MAAMb,KAAMc,UAChC,EACItB,EAAKI,IAAIC,UAAUkB,WAAavB,EAAKI,IAAIC,UAAUmB,KAC9CxB,EAAAI,IAAIC,UAAUmB,KAAO,WACtB,IAAIZ,EAAeJ,KAAKI,aACnBJ,KAAAe,cAAcD,WACfd,KAAKC,OAAOC,KACRE,IACKJ,KAAAC,OAAOC,IAAIE,aAAeA,EAG/C,EACI,IAAA,MAAWa,IAAEA,EAAKC,OAAAA,EAAAC,SAAQA,EAAUC,QAAAA,KAAazB,EAC7C0B,EAAcD,GACd5B,EAAK8B,KAAKC,EAAaN,OAAK,EAAW,CAAEO,KAAK,IAAUN,GAAU,MAAOO,EAA0BN,GAE3G,CACA,SAASO,EAAcT,GACnB,MAAMU,EAASV,EAAIW,MAAM,KAAK,GAC9B,OAAKD,EAGEE,KAAKC,MAAM,KACdC,mBAAmBJ,GACdK,QAAQ,KAAM,OACdA,QAAQ,KAAM,OACdA,QAAQ,KAAM,OACdA,QAAQ,MAAO,KACpB,MARO,EASf,CACA,SAASP,EAA0BQ,GAC/B,OAAO,SAAUvB,GACb,IAAIwB,EAAS,KACT,GAAkB,mBAAXD,EAAuB,CAC9B,MAAME,KAAEA,EAAAC,KAAMA,EAAMnB,IAAAA,EAAAX,QAAKA,GAAYI,EACrC,IAAI2B,EAAIF,EACJ,IACIE,EAAAR,KAAKC,MAAMK,EAClB,CACK,MAAG,CACTD,EAASD,EAAO,CACZf,OAAQkB,EACRD,KAAME,EACNC,MAAOZ,EAAcT,GACrBX,WAEP,MAEY4B,EAAAD,EAEN,OAAAzC,EAAK8B,KAAKY,EACzB,CACA,CACA,SAASb,EAAcD,EAAU,GAC7BA,GACI5B,EAAK+C,MAAM,CACPnB,WAEZ","x_google_ignoreList":[0]}