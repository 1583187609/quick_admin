{"version":3,"file":"BarsImg-fdaccba6.js","sources":["../../../src/components/BarsImg.vue"],"sourcesContent":["<template>\r\n  <div :style=\"newStyle\" class=\"bars-img f-c-c\" :class=\"{ 'hover-move': hoverMove }\">\r\n    <el-tag class=\"f-c-c top-bar\" v-bind=\"topTip.attrs\" v-if=\"topTip.text\">\r\n      {{ topTip.text }}\r\n    </el-tag>\r\n    <BaseImg v-bind=\"$attrs\" />\r\n    <div class=\"bottom-text\" :class=\"sizeType\" v-bind=\"bottomTip.attrs\" v-if=\"bottomTip.text\">\r\n      {{ bottomTip.text }}\r\n    </div>\r\n    <!-- <el-tag\r\n      class=\"f-c-c bottom-bar\"\r\n      v-bind=\"bottomTip.attrs\"\r\n      v-if=\"bottomTip.text\"\r\n    >\r\n      {{ bottomTip.text }}\r\n    </el-tag> -->\r\n    <el-tag\r\n      class=\"left-tag\"\r\n      :size=\"sizeType\"\r\n      v-bind=\"tag\"\r\n      :style=\"{ bottom: currSize.bottom + ind * currSize.height + 'px' }\"\r\n      v-for=\"(tag, ind) in newLeftTags\"\r\n      :key=\"ind\"\r\n      >{{ tag.text }}</el-tag\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nexport default {\r\n  inheritAttrs: false,\r\n};\r\n</script>\r\n<script lang=\"ts\" setup>\r\nimport { reactive, ref, toRefs, computed, useAttrs } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { toCssVal, typeOf } from \"@/components/_utils\";\r\nimport { TagType } from \"@/components/BaseTag.vue\";\r\nimport { getBarObj } from \"@/components/CardCrud/_utils\";\r\nimport { CommonObj, FetchType, FinallyNext } from \"@/vite-env\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"BarsImg\" }); \n\r\nexport type TagSize = \"large\" | \"default\" | \"small\" | \"\";\r\nexport interface BarAttrs {\r\n  text: string;\r\n  attrs?: {\r\n    type?: TagType;\r\n  };\r\n}\r\nconst sizeMap: CommonObj = {\r\n  large: {\r\n    bottom: 0, //4\r\n    height: 36,\r\n  },\r\n  default: {\r\n    bottom: 0, //2\r\n    height: 26,\r\n  },\r\n  small: {\r\n    bottom: 0, //0\r\n    height: 22,\r\n  },\r\n};\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    sizeType?: \"large\" | \"default\" | \"small\";\r\n    topBar?: string | BarAttrs;\r\n    bottomBar?: string | BarAttrs;\r\n    leftTags?: (string | BarAttrs)[];\r\n    hoverMove?: boolean; //当鼠标移动到图片上时，顶部、底部的bar文本信息是否移开\r\n    //其他属性则按照 BaseImg 的属性来设置\r\n  }>(),\r\n  {\r\n    sizeType: \"default\",\r\n    hoverMove: true,\r\n  }\r\n);\r\nconst emits = defineEmits([\"click\", \"error\"]);\r\nconst router = useRouter();\r\nconst $attrs = useAttrs();\r\nconst currSize = sizeMap[props.sizeType];\r\nconst newStyle = computed(() => {\r\n  return {\r\n    height: toCssVal(props.size || props.height),\r\n    width: toCssVal(props.size || props.width),\r\n  };\r\n});\r\n//顶部提示文字\r\nconst topTip = computed<any>(() => getBarObj(props.topBar));\r\n//底部提示文字\r\nconst bottomTip = computed<any>(() => getBarObj(props.bottomBar));\r\n//左侧标签\r\nconst newLeftTags = computed<any>(() => props.leftTags?.map((item, ind) => getBarObj(item)) ?? []);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.bars-img {\r\n  position: relative;\r\n  overflow: hidden;\r\n  .base-img {\r\n    border-radius: 0;\r\n  }\r\n  &.hover-move {\r\n    &:hover {\r\n      .top-bar {\r\n        transform: translateY(-100%);\r\n      }\r\n      .bottom-bar,\r\n      .bottom-text {\r\n        transform: translateY(100%);\r\n      }\r\n      .left-tag {\r\n        transform: translateX(-100%);\r\n      }\r\n    }\r\n  }\r\n  .top-bar,\r\n  .bottom-bar,\r\n  .bottom-text {\r\n    position: absolute;\r\n    width: 100%;\r\n    text-align: center;\r\n    z-index: 1;\r\n    transition: all $transition-time-main;\r\n  }\r\n  .top-bar {\r\n    top: 0;\r\n  }\r\n  .bottom-bar,\r\n  .bottom-text {\r\n    bottom: 0;\r\n  }\r\n  .bottom-text {\r\n    height: auto;\r\n    font-size: 12px;\r\n    color: $color-warning;\r\n    background: rgba(#fdf6ec, 0.9);\r\n    // background: #fdf6ec;\r\n    &.large {\r\n      padding: 4px 8px;\r\n    }\r\n    &.default {\r\n      padding: 4px 4px;\r\n    }\r\n    &.small {\r\n      padding: 2px 2px;\r\n    }\r\n  }\r\n  .left-tag {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    opacity: 0.7;\r\n    transition: all $transition-time-main;\r\n  }\r\n}\r\n</style>\r\n"],"names":["inheritAttrs","props","__props","useRouter","$attrs","useAttrs","currSize","large","bottom","height","default","small","sizeType","newStyle","computed","toCssVal","size","width","topTip","getBarObj","topBar","bottomTip","bottomBar","newLeftTags","_a","leftTags","map","item","ind"],"mappings":"ygDA6BA,aACEA,cAAc,wLAoBhB,MAcMC,EAAQC,EAeWC,IACzB,MAAMC,EAASC,IACTC,EA/BqB,CACzBC,MAAO,CACLC,OAAQ,EACRC,OAAQ,IAEVC,QAAS,CACPF,OAAQ,EACRC,OAAQ,IAEVE,MAAO,CACLH,OAAQ,EACRC,OAAQ,KAoBaR,EAAMW,UACzBC,EAAWC,GAAS,KACjB,CACLL,OAAQM,EAASd,EAAMe,MAAQf,EAAMQ,QACrCQ,MAAOF,EAASd,EAAMe,MAAQf,EAAMgB,WAIlCC,EAASJ,GAAc,IAAMK,EAAUlB,EAAMmB,UAE7CC,EAAYP,GAAc,IAAMK,EAAUlB,EAAMqB,aAEhDC,EAAcT,GAAc,WAAY,OAAN,OAAMU,EAAAvB,EAAAwB,mBAAUC,KAAI,CAACC,EAAMC,IAAQT,EAAUQ,OAAU,EAAE"}