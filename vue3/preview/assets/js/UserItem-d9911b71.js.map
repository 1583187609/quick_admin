{"version":3,"file":"UserItem-d9911b71.js","sources":["../../../src/views/test/test-8/_components/UserItem.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-item f-sb-s\" :class=\"{ active }\">\r\n    <!-- <div class=\"avatar-box f-0\">\r\n      <BaseAvatar\r\n        :to=\"{ name: 'userDetail', query: { id: data?.[userDataKey]?.id } }\"\r\n        :src=\"data?.[userDataKey]?.avatar\"\r\n        :gender=\"data?.[userDataKey]?.gender\"\r\n        class=\"avatar\"\r\n        round\r\n      />\r\n      <el-tooltip content=\"已完成身份认证\" :show-after=\"500\" v-if=\"data?.[userDataKey].authType !== 1\">\r\n        <BaseIcon name=\"SuccessFilled\" size=\"20\" class=\"auth-icon\" />\r\n      </el-tooltip>\r\n    </div>\r\n    <div class=\"info-box f-1 f-sb-s-c\">\r\n      <div class=\"f-fs-c\">\r\n        <b\r\n          @click.stop=\"\r\n            $router.push({\r\n              name: 'userDetail',\r\n              query: { id: data?.[userDataKey]?.id },\r\n            })\r\n          \"\r\n          class=\"nickname line-1 mr-a\"\r\n        >\r\n          {{ data?.[userDataKey]?.nickname || \"-\" }}\r\n        </b>\r\n        <BaseTag\r\n          name=\"AccountStatus\"\r\n          class=\"f-0 ml-h\"\r\n          :value=\"data[userDataKey].accountStatus\"\r\n          v-if=\"data[userDataKey].accountStatus !== 0\"\r\n        />\r\n      </div>\r\n      <div class=\"f-fs-c tips-info\">\r\n        <BaseCopy class=\"f-0\" :text=\"data?.[userDataKey]?.id\" line=\"1\" />\r\n        <div class=\"ml-h mr-h f-1 line-1\">\r\n          {{ getCascaderText(\"Region\", data?.[userDataKey]?.liveCity) || \"-\" }}\r\n        </div>\r\n        <div class=\"f-0\">{{ data?.[userDataKey]?.age }}岁</div>\r\n      </div>\r\n      <div class=\"num-info f-sb-c\" v-if=\"isSearchResult\">\r\n        <span>好友{{ data?.countFriend }}/有效{{ data?.countFriendValid }}/过期{{ data?.countFriendInvalid }}</span>\r\n        <time class=\"line-1\">{{ data?.latestDate }}</time>\r\n      </div>\r\n      <div class=\"f-sb-c\" v-else>\r\n        <el-tag class=\"tag\" :type=\"converStatus.type\" size=\"small\">{{ converStatus.text }}</el-tag>\r\n        <span class=\"num-info line-1\">{{ data?.latestDate }}</span>\r\n      </div>\r\n    </div> -->\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { getCountDownTimeStr } from \"@/utils\";\r\n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    data: CommonObj;\r\n    active?: boolean;\r\n    userDataKey?: string;\r\n    isSearchResult?: boolean;\r\n  }>(),\r\n  {\r\n    userDataKey: \"userData\",\r\n  }\r\n);\r\nconst converStatus: CommonObj = getConversationStatus();\r\n//获取会话状态\r\nfunction getConversationStatus() {\r\n  if (props.isSearchResult) {\r\n    return { type: \"\", text: \"\" };\r\n  } else {\r\n    return getConversationTag(props.data);\r\n  }\r\n}\r\n/**\r\n * 获取会话的状态标签\r\n * 谁先不喜欢，0=无,1=我,2=Ta\r\n * status状态: 0正常 1失效\r\n */\r\nfunction getConversationTag(row: CommonObj) {\r\n  const { status, endTime } = row;\r\n  if (status === 0) {\r\n    const { text, type } = getCountDownTimeStr(endTime);\r\n    return {\r\n      text: \"好友：\" + text,\r\n      type,\r\n    };\r\n  } else {\r\n    return {\r\n      text: \"失效会话\",\r\n      type: \"info\",\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.user-item {\r\n  cursor: pointer;\r\n  padding: $gap-half $gap-half;\r\n  &:hover {\r\n    background: $color-bg-lighter;\r\n  }\r\n  &.active {\r\n    background: $color-bg-main;\r\n  }\r\n}\r\n.avatar-box {\r\n  margin-right: $gap-half;\r\n  $size: 90px;\r\n  position: relative;\r\n  .avatar {\r\n    @include shadow-main;\r\n  }\r\n  .auth-icon {\r\n    color: $color-primary;\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n  }\r\n}\r\n.info-box {\r\n  .nickname {\r\n    font-size: 13px;\r\n    font-weight: 600;\r\n    &:hover {\r\n      color: $color-primary;\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n  .tips-info {\r\n    margin-bottom: $gap-qtr;\r\n    font-size: 12px;\r\n    color: $color-text-light;\r\n  }\r\n  .num-info {\r\n    font-size: 12px;\r\n  }\r\n  .tag {\r\n    width: fit-content;\r\n  }\r\n}\r\n</style>\r\n"],"names":["props","__props","isSearchResult","row","status","endTime","text","type","getCountDownTimeStr","getConversationTag","data"],"mappings":"ghDAwDA,MAAMA,EAAQC,SAcRD,EAAME,gBAWZ,SAA4BC,GACpB,MAAAC,OAAEA,EAAQC,QAAAA,GAAYF,EAC5B,GAAe,IAAXC,EAAc,CAChB,MAAME,KAAEA,EAAAC,KAAMA,GAASC,EAAoBH,GACpC,MAAA,CACLC,KAAM,MAAQA,EACdC,OACF,CAOJ,CAtBWE,CAAmBT,EAAMU"}