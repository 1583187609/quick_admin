{"version":3,"file":"index.vue_vue_type_script_setup_true_name_ECharts_lang-22e70f3c.js","sources":["../../../src/views/big-screen/travel/_components/ECharts/config/index.ts","../../../src/views/big-screen/travel/_components/ECharts/index.vue"],"sourcesContent":["import * as echarts from \"echarts/core\";\r\nimport { BarChart, LineChart, LinesChart, PieChart, ScatterChart, RadarChart, GaugeChart } from \"echarts/charts\";\r\nimport {\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  GridComponent,\r\n  DatasetComponent,\r\n  TransformComponent,\r\n  LegendComponent,\r\n  PolarComponent,\r\n  GeoComponent,\r\n  ToolboxComponent,\r\n  DataZoomComponent,\r\n} from \"echarts/components\";\r\nimport { LabelLayout, UniversalTransition } from \"echarts/features\";\r\nimport { CanvasRenderer } from \"echarts/renderers\";\r\nimport type {\r\n  BarSeriesOption,\r\n  LineSeriesOption,\r\n  LinesSeriesOption,\r\n  PieSeriesOption,\r\n  ScatterSeriesOption,\r\n  RadarSeriesOption,\r\n  GaugeSeriesOption,\r\n} from \"echarts/charts\";\r\nimport type {\r\n  TitleComponentOption,\r\n  TooltipComponentOption,\r\n  GridComponentOption,\r\n  DatasetComponentOption,\r\n} from \"echarts/components\";\r\nimport type { ComposeOption } from \"echarts/core\";\r\nimport \"echarts-liquidfill\";\r\n\r\nexport type ECOption = ComposeOption<\r\n  | BarSeriesOption\r\n  | LineSeriesOption\r\n  | LinesSeriesOption\r\n  | PieSeriesOption\r\n  | RadarSeriesOption\r\n  | GaugeSeriesOption\r\n  | TitleComponentOption\r\n  | TooltipComponentOption\r\n  | GridComponentOption\r\n  | DatasetComponentOption\r\n  | ScatterSeriesOption\r\n>;\r\n\r\necharts.use([\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  GridComponent,\r\n  DatasetComponent,\r\n  TransformComponent,\r\n  LegendComponent,\r\n  PolarComponent,\r\n  GeoComponent,\r\n  ToolboxComponent,\r\n  DataZoomComponent,\r\n  BarChart,\r\n  LineChart,\r\n  LinesChart,\r\n  PieChart,\r\n  ScatterChart,\r\n  RadarChart,\r\n  GaugeChart,\r\n  LabelLayout,\r\n  UniversalTransition,\r\n  CanvasRenderer,\r\n]);\r\n\r\nexport default echarts;\r\n","<template>\r\n  <div id=\"echarts\" ref=\"chartRef\" :style=\"echartsStyle\" />\r\n</template>\r\n\r\n<script setup lang=\"ts\" name=\"ECharts\">\r\nimport { ref, onMounted, onBeforeUnmount, watch, computed, markRaw, nextTick } from \"vue\";\r\nimport { EChartsType, ECElementEvent } from \"echarts/core\";\r\nimport echarts, { ECOption } from \"./config\";\r\nimport { useDebounceFn } from \"@vueuse/core\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"ECharts\" }); \n\r\n\r\ninterface Props {\r\n  option: ECOption;\r\n  renderer?: \"canvas\" | \"svg\";\r\n  resize?: boolean;\r\n  theme?: Object | string;\r\n  width?: number | string;\r\n  height?: number | string;\r\n  onClick?: (event: ECElementEvent) => any;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  renderer: \"canvas\",\r\n  resize: true,\r\n});\r\n\r\nconst echartsStyle = computed(() => {\r\n  return props.width || props.height\r\n    ? { height: props.height + \"px\", width: props.width + \"px\" }\r\n    : { height: \"100%\", width: \"100%\" };\r\n});\r\n\r\nconst chartRef = ref<HTMLDivElement | HTMLCanvasElement>();\r\nconst chartInstance = ref<EChartsType>();\r\n\r\nconst draw = () => {\r\n  if (chartInstance.value) {\r\n    chartInstance.value.setOption(props.option, { notMerge: true });\r\n  }\r\n};\r\n\r\nwatch(props, () => {\r\n  draw();\r\n});\r\n\r\nconst handleClick = (event: ECElementEvent) => props.onClick && props.onClick(event);\r\n\r\nconst init = () => {\r\n  if (!chartRef.value) return;\r\n  chartInstance.value = echarts.getInstanceByDom(chartRef.value);\r\n\r\n  if (!chartInstance.value) {\r\n    chartInstance.value = markRaw(\r\n      echarts.init(chartRef.value, props.theme, {\r\n        renderer: props.renderer,\r\n      })\r\n    );\r\n    chartInstance.value.on(\"click\", handleClick);\r\n    draw();\r\n  }\r\n};\r\n\r\nconst resize = () => {\r\n  if (chartInstance.value && props.resize) {\r\n    chartInstance.value.resize({ animation: { duration: 300 } });\r\n  }\r\n};\r\n\r\nconst debouncedResize = useDebounceFn(resize, 300, { maxWait: 800 });\r\n\r\nonMounted(() => {\r\n  nextTick(() => init());\r\n  window.addEventListener(\"resize\", debouncedResize);\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  chartInstance.value?.dispose();\r\n  window.removeEventListener(\"resize\", debouncedResize);\r\n});\r\n\r\ndefineExpose({\r\n  getInstance: () => chartInstance.value,\r\n  resize,\r\n  draw,\r\n});\r\n</script>\r\n"],"names":["echarts.use","TitleComponent","TooltipComponent","GridComponent","DatasetComponent","TransformComponent","LegendComponent","PolarComponent","GeoComponent","ToolboxComponent","DataZoomComponent","BarChart","LineChart","LinesChart","PieChart","ScatterChart","RadarChart","GaugeChart","LabelLayout","UniversalTransition","CanvasRenderer","props","__props","echartsStyle","computed","width","height","chartRef","ref","chartInstance","draw","value","setOption","option","notMerge","watch","handleClick","event","onClick","resize","animation","duration","debouncedResize","useDebounceFn","maxWait","onMounted","nextTick","echarts","getInstanceByDom","markRaw","init","theme","renderer","on","window","addEventListener","onBeforeUnmount","_a","dispose","removeEventListener","__expose","getInstance"],"mappings":"8XAgDAA,EAAY,CACVC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,uLC7CF,MAAMC,EAAQC,EAKRC,EAAeC,GAAS,IACrBH,EAAMI,OAASJ,EAAMK,OACxB,CAAEA,OAAQL,EAAMK,OAAS,KAAMD,MAAOJ,EAAMI,MAAQ,MACpD,CAAEC,OAAQ,OAAQD,MAAO,UAGzBE,EAAWC,IACXC,EAAgBD,IAEhBE,EAAO,KACPD,EAAcE,OAChBF,EAAcE,MAAMC,UAAUX,EAAMY,OAAQ,CAAEC,UAAU,GAC1D,EAGFC,EAAMd,GAAO,YAIb,MAAMe,EAAeC,GAA0BhB,EAAMiB,SAAWjB,EAAMiB,QAAQD,GAiBxEE,EAAS,KACTV,EAAcE,OAASV,EAAMkB,QACjBV,EAAAE,MAAMQ,OAAO,CAAEC,UAAW,CAAEC,SAAU,MACtD,EAGIC,EAAkBC,EAAcJ,EAAQ,IAAK,CAAEK,QAAS,aAE9DC,GAAU,KACCC,GAAA,KAvBJnB,EAASI,QACdF,EAAcE,MAAQgB,EAAQC,iBAAiBrB,EAASI,OAEnDF,EAAcE,QACjBF,EAAcE,MAAQkB,EACpBF,EAAQG,KAAKvB,EAASI,MAAOV,EAAM8B,MAAO,CACxCC,SAAU/B,EAAM+B,YAGNvB,EAAAE,MAAMsB,GAAG,QAASjB,QAcb,IACdkB,OAAAC,iBAAiB,SAAUb,EAAe,IAGnDc,GAAgB,WACd,OAAAC,EAAA5B,EAAcE,QAAO0B,EAAAC,UACdJ,OAAAK,oBAAoB,SAAUjB,EAAe,IAGzCkB,EAAA,CACXC,YAAa,IAAMhC,EAAcE,MACjCQ,SACAT"}