{"version":3,"file":"index-fc2f2742.js","sources":["../../../src/views/system/role/index.vue"],"sourcesContent":["<template>\r\n  <BaseCrud\r\n    :cols=\"cols\"\r\n    :fields=\"fields\"\r\n    :fetch=\"GetAuthRoleList\"\r\n    :extraBtns=\"['add', 'delete']\"\r\n    :groupBtns=\"['edit', 'delete']\"\r\n    @extraBtn=\"onExtraBtn\"\r\n    @groupBtn=\"onGroupBtn\"\r\n    selection\r\n  >\r\n  </BaseCrud>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ref, h, inject } from \"vue\";\r\nimport { GetAuthRoleList, DeleteAuthRoleList } from \"@/api-mock\";\r\nimport { FormField } from \"@/components/BaseFormItem\";\r\nimport { TableField } from \"@/components/table\";\r\nimport { BtnName } from \"@/components/BaseBtn\";\r\nimport AddEdit from \"./AddEdit.vue\";\r\nimport { handleBtnNext } from \"@/utils\";\r\nimport { CommonObj, FinallyNext } from \"@/vite-env\";\r\nimport { ExtraBtnRestArgs } from \"@/components/BaseCrud\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"SystemRole\" }); \n\r\n\r\nconst openPopup: any = inject(\"openPopup\");\r\nconst fields = ref<FormField[]>([\r\n  {\r\n    prop: \"role_type\",\r\n    label: \"角色类型\",\r\n    type: \"select\",\r\n    options: \"RoleType\",\r\n  },\r\n  {\r\n    prop: \"status\",\r\n    label: \"状态\",\r\n    type: \"select\",\r\n    options: \"EnableStatus\",\r\n  },\r\n  {\r\n    prop: \"create_time_range\",\r\n    label: \"创建时间\",\r\n    type: \"date-picker\",\r\n  },\r\n]);\r\nconst cols = ref<TableField[]>([\r\n  { prop: \"role_text\", label: \"角色类型\", width: 120 },\r\n  { prop: \"status\", label: \"状态\", type: \"BaseTag\" },\r\n  { prop: \"remark\", label: \"备注\", minWidth: 250 },\r\n  { prop: \"create_time\", label: \"创建时间\", width: 180, sortable: true },\r\n  { prop: \"update_time\", label: \"修改时间\", width: 180, sortable: true },\r\n]);\r\n//点击操作栏的分组按钮\r\nfunction onGroupBtn(name: any, row: CommonObj, next: FinallyNext) {\r\n  handleBtnNext(\r\n    {\r\n      edit: () => handleAddEdit(row, next),\r\n      delete: () => handleDelete([row.id], next),\r\n    },\r\n    name\r\n  );\r\n}\r\n//点击列表上方的额外按钮\r\nfunction onExtraBtn(name: BtnName, next: FinallyNext, restArgs: ExtraBtnRestArgs) {\r\n  const { selectedKeys } = restArgs;\r\n  handleBtnNext(\r\n    {\r\n      add: () => handleAddEdit(null, next),\r\n      delete: () => handleDelete(selectedKeys, next),\r\n    },\r\n    name\r\n  );\r\n}\r\n//新增或编辑\r\nfunction handleAddEdit(row: CommonObj | null, next: FinallyNext) {\r\n  openPopup(`${row ? \"编辑\" : \"新增\"}角色`, h(AddEdit, { id: row?.id, refreshList: next }));\r\n}\r\n//删除角色\r\nfunction handleDelete(ids: string[], next: FinallyNext) {\r\n  DeleteAuthRoleList({ ids }).then((res: CommonObj) => {\r\n    next();\r\n  });\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["openPopup","inject","fields","ref","prop","label","type","options","cols","width","minWidth","sortable","onGroupBtn","name","row","next","handleBtnNext","edit","handleAddEdit","delete","handleDelete","id","onExtraBtn","restArgs","selectedKeys","add","h","AddEdit","refreshList","ids","DeleteAuthRoleList","then","res"],"mappings":"uiDA2BM,MAAAA,EAAiBC,EAAO,aACxBC,EAASC,EAAiB,CAC9B,CACEC,KAAM,YACNC,MAAO,OACPC,KAAM,SACNC,QAAS,YAEX,CACEH,KAAM,SACNC,MAAO,KACPC,KAAM,SACNC,QAAS,gBAEX,CACEH,KAAM,oBACNC,MAAO,OACPC,KAAM,iBAGJE,EAAOL,EAAkB,CAC7B,CAAEC,KAAM,YAAaC,MAAO,OAAQI,MAAO,KAC3C,CAAEL,KAAM,SAAUC,MAAO,KAAMC,KAAM,WACrC,CAAEF,KAAM,SAAUC,MAAO,KAAMK,SAAU,KACzC,CAAEN,KAAM,cAAeC,MAAO,OAAQI,MAAO,IAAKE,UAAU,GAC5D,CAAEP,KAAM,cAAeC,MAAO,OAAQI,MAAO,IAAKE,UAAU,KAGrD,SAAAC,EAAWC,EAAWC,EAAgBC,GAC7CC,EACE,CACEC,KAAM,IAAMC,EAAcJ,EAAKC,GAC/BI,OAAQ,IAAMC,EAAa,CAACN,EAAIO,IAAKN,IAEvCF,EAEJ,CAES,SAAAS,EAAWT,EAAeE,EAAmBQ,GAC9C,MAAAC,aAAEA,GAAiBD,EACzBP,EACE,CACES,IAAK,IAAMP,EAAc,KAAMH,GAC/BI,OAAQ,IAAMC,EAAaI,EAAcT,IAE3CF,EAEJ,CAES,SAAAK,EAAcJ,EAAuBC,GAC5Cf,GAAac,EAAM,KAAO,MAAhB,KAA0BY,EAAEC,EAAS,CAAEN,GAAS,MAALP,OAAK,EAAAA,EAAAO,GAAIO,YAAab,IAC7E,CAES,SAAAK,EAAaS,EAAed,GACnCe,EAAmB,CAAED,QAAOE,MAAMC,UAGpC"}