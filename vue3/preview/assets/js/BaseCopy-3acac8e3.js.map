{"version":3,"file":"BaseCopy-3acac8e3.js","sources":["../../../src/components/BaseCopy.vue"],"sourcesContent":["<!-- 页面-复制文本组件 -->\r\n<!-- @click=\"clickIconCopy ? undefined : handleClick\" -->\r\n<!-- <DocumentCopy class=\"f-0 ml-4 f-0\" size=\"1em\" /> -->\r\n<template>\r\n  <div @click=\"handleClick\" class=\"base-copy\" :class=\"{ 'f-fs-c': Number(line) > 0, hover: text && !clickIconCopy }\">\r\n    <span :class=\"`line-${line} f-1`\">\r\n      <slot>{{ text || \"-\" }}</slot>\r\n    </span>\r\n    <template v-if=\"text\">\r\n      <el-tooltip :show-after=\"500\" content=\"点击复制\">\r\n        <BaseIcon class=\"f-0 ml-4 icon hover\" name=\"DocumentCopy\" />\r\n      </el-tooltip>\r\n    </template>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { StrNum } from \"@/vite-env\";\r\nimport { showMessage } from \"./_utils\";\r\nimport { DocumentCopy } from \"@element-plus/icons-vue\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"BaseCopy\" }); \n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    text?: StrNum;\r\n    line?: StrNum; //最多显示几行，超出文本会显示省略号\r\n    clickIconCopy?: boolean; //是否只当点击图标时才复制文本\r\n    stop?: boolean; //是否阻止点击事件的冒泡\r\n  }>(),\r\n  {\r\n    line: 1,\r\n  }\r\n);\r\nfunction handleClick(e) {\r\n  const { tagName, classList } = e.target;\r\n  const { text = \"\", clickIconCopy, stop } = props;\r\n  if (!text) return;\r\n  if (clickIconCopy && tagName !== \"svg\" && !classList.contains(\"icon\")) return;\r\n  if (stop) e.stopPropagation();\r\n  const input = document.createElement(\"input\");\r\n  input.setAttribute(\"value\", text as string);\r\n  document.body.appendChild(input);\r\n  input.select();\r\n  const copyText = document.execCommand(\"copy\");\r\n  if (copyText) {\r\n    showMessage(\"复制成功！\", \"success\");\r\n  }\r\n  document.body.removeChild(input);\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@mixin hover() {\r\n  &:hover {\r\n    color: $color-primary;\r\n  }\r\n}\r\n.base-copy {\r\n  cursor: pointer;\r\n  display: inline-flex;\r\n  &.hover {\r\n    @include hover();\r\n  }\r\n  .icon {\r\n    // font-size: 1em;\r\n    //vertical-align: bottom;\r\n    //line-height: inherit;\r\n    @include hover();\r\n  }\r\n}\r\n</style>\r\n"],"names":["props","__props","handleClick","e","tagName","classList","target","text","clickIconCopy","stop","contains","stopPropagation","input","document","createElement","setAttribute","body","appendChild","select","execCommand","showMessage","removeChild"],"mappings":"oiDAsBA,MAAMA,EAAQC,EAWd,SAASC,EAAYC,GACnB,MAAMC,QAAEA,EAAAC,UAASA,GAAcF,EAAEG,QAC3BC,KAAEA,EAAO,GAAIC,cAAAA,EAAAC,KAAeA,GAAST,EAC3C,IAAKO,EAAM,OACX,GAAIC,GAA6B,QAAZJ,IAAsBC,EAAUK,SAAS,QAAS,OACnED,GAAMN,EAAEQ,kBACN,MAAAC,EAAQC,SAASC,cAAc,SAC/BF,EAAAG,aAAa,QAASR,GACnBM,SAAAG,KAAKC,YAAYL,GAC1BA,EAAMM,SACWL,SAASM,YAAY,SAEpCC,EAAY,QAAS,WAEdP,SAAAG,KAAKK,YAAYT,EAC5B"}