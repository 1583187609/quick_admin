{"version":3,"file":"CompanyAddEdit-09d8526d.js","sources":["../../../src/views/_components/CompanyAddEdit.vue"],"sourcesContent":["<!-- 公司申报/添加/编辑 -->\r\n<template>\r\n  <BaseForm\r\n    style=\"width: 600px\"\r\n    v-model=\"model\"\r\n    :fields=\"fields\"\r\n    :fetch=\"isAdd ? GetAuthRoleList : GetAuthRoleList\"\r\n    :fetchSuccess=\"refreshList\"\r\n    :extraParams=\"{ id: data?.id, doRelationFeedbackCompany: isApply ? data!.id : undefined }\"\r\n  >\r\n    <!-- 状态,0=启用,1=禁用 -->\r\n    <template #logoUrl=\"{ form }\">\r\n      <BaseUpload v-model=\"form.logoUrl\" />\r\n    </template>\r\n    <template #emailSuffix=\"{ form }\">\r\n      <AddDelTag v-model=\"form.emailSuffix\" />\r\n    </template>\r\n  </BaseForm>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ref, reactive, watch, computed } from \"vue\";\r\nimport { FormField } from \"@/components/BaseFormItem\";\r\nimport { GetAuthRoleList } from \"@/api-mock\";\r\nimport AddDelTag from \"@/components/AddDelTag.vue\";\r\nimport { CommonObj, FinallyNext, OptionItem, StrNum } from \"@/vite-env\";\r\n\r\n//是否支持： 0否;1=是\r\nconst supportSwitchAttrs: CommonObj = {\r\n  activeValue: 1,\r\n  inactiveValue: 0,\r\n  activeText: \"支持\",\r\n  inactiveText: \"不支持\",\r\n  inlinePrompt: true,\r\n  style: \"width: 5em\",\r\n};\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    data?: CommonObj;\r\n    refreshList?: FinallyNext;\r\n    isApply?: boolean; //是否是公司申报\r\n  }>(),\r\n  {}\r\n);\r\nconsole.log(props.data, \"data----------------\");\r\nconst isAdd = props.data && !props.isApply; //是否是新增\r\nconst model = reactive<CommonObj>(getModel());\r\nconst fields: FormField[] = [\r\n  {\r\n    prop: \"typeId\",\r\n    label: \"公司类型\",\r\n    type: \"select\",\r\n    options: [],\r\n    attrs: {},\r\n  },\r\n  {\r\n    prop: \"fullName\",\r\n    label: \"公司全称\",\r\n    required: true,\r\n    attrs: { maxlength: 30 },\r\n  },\r\n  {\r\n    prop: \"shortName\",\r\n    label: \"公司简称\",\r\n    required: true,\r\n    attrs: { maxlength: 10 },\r\n  },\r\n  { prop: \"logoUrl\", label: \"公司logo\", required: true, type: \"custom\" },\r\n  { prop: \"emailSuffix\", label: \"邮箱后缀\", type: \"custom\" },\r\n  {\r\n    label: \"认证方式\",\r\n    children: [\r\n      {\r\n        prop: \"isSupportEmail\",\r\n        label: \"邮箱认证\",\r\n        type: \"switch\",\r\n        labelWidth: \"6em\",\r\n        attrs: supportSwitchAttrs,\r\n      },\r\n      {\r\n        prop: \"isSupportPerson\",\r\n        label: \"人工认证\",\r\n        type: \"switch\",\r\n        labelWidth: \"6em\",\r\n        attrs: supportSwitchAttrs,\r\n      },\r\n      {\r\n        prop: \"isSupportDingTalk\",\r\n        label: \"钉钉认证\",\r\n        type: \"switch\",\r\n        labelWidth: \"6em\",\r\n        attrs: supportSwitchAttrs,\r\n      },\r\n      {\r\n        prop: \"isSupportFeiShu\",\r\n        label: \"飞书认证\",\r\n        type: \"switch\",\r\n        labelWidth: \"6em\",\r\n        attrs: supportSwitchAttrs,\r\n      },\r\n      {\r\n        prop: \"isSupportCpyWeChat\",\r\n        label: \"企业微信认证\",\r\n        type: \"switch\",\r\n        attrs: supportSwitchAttrs,\r\n      },\r\n    ],\r\n  },\r\n  !props.isApply && {\r\n    prop: \"status\",\r\n    label: \"是否启用\",\r\n    type: \"switch\",\r\n  },\r\n];\r\nfunction getModel() {\r\n  const { isApply, data } = props;\r\n  //为0时不要回显数字0\r\n  if (data?.typeId === 0) {\r\n    data.typeId = \"\";\r\n  }\r\n  if (isApply) {\r\n    const { companyName } = data || {};\r\n    //公司申报时不回显邮箱\r\n    return { status: 0, emailSuffix: [], fullName: companyName };\r\n  } else {\r\n    //新增/编辑时\r\n    return Object.assign({ status: 0, emailSuffix: [] }, data);\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["supportSwitchAttrs","activeValue","inactiveValue","activeText","inactiveText","inlinePrompt","style","props","__props","isAdd","data","isApply","model","reactive","typeId","companyName","status","emailSuffix","fullName","Object","assign","getModel","fields","prop","label","type","options","attrs","required","maxlength","children","labelWidth"],"mappings":"yhDA2BA,MAAMA,EAAgC,CACpCC,YAAa,EACbC,cAAe,EACfC,WAAY,KACZC,aAAc,MACdC,cAAc,EACdC,MAAO,cAEHC,EAAQC,EASRC,EAAQF,EAAMG,OAASH,EAAMI,QAC7BC,EAAQC,EAoEd,WACQ,MAAAF,QAAEA,EAASD,KAAAA,GAASH,EAEL,KAAjB,MAAAG,OAAA,EAAAA,EAAMI,UACRJ,EAAKI,OAAS,IAEhB,GAAIH,EAAS,CACX,MAAMI,YAAEA,GAAgBL,GAAQ,GAEhC,MAAO,CAAEM,OAAQ,EAAGC,YAAa,GAAIC,SAAUH,EAAY,CAGpD,OAAAI,OAAOC,OAAO,CAAEJ,OAAQ,EAAGC,YAAa,IAAMP,EAEzD,CAlFkCW,IAC5BC,EAAsB,CAC1B,CACEC,KAAM,SACNC,MAAO,OACPC,KAAM,SACNC,QAAS,GACTC,MAAO,CAAC,GAEV,CACEJ,KAAM,WACNC,MAAO,OACPI,UAAU,EACVD,MAAO,CAAEE,UAAW,KAEtB,CACEN,KAAM,YACNC,MAAO,OACPI,UAAU,EACVD,MAAO,CAAEE,UAAW,KAEtB,CAAEN,KAAM,UAAWC,MAAO,SAAUI,UAAU,EAAMH,KAAM,UAC1D,CAAEF,KAAM,cAAeC,MAAO,OAAQC,KAAM,UAC5C,CACED,MAAO,OACPM,SAAU,CACR,CACEP,KAAM,iBACNC,MAAO,OACPC,KAAM,SACNM,WAAY,MACZJ,MAAO3B,GAET,CACEuB,KAAM,kBACNC,MAAO,OACPC,KAAM,SACNM,WAAY,MACZJ,MAAO3B,GAET,CACEuB,KAAM,oBACNC,MAAO,OACPC,KAAM,SACNM,WAAY,MACZJ,MAAO3B,GAET,CACEuB,KAAM,kBACNC,MAAO,OACPC,KAAM,SACNM,WAAY,MACZJ,MAAO3B,GAET,CACEuB,KAAM,qBACNC,MAAO,SACPC,KAAM,SACNE,MAAO3B,MAIZO,EAAMI,SAAW,CAChBY,KAAM,SACNC,MAAO,OACPC,KAAM"}