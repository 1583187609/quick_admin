{"version":3,"file":"index-2370c055.js","sources":["../../../src/views/statistics/analyze/index.vue"],"sourcesContent":["<template>\r\n  <BaseCrud\r\n    :cols=\"cols\"\r\n    v-model=\"model\"\r\n    :fields=\"fields\"\r\n    :fetch=\"GetMockCommonList\"\r\n    :extraBtns=\"['add']\"\r\n    :groupBtns=\"[\r\n      'edit',\r\n      {\r\n        name: 'plus',\r\n        text: '增加当日次数',\r\n        attrs: { icon: 'Plus', type: 'success' },\r\n      },\r\n      {\r\n        name: 'minus',\r\n        text: '减少当日次数',\r\n        attrs: { icon: 'Minus', type: 'danger' },\r\n      },\r\n    ]\"\r\n    @extraBtn=\"onExtraBtn\"\r\n    @groupBtn=\"onGroupBtn\"\r\n    :tableAttrs=\"{ showSummary: true }\"\r\n    :groupBtnsAttrs=\"{ vertical: true }\"\r\n  >\r\n  </BaseCrud>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { GetMockCommonList } from \"@/api-mock\";\r\nimport { FormField } from \"@/components/BaseFormItem\";\r\nimport { TableField } from \"@/components/table\";\r\nimport { ref, reactive, inject } from \"vue\";\r\nimport { BaseBtnType, BtnName } from \"@/components/BaseBtn\";\r\nimport AddEdit from \"./AddEdit.vue\";\r\nimport FormPopup from \"./FormPopup.vue\";\r\nimport { handleBtnNext } from \"@/utils\";\r\nimport { CommonObj, FinallyNext } from \"@/vite-env\";\r\nimport { h } from \"vue\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"StatisticsAnalyze\" }); \n\r\n\r\nconst openPopup: any = inject(\"openPopup\");\r\nconst model = reactive<CommonObj>({ age: [20, 30] });\r\nconst fields = ref<FormField[]>([\r\n  { prop: \"id\", label: \"用户ID\" },\r\n  { prop: \"name\", label: \"用户姓名\" },\r\n  {\r\n    prop: \"age\",\r\n    label: \"年龄\",\r\n    type: \"BaseNumberRange\",\r\n    // attrs: { minProp: \"min_age\", maxProp: \"max_age\" },\r\n  },\r\n  {\r\n    prop: \"gender\",\r\n    label: \"性别\",\r\n    type: \"select\",\r\n    options: \"Gender\",\r\n  },\r\n  {\r\n    prop: \"type\",\r\n    label: \"用户类型\",\r\n    type: \"select\",\r\n    options: \"RoleType\",\r\n  },\r\n  {\r\n    prop: \"status\",\r\n    label: \"账号状态\",\r\n    type: \"select\",\r\n    options: \"EnableStatus\",\r\n  },\r\n]);\r\nconst cols: TableField[] = [\r\n  { prop: \"name\", label: \"用户姓名\", width: 90 },\r\n  { prop: \"gender_text\", label: \"性别\", width: 90, sortable: true },\r\n  { prop: \"age\", label: \"年龄\", width: 90, sortable: true },\r\n  { prop: \"address_text\", label: \"地址\", minWidth: 250 },\r\n  { prop: \"phone\", label: \"电话\", minWidth: 120 },\r\n  { prop: \"type_text\", label: \"用户类型\", minWidth: 90 },\r\n  { prop: \"status\", label: \"状态\", type: \"BaseTag\" },\r\n];\r\n//点击列表上方的额外的按钮\r\nfunction onExtraBtn(name: BtnName, next: FinallyNext) {\r\n  handleBtnNext(\r\n    {\r\n      add: () => handleAddEdit(null, next),\r\n    },\r\n    name\r\n  );\r\n}\r\n//点击操作栏的分组按钮\r\nfunction onGroupBtn(name: BtnName, row: CommonObj, next: FinallyNext) {\r\n  handleBtnNext(\r\n    {\r\n      edit: () => handleAddEdit(row, next),\r\n      plus: () => handlePlusMinus(name, row, next),\r\n      minus: () => handlePlusMinus(name, row, next),\r\n    },\r\n    name\r\n  );\r\n}\r\n\r\n//新增/编辑\r\nfunction handleAddEdit(row: CommonObj | null, next: FinallyNext) {\r\n  openPopup(row ? \"编辑\" : \"新增\", h(AddEdit, { id: row?.id, refreshList: next }));\r\n}\r\n//增加或减少\r\nfunction handlePlusMinus(name: BtnName, row: CommonObj, next: FinallyNext) {\r\n  const titleMap: CommonObj = {\r\n    plus: \"增加当日次数\",\r\n    minus: \"减少当日次数\",\r\n  };\r\n  openPopup(titleMap[name as string], h(FormPopup, { id: row?.id, refreshList: next }), \"dialog\");\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["openPopup","inject","model","reactive","age","fields","ref","prop","label","type","options","cols","width","sortable","minWidth","onExtraBtn","name","next","handleBtnNext","add","handleAddEdit","onGroupBtn","row","edit","plus","handlePlusMinus","minus","h","AddEdit","id","refreshList","FormPopup"],"mappings":"m1DA0CM,MAAAA,EAAiBC,EAAO,aACxBC,EAAQC,EAAoB,CAAEC,IAAK,CAAC,GAAI,MACxCC,EAASC,EAAiB,CAC9B,CAAEC,KAAM,KAAMC,MAAO,QACrB,CAAED,KAAM,OAAQC,MAAO,QACvB,CACED,KAAM,MACNC,MAAO,KACPC,KAAM,mBAGR,CACEF,KAAM,SACNC,MAAO,KACPC,KAAM,SACNC,QAAS,UAEX,CACEH,KAAM,OACNC,MAAO,OACPC,KAAM,SACNC,QAAS,YAEX,CACEH,KAAM,SACNC,MAAO,OACPC,KAAM,SACNC,QAAS,kBAGPC,EAAqB,CACzB,CAAEJ,KAAM,OAAQC,MAAO,OAAQI,MAAO,IACtC,CAAEL,KAAM,cAAeC,MAAO,KAAMI,MAAO,GAAIC,UAAU,GACzD,CAAEN,KAAM,MAAOC,MAAO,KAAMI,MAAO,GAAIC,UAAU,GACjD,CAAEN,KAAM,eAAgBC,MAAO,KAAMM,SAAU,KAC/C,CAAEP,KAAM,QAASC,MAAO,KAAMM,SAAU,KACxC,CAAEP,KAAM,YAAaC,MAAO,OAAQM,SAAU,IAC9C,CAAEP,KAAM,SAAUC,MAAO,KAAMC,KAAM,YAG9B,SAAAM,EAAWC,EAAeC,GACjCC,EACE,CACEC,IAAK,IAAMC,EAAc,KAAMH,IAEjCD,EAEJ,CAES,SAAAK,EAAWL,EAAeM,EAAgBL,GACjDC,EACE,CACEK,KAAM,IAAMH,EAAcE,EAAKL,GAC/BO,KAAM,IAAMC,EAAgBT,EAAMM,EAAKL,GACvCS,MAAO,IAAMD,EAAgBT,EAAMM,EAAKL,IAE1CD,EAEJ,CAGS,SAAAI,EAAcE,EAAuBL,GAC5CjB,EAAUsB,EAAM,KAAO,KAAMK,EAAEC,EAAS,CAAEC,GAAI,MAAAP,OAAA,EAAAA,EAAKO,GAAIC,YAAab,IACtE,CAES,SAAAQ,EAAgBT,EAAeM,EAAgBL,GAKtDjB,EAJ4B,CAC1BwB,KAAM,SACNE,MAAO,UAEUV,GAAiBW,EAAEI,EAAW,CAAEF,GAAI,MAAAP,OAAA,EAAAA,EAAKO,GAAIC,YAAab,IAAS,SACxF"}