{"version":3,"file":"BaseImg-dfdffa48.js","sources":["../../../src/assets/images/default/img.png","../../../src/components/BaseImg.vue"],"sourcesContent":["export default \"__VITE_ASSET__2fcbc7ca__\"","<template>\r\n  <el-image\r\n    @click=\"handleClick\"\r\n    class=\"base-img\"\r\n    :class=\"{ round, to: !!to, empty: !src }\"\r\n    :src=\"src || emptyImg\"\r\n    :fit=\"fit\"\r\n    :style=\"newStyle\"\r\n    :initialIndex=\"initialIndex\"\r\n    v-bind=\"previewAttrs\"\r\n    preview-teleported\r\n    hide-on-click-modal\r\n  >\r\n    <template #placeholder>\r\n      <div class=\"err-box f-c-c-c\">\r\n        <BaseIcon class=\"rotate\" :size=\"sizeMap[sizeType]\" name=\"Loading\" />\r\n        <span class=\"tips\">{{ loadTips }}</span>\r\n      </div>\r\n    </template>\r\n    <template #error>\r\n      {{ emits(\"error\") }}\r\n      <el-image class=\"base-img\" :class=\"{ round }\" :src=\"errImgSrc\" :fit=\"fit\" preview-teleported v-if=\"errImgSrc\" />\r\n      <div class=\"err-box f-c-c-c\" v-else>\r\n        <BaseIcon :size=\"sizeMap[sizeType]\" name=\"Picture\"></BaseIcon>\r\n        <span class=\"tips\" v-if=\"errTips\">{{ errTips }}</span>\r\n      </div>\r\n    </template>\r\n  </el-image>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { reactive, ref, toRefs, computed } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { toCssVal } from \"@/components/_utils\";\r\nimport { typeOf } from \"@/components/_utils\";\r\nimport { TagType } from \"@/components/BaseTag.vue\";\r\nimport { CommonObj, FetchType, FinallyNext } from \"@/vite-env\";\r\nimport emptyImg from \"@/assets/images/default/img.png\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"BaseImg\" }); \n\r\nexport type TagSize = \"large\" | \"default\" | \"small\" | \"\";\r\nexport type ImgFitType = \"\" | \"fill\" | \"contain\" | \"cover\" | \"none\" | \"scale-down\";\r\nexport interface BarAttrs {\r\n  text: string;\r\n  attrs?: {\r\n    type?: TagType;\r\n  };\r\n}\r\nconst sizeMap: CommonObj = {\r\n  large: 26,\r\n  default: 22,\r\n  small: 18,\r\n};\r\nconst router = useRouter();\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    size?: number | string;\r\n    sizeType?: \"large\" | \"default\" | \"small\";\r\n    width?: number | string;\r\n    height?: number | string;\r\n    src?: string;\r\n    fit?: ImgFitType;\r\n    round?: boolean;\r\n    to?: string | CommonObj;\r\n    initialIndex?: number;\r\n    zoomRate?: number;\r\n    stopPropagation?: boolean; //点击图片时，是否阻止冒泡\r\n    preview?: boolean;\r\n    loadTips?: string;\r\n    errTips?: string;\r\n    errImgSrc?: string;\r\n  }>(),\r\n  {\r\n    fit: \"cover\",\r\n    sizeType: \"default\",\r\n    loadTips: \"玩命加载中…\",\r\n    errTips: \"加载失败\",\r\n    preview: (props: CommonObj) => props.to === undefined,\r\n  }\r\n);\r\nconst emits = defineEmits([\"click\", \"error\"]);\r\nconst previewAttrs = computed<CommonObj>(() => (props.src && props.preview ? { previewSrcList: [props.src] } : {}));\r\nconst newStyle = computed(() => {\r\n  return {\r\n    height: toCssVal(props.size || props.height),\r\n    width: toCssVal(props.size || props.width),\r\n  };\r\n});\r\n//处理点击图片\r\nfunction handleClick(e: any) {\r\n  const { preview, to, stopPropagation } = props;\r\n  to ? router.push(to) : emits(\"click\");\r\n  if (stopPropagation) e.stopImmediatePropagation();\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.base-img {\r\n  display: block; //去除inline-block的间隙\r\n  height: 120px;\r\n  width: 120px;\r\n  border-radius: $radius-main;\r\n  &.round {\r\n    border-radius: 50%;\r\n  }\r\n  &.to {\r\n    cursor: pointer;\r\n  }\r\n  &.empty {\r\n    color: $color-text-light;\r\n    font-size: 12px;\r\n    background: $color-bg-lighter;\r\n  }\r\n  .err-box {\r\n    height: 100%;\r\n    width: 100%;\r\n    color: $color-text-light;\r\n    background: $color-bg-lighter;\r\n    .tips {\r\n      margin-top: $gap-qtr;\r\n      font-size: 12px;\r\n      line-height: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["sizeMap","large","default","small","router","useRouter","props","__props","emits","__emit","previewAttrs","computed","src","preview","previewSrcList","newStyle","height","toCssVal","size","width","handleClick","e","to","stopPropagation","push","stopImmediatePropagation"],"mappings":"o7CAAA,keCiDA,MAAMA,EAAqB,CACzBC,MAAO,GACPC,QAAS,GACTC,MAAO,IAEHC,EAASC,IACTC,EAAQC,EA0BRC,EAAQC,EACRC,EAAeC,GAAoB,IAAOL,EAAMM,KAAON,EAAMO,QAAU,CAAEC,eAAgB,CAACR,EAAMM,MAAS,CAAG,IAC5GG,EAAWJ,GAAS,KACjB,CACLK,OAAQC,EAASX,EAAMY,MAAQZ,EAAMU,QACrCG,MAAOF,EAASX,EAAMY,MAAQZ,EAAMa,WAIxC,SAASC,EAAYC,GACnB,MAAMR,QAAEA,EAAAS,GAASA,EAAIC,gBAAAA,GAAoBjB,EACzCgB,EAAKlB,EAAOoB,KAAKF,GAAMd,EAAM,SACzBe,GAAiBF,EAAEI,0BACzB,wJD9Fe"}