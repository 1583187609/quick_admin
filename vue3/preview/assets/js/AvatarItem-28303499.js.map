{"version":3,"file":"AvatarItem-28303499.js","sources":["../../../src/components/CardCrud/_components/AvatarItem.vue"],"sourcesContent":["<template>\r\n  <div class=\"avatar-item\" :class=\"{ passed, rejected }\">\r\n    <div class=\"top-box\" :class=\"[true ? 'f-sb-s' : 'none']\">\r\n      <div class=\"mask f-c-c\" v-if=\"showMask\">\r\n        <div class=\"inner f-c-c\" :class=\"{ passed, rejected }\">\r\n          {{ passed ? \"已通过\" : rejected ? \"已驳回\" : \"\" }}\r\n        </div>\r\n      </div>\r\n      <BarsImg :bottomBar=\"status === 1 ? row.reason : ''\" width=\"200\" height=\"200\" :src=\"row.src\" class=\"avatar f-0\" />\r\n      <div class=\"info f-1\">\r\n        <div @click=\"$router.push({ name: 'systemUserDetail', query: { id: row.userId } })\" class=\"nickname line-2 row\">\r\n          {{ row.nickname || \"-\" }}\r\n        </div>\r\n        <BaseCopy class=\"row\" :text=\"row.userId\" />\r\n        <div class=\"f-fs-c row\">\r\n          <span class=\"mr-h\">{{ row.age ?? \"-\" }}岁</span>\r\n          <BaseTag name=\"Gender\" :value=\"row.gender\" pure-text />\r\n        </div>\r\n        <div class=\"row\">\r\n          上传：<b :class=\"{ 'color-success': row.uploadNum }\">{{ row.uploadNum ?? \"-\" }}</b>\r\n        </div>\r\n        <div class=\"row\">\r\n          驳回：<b :class=\"{ 'color-danger': row.rejectNum }\">{{ row.rejectNum ?? \"-\" }}</b>\r\n        </div>\r\n        <div class=\"time-age row\">\r\n          {{ getTimeAgo(row.avatarData?.updatedAt) || \"-\" }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"foot-box f-c-c\">\r\n      <BaseBtn\r\n        :name=\"btn\"\r\n        round\r\n        :disabled=\"isPatrol ? false : status !== 2\"\r\n        size=\"small\"\r\n        @click=\"() => emits('groupBtn', btn)\"\r\n        v-for=\"(btn, ind) in groupBtns\"\r\n        :key=\"ind\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ref, reactive, watch, computed } from \"vue\";\r\nimport { getTimeAgo } from \"@/components/_utils\";\r\nimport { CommonObj, FetchType, FinallyNext, StrNum } from \"@/vite-env\";\r\nimport { GroupBtnsType } from \"@/components/BaseCrud/_components/GroupBtns.vue\";\r\nimport { AuditStatus } from \"../Index.vue\";\nimport { defineOptions } from 'vue'; \ndefineOptions({ name: \"AvatarItem\" }); \n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    row: CommonObj;\r\n    withMask?: boolean; //是否要用mask遮罩层来区分\r\n    status?: AuditStatus;\r\n    isPatrol?: boolean; //是否是巡查\r\n    groupBtns?: GroupBtnsType;\r\n  }>(),\r\n  {\r\n    row: () => ({\r\n      userId: \"\",\r\n      age: 0,\r\n      gender: 0,\r\n      nickname: \"\",\r\n      uploadNum: 0,\r\n      rejectNum: 0,\r\n      createdAt: 0,\r\n      updatedAt: 0,\r\n      avatarData: () => {},\r\n    }),\r\n    groupBtns: () => [],\r\n  }\r\n);\r\nconst emits = defineEmits([\"groupBtn\"]);\r\nconst passed = computed(() => !props.isPatrol && props.status === 0);\r\nconst rejected = computed(() => !props.isPatrol && props.status === 1);\r\nconst showMask = computed(() => props.withMask && (passed.value || rejected.value));\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n$size: 200px;\r\n.avatar-item {\r\n  position: relative;\r\n  min-width: 310px;\r\n  max-width: 350px;\r\n  margin-bottom: $gap-qtr;\r\n  // height: 33.33%;\r\n  width: calc(20% - $gap-half);\r\n  transition: all 0.85s;\r\n  &.passed {\r\n    // visibility: hidden;\r\n    // opacity: 0;\r\n  }\r\n  &.rejected {\r\n    // filter: grayscale(1);\r\n    // &:hover {\r\n    //   filter: none;\r\n    // }\r\n  }\r\n  &:hover {\r\n    .mask {\r\n      opacity: 0;\r\n      pointer-events: none;\r\n    }\r\n  }\r\n  .mask {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    z-index: 10;\r\n    border-radius: $radius-main;\r\n    background: rgba(#000, 0.5);\r\n    transition: opacity 0.85s;\r\n    .inner {\r\n      border-radius: 50%;\r\n      height: 100px;\r\n      width: 100px;\r\n      font-size: 16px;\r\n      &.passed {\r\n        color: $color-success;\r\n        border: 2px dashed $color-success;\r\n        background: rgba($color-success, 0.25);\r\n      }\r\n      &.rejected {\r\n        color: $color-danger;\r\n        border: 2px dashed $color-danger;\r\n        background: rgba($color-danger, 0.25);\r\n      }\r\n    }\r\n  }\r\n  .top-box {\r\n    height: $size;\r\n    overflow: hidden;\r\n    border-radius: $radius-main;\r\n    background: #fff;\r\n    @include shadow-main();\r\n    &.none {\r\n      background: transparent;\r\n    }\r\n  }\r\n  .avatar {\r\n    height: $size;\r\n    width: $size;\r\n    border-radius: 0;\r\n  }\r\n  .info {\r\n    font-size: 13px;\r\n    padding: $gap-qtr $gap-half;\r\n    .row {\r\n      &:not(:last-child) {\r\n        margin-bottom: $gap-half;\r\n      }\r\n    }\r\n    .nickname {\r\n      cursor: pointer;\r\n      margin-top: $gap-half;\r\n      font-weight: 600;\r\n      &:hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n    .time-age {\r\n      color: $color-text-light;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n  .foot-box {\r\n    height: 36px;\r\n  }\r\n}\r\n</style>\r\n"],"names":["props","__props","emits","__emit","passed","computed","isPatrol","status","rejected","showMask","withMask","value"],"mappings":"+5DAmDA,MAAMA,EAAQC,EAuBRC,EAAQC,EACRC,EAASC,GAAS,KAAOL,EAAMM,UAA6B,IAAjBN,EAAMO,SACjDC,EAAWH,GAAS,KAAOL,EAAMM,UAA6B,IAAjBN,EAAMO,SACnDE,EAAWJ,GAAS,IAAML,EAAMU,WAAaN,EAAOO,OAASH,EAASG"}