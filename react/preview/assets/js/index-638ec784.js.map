{"version":3,"file":"index-638ec784.js","sources":["../../../src/views/system/user/account/index.tsx"],"sourcesContent":["/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { DeleteUserList, PostMockCommonExport, GetMockCommonList, PostMockCommon } from \"@/api-mock\";\r\nimport { PopupContext } from \"@/components/provider/PopupProvider\";\r\nimport { BtnName } from \"@/components/BaseBtn\";\r\nimport BaseCrud, { ExportBtnParams } from \"@/components/BaseCrud\";\r\nimport React, { useContext } from \"react\";\r\nimport AddEdit from \"./_components/AddEdit\";\r\nimport { fields, columns } from \"./fields\";\r\nimport { CommonObj, FinallyNext } from \"@/vite-env\";\r\nimport { handleBtnNext, showMessage } from \"@/utils\";\r\n\r\nexport default () => {\r\n  const { openPopup } = useContext(PopupContext);\r\n  //处理额外按钮\r\n  function onExtraBtn(name: BtnName, { params, ids, fields }: ExportBtnParams, next: FinallyNext) {\r\n    handleBtnNext(\r\n      {\r\n        add: () => openPopup(\"新增\", <AddEdit refreshList={next} />),\r\n        delete: () => handleDelete(ids, next),\r\n        export: () => handleExport({ ...params, exports: { ids, fields } }, next),\r\n      },\r\n      name\r\n    );\r\n  }\r\n  //点击操作按钮\r\n  function onOperateBtn(name: BtnName, row: CommonObj, next: FinallyNext) {\r\n    const { id } = row;\r\n    handleBtnNext(\r\n      {\r\n        edit: () => openPopup(\"编辑\", <AddEdit data={row} refreshList={next} />),\r\n        view: () => openPopup(\"查看\", <AddEdit data={row} />),\r\n        delete: () => handleDelete([id], next),\r\n        forbid: () => handleForbid(id, next),\r\n        enable: () => handleEnable(id, next),\r\n      },\r\n      name\r\n    );\r\n  }\r\n  //删除\r\n  function handleDelete(ids: React.Key[], next: FinallyNext) {\r\n    DeleteUserList(ids).then((res: CommonObj) => next());\r\n  }\r\n  //导出\r\n  function handleExport(params: CommonObj, next: FinallyNext) {\r\n    PostMockCommonExport(params).then((res: CommonObj) => next());\r\n  }\r\n  //启用\r\n  function handleEnable(id: string, next: FinallyNext) {\r\n    PostMockCommon({ id }).then((res: CommonObj) => next());\r\n  }\r\n  //禁用\r\n  function handleForbid(id: string, next: FinallyNext) {\r\n    PostMockCommon({ id }).then((res: CommonObj) => next());\r\n  }\r\n  return (\r\n    <BaseCrud\r\n      // formAttrs={{ initialValues: { gender: 1 } }}\r\n      fields={fields}\r\n      columns={columns}\r\n      fetch={GetMockCommonList}\r\n      extraBtns={[\r\n        \"add\",\r\n        \"delete\",\r\n        // \"import\",\r\n        \"export\",\r\n        // \"edit\",\r\n        // \"view\",\r\n        // \"repeal\",\r\n        // \"download\",\r\n        // \"log\",\r\n        // \"forbid\",\r\n        // \"enable\",\r\n        // \"upload\",\r\n        // \"submit\",\r\n        // \"reset\",\r\n      ]}\r\n      operateBtns={[\r\n        \"edit\",\r\n        \"delete\",\r\n        \"view\",\r\n        (row: CommonObj) => (row.status === 2 ? \"enable\" : \"forbid\"),\r\n        // { name: \"custom\", text: \"自定义按钮\" },\r\n      ]}\r\n      onExtraBtn={onExtraBtn}\r\n      onOperateBtn={onOperateBtn}\r\n      // sort\r\n      index\r\n      selection\r\n    />\r\n  );\r\n};\r\n"],"names":["index","openPopup","useContext","PopupContext","onExtraBtn","name","params","ids","fields","next","handleBtnNext","AddEdit","handleDelete","handleExport","onOperateBtn","row","id","jsx","handleForbid","handleEnable","DeleteUserList","res","PostMockCommonExport","PostMockCommon","BaseCrud","columns","GetMockCommonList"],"mappings":"81FAcA,MAAAA,GAAe,IAAM,CACnB,KAAM,CAAE,UAAAC,CAAA,EAAcC,EAAA,WAAWC,CAAY,EAEpC,SAAAC,EAAWC,EAAe,CAAE,OAAAC,EAAQ,IAAAC,EAAK,OAAAC,GAA2BC,EAAmB,CAC9FC,EACE,CACE,IAAK,IAAMT,EAAU,WAAOU,EAAQ,CAAA,YAAaF,EAAM,CAAE,EACzD,OAAQ,IAAMG,EAAaL,EAAKE,CAAI,EACpC,OAAQ,IAAMI,EAAa,CAAE,GAAGP,EAAQ,QAAS,CAAE,IAAAC,EAAK,OAAAC,CAAO,CAAA,EAAKC,CAAI,CAC1E,EACAJ,CAAA,CAEJ,CAES,SAAAS,EAAaT,EAAeU,EAAgBN,EAAmB,CAChE,KAAA,CAAE,GAAAO,CAAO,EAAAD,EACfL,EACE,CACE,KAAM,IAAMT,EAAU,KAAMgB,MAACN,GAAQ,KAAMI,EAAK,YAAaN,CAAM,CAAA,CAAE,EACrE,KAAM,IAAMR,EAAU,WAAOU,EAAQ,CAAA,KAAMI,EAAK,CAAE,EAClD,OAAQ,IAAMH,EAAa,CAACI,CAAE,EAAGP,CAAI,EACrC,OAAQ,IAAMS,EAAaF,EAAIP,CAAI,EACnC,OAAQ,IAAMU,EAAaH,EAAIP,CAAI,CACrC,EACAJ,CAAA,CAEJ,CAES,SAAAO,EAAaL,EAAkBE,EAAmB,CACzDW,EAAeb,CAAG,EAAE,KAAMc,GAAmBZ,GAAM,CACrD,CAES,SAAAI,EAAaP,EAAmBG,EAAmB,CAC1Da,EAAqBhB,CAAM,EAAE,KAAMe,GAAmBZ,GAAM,CAC9D,CAES,SAAAU,EAAaH,EAAYP,EAAmB,CACpCc,EAAA,CAAE,GAAAP,EAAI,EAAE,KAAMK,GAAmBZ,GAAM,CACxD,CAES,SAAAS,EAAaF,EAAYP,EAAmB,CACpCc,EAAA,CAAE,GAAAP,EAAI,EAAE,KAAMK,GAAmBZ,GAAM,CACxD,CAEE,OAAAQ,EAAA,IAACO,EAAA,CAEC,OAAAhB,EACA,QAAAiB,EACA,MAAOC,EACP,UAAW,CACT,MACA,SAEA,QAWF,EACA,YAAa,CACX,OACA,SACA,OACCX,GAAoBA,EAAI,SAAW,EAAI,SAAW,QAErD,EACA,WAAAX,EACA,aAAAU,EAEA,MAAK,GACL,UAAS,EAAA,CAAA,CAGf"}