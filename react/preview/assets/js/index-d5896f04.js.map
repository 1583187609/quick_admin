{"version":3,"mappings":"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CACH,KAAM,OACN,MAAO,CACL,MAAO,UACP,MAAO,CACL,MAAO,MACT,CACF,CACF,EACA,EAAK,CACH,KAAM,MACN,MAAO,CACL,MAAO,SACT,CACF,CACF,EAEA,cAAe,CACb,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,SACT,CACF,EACA,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,SACT,CACF,EACA,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,SACT,CACF,EACA,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,SACT,CACF,CACF,EAEA,aAAc,CACZ,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,SACT,CACF,EACA,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,YACT,CACF,CACF,EAEA,YAAa,CACX,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,SACT,CACF,EACA,EAAG,CACD,KAAM,OACN,MAAO,CACL,MAAO,OACT,CACF,CACF,EAEA,eAAgB,CAAC,CAYnB,ECjHeC,GAAA,CAEb,SAAU,CACR,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,KACN,MAAO,CACL,MAAO,YACT,CACF,CAOF,EAEA,SAAU,CACR,EAAG,CACD,KAAM,QACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,QACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,OACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,OACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,OACN,MAAO,CACL,MAAO,YACT,CACF,EACA,EAAG,CACD,KAAM,OACN,MAAO,CACL,MAAO,YACT,CACF,CACF,CACF,EC3DMC,GAAW,CAEf,OAAQ,CAAC,CACX,ECCeC,GAAA,CACb,GAAGC,GACH,GAAGJ,G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","names":["cookieStorage","key","val","hours","date","arrCookie","i","arr","keys","storageMap","storage","type","config","col","_a","auth","getUserInfo","res","upFile","resolve","reject","code","message","data","regexp","getExportData","table","form","homePath","widgetSize","defaultHomePath","defaultWidgetSize","defaultIconName","defaultGroupBtnsMaxNum","propsJoinChar","emptyVals","getTextFromOpts","opts","inds","text","cycle","ind","label","children","typeOf","ele","toCssVal","unit","getChinaCharLength","str","omitAttrs","obj","list","newObj","it","deleteAttrs","sysData","customData","mergeType","merge","handleBtnNext","map","name","showMessage","sortObjArrByKey","a","b","copyText","input","getIsOver","target","scrollHeight","clientHeight","urlParamsToSearch","params","getText","value","BaseKeyVal","className","style","labelStyle","colon","lineNum","valClass","valText","jsxs","s","jsx","AddDelList","formItems","restProps","setList","useState","handleClick","isAdd","item","Form","Space","Button","PlusCircleOutlined","MinusCircleOutlined","defaultAttrs","formItemStyle","BaseNumberRange","id","names","attrs","newAttrs","minName","maxName","rules","getFieldValue","minVal","maxVal","InputNumber","getBase64","img","callback","reader","defaultUploadAttrs","getSizeUnit","size","kb","UploadAvatar","maxSize","loading","setLoading","imgUrl","setImgUrl","beforeUpload","file","types","isAccept","typeStr","upperCase","handleChange","info","url","Upload","LoadingOutlined","PlusOutlined","datePresets","dayjs","dateRangePresets","fieldMap","Input","AutoComplete","Select","Radio","Rate","TimePicker","DatePicker","ColorPicker","Slider","Cascader","Switch","Checkbox","render","field","childrenStyle","BaseFormItem","defaultFieldAttrs","defaultValidTypes","getKeyVal","options","format","_b","_c","checkedChildren","unCheckedChildren","getColAttrs","BaseQuestionPopover","Popover","QuestionCircleFilled","getSomeRequired","required","FieldItem","renderField","pureText","labelWidth","isChild","showChildLabel","getOpts","getCascaderOpts","useDictMap","fieldInfo","useMemo","extra","tempField","getAttrs","otherAttrs","valid","example","popover","currValidField","phr","Fragment","colAttrs","fieldAttrs","standFieldAttrs","Col","getTextFromReactNode","node","hint","others","hintStr","isValidElement","speed","duration","cfg","printLog","cssVars","bgColor","debounce","fn","immediate","delay","timer","args","canExe","getScreenSizeType","w","getDateFields","fields","getDateFormat","dateFields","convertDateField","dateNames","isArr","getMaxLength","num","max","popNum","_max","getIconNames","Icons","dictMap","cascaderMap","useStoreSlice","getMap","codeMap","currMap","tempMap","char","includeKeys","isExclude","disabled","opt","isInclude","getCascaderText","regions","useEventListener","effect","isImmediate","useEffect","updateState","state","payload","sliceMap","base$2","createSlice","defaultSet","initState","set","convertToMenuNavs","menus","level","user","auth_codes","path","icon","React","Icons.TwitterOutlined","localMenus","menuSlice","base$1","other","system","cascader","dict$1","base","dict","historyMsg","showLoadTimer","loadingCount","endLoading","showLoading","hideLoading","service","axios","showToast","msg","err","resData","pathname","search","http","method","isStringify","qs","GetUserCaptcha","PostUserLogin","PostUserLogout","GetUserLoginAccounts","GetUserInfo","DeleteUserList","routes$1","expiration","initMenus","menuStore","updateRoutesState","routesStore","handleMenusIcon","navs","handleLoginIn","createAsyncThunk","dispatch","getState","remember","router","location","rest","filterNavs","newNavs","nickname","type_text","expired","expiredDate","toPath","isCreatedRoute","notification","handleLoginInAfter","builder","pending","fulfilled","rejected","handleLoginOut","phone","isFetch","suffix","handleLoginOutAfter","initialState","userSlice","userExpose","getAsyncCountAction","demoStore","store","configureStore","combineReducers","menu","routes","demo","getReducers","actionsMap","slice","useDispatch","useSelector","toPathStr","query","route","whiteList","getRouteIsAuth","allNavs","userType","isAuth","newPath","cycleIsFind","isFind","useRouter","navigate","useNavigate","BaseEmpty","tips","Empty","VITE_APP_NAME","useMenu","allMenus","updateMenuState","toFirstPath","link_type","changeActiveIndex","toFirst","subNavs","SideMenu","theme","layout","seledKeys","openKeys","sideMenus","useLocation","items","isSubMenu","setOpenAndSeledKeys","handleSelect","useCallback","selectedKeys","keyPath","handleOpenChange","pathName","rootInd","findTarget","tarPath","Menu","TheMenu","isCollapse","btnProps","getMenus","handleClose","disabledCase","CloseOutlined","ColumnWidthOutlined","CloseCircleOutlined","Divider","ArrowRightOutlined","ArrowLeftOutlined","FileDoneOutlined","CopyOutlined","SnippetsOutlined","ReloadOutlined","PageTagItem","active","closable","onClose","onClick","open","onOpenChange","Dropdown","Tag","PageTags","reload","updatedTitle","contMenuIndRef","useRef","scrollRef","setDisabled","tags","setTags","menusDisabledCase","setMenusDisabledCase","getMenusDisabledCase","menuInd","menuPath","isHome","isFirst","isLast","isEmpty","isOnly","initDisabled","addRoute","scrollWidth","clientWidth","offsetWidth","scrollLeft","width","onArrowBtn","direction","left","cloneTags","isActive","nextInd","findInd","HomeOutlined","DoubleLeftOutlined","DoubleRightOutlined","BaseDrawer","Drawer","BaseModal","Modal","PopupContext","createContext","closeDelay","modalTimer","drawerTimer","PopupProvider","drawers","setDrawers","modals","setModals","getHeadAttrs","head","popupId","closeKeyMap","closePopup","openDrawer","body","closeDrawer","popup","destroyed","openModal","foot","closeModal","openPopup","isModId","getTopPopupIds","topPops","isModal","isId","getPopups","drawer","modal","createElement","FormFields","rowAttrs","Row","getBtnProps","btn","FormFoot","submitButton","resetButton","readOnly","onReset","submitBtn","resetBtn","handleReset","CloudUploadOutlined","RedoOutlined","defaultFormProps","getUnFilledInds","sections","getUnFilled","sItem","sInd","maxInd","getFilterSections","fItem","getFilterFields","newSections","getInfo","initVals","newFields","useInitForm","props","ref","getUnFilledIndexs","fetchSuccess","fetchFail","fetch","onSubmit","initialValues","onValuesChange","isOmit","log","extraParams","footer","useContext","isSectionForm","useImperativeHandle","debounceInitInds","debounceHandleFinish","fetchSucCb","closeType","cb","isRefreshList","newParams","debounceHandleFinishFailed","values","errorFields","outOfDate","vals","allVals","BaseForm","forwardRef","formAttrs","UserInfo","getDetail","setInitVals","initFolds","SectionForm","folds","setFolds","handleToggleFold","title","CaretDownOutlined","toFieldItem","scripts","dependencies","devDependencies","env","envMap","SystemInfo","inivVals","version","avatarImg","avatarManImg","avatarWomanImg","emptyImg","errImg","BaseImg","height","src","to","round","errImgSrc","loadTips","errTips","preview","fallback","event","Image","avatarMap","BaseAvatar","gender","BaseIcon","color","Icon","PathBreadcrumb","isDark","breadcrumbs","setBreadcrumbs","getAllBreadcrumbs","parent","result","Breadcrumb","tooltipAttrs","layoutMap","LayoutStyle","onChange","updateSetState","setType","handleSelected","Tooltip","showHideSwitchAttrs","sizeOpts","languageOpts","getSections","bread","page_tag","SystemSet","setStore","getDefaultModel","setParams","next","logoImg","TheHead","userInfo","openLogoutDialog","ExclamationCircleFilled","MenuUnfoldOutlined","MenuFoldOutlined","UserOutlined","SettingOutlined","InfoCircleOutlined","PoweroffOutlined","mainMenuWidth","asiderWidth","asiderWidthFold","Layout","activeIndex","show","setShow","maxWidthMap","Watermark","Suspense","Spin","Outlet","Captcha","formRef","captcha","setCaptcha","getCaptcha","e","FindPassword","Register","Login","storeAccount","model","setModel","accountOpts","setAccountOpts","getAccountOpts","account","modules","LazyLoad","Module","getFlatRoutes","child","pushRoutes","component","camelCase","errorRoutes","RouterView","setRoutes","createRoutes","newRoutes","useRoutes","BaseContext","BaseProvider","App","FullLoading","mask","setupProdMockServer","createProdMockServer","apis","ReactDOM","ConfigProvider","zhCN","HashRouter","Provider"],"sources":["../../../src/components/_utils/common/storage.ts","../../../src/config/index.ts","../../../src/components/_utils/common/regexp.ts","../../../src/components/_utils/common/consts.ts","../../../src/components/_utils/common/system.ts","../../../src/components/_utils/common/base.ts","../../../src/components/_utils/common/_temp.ts","../../../src/components/BaseKeyVal/index.tsx","../../../src/components/BaseFormItem/_components/AddDelList.tsx","../../../src/components/BaseNumberRange.tsx","../../../src/components/upload/UploadAvatar.tsx","../../../src/components/BaseFormItem/_config.tsx","../../../src/components/BaseFormItem/_utils.ts","../../../src/components/BaseQuestionPopover.tsx","../../../src/components/BaseFormItem/index.tsx","../../../src/components/_utils/platform.ts","../../../src/hooks/dict-map.ts","../../../src/hooks/event.ts","../../../src/store/_utils.ts","../../../src/store/modules/base.ts","../../../src/store/modules/set.ts","../../../src/store/modules/menu.ts","../../../src/dict/modules/base.ts","../../../src/dict/modules/other.ts","../../../src/dict/modules/system.ts","../../../src/dict/cascader.ts","../../../src/dict/index.ts","../../../src/store/modules/dict.ts","../../../src/services/http.ts","../../../src/api-mock/user.ts","../../../src/store/modules/routes.ts","../../../src/store/modules/user.ts","../../../src/store/modules/demo.ts","../../../src/store/index.ts","../../../src/hooks/store-slice.ts","../../../src/router/routes.ts","../../../src/components/_hooks/router.ts","../../../src/components/BaseEmpty.tsx","../../../src/layout/_hooks.ts","../../../src/layout/_components/SideMenu/index.tsx","../../../src/layout/_components/TheMenu/index.tsx","../../../src/layout/_components/TheHead/_components/PageTags/TagItem/menus.tsx","../../../src/layout/_components/TheHead/_components/PageTags/TagItem/index.tsx","../../../src/layout/_components/TheHead/_components/PageTags/index.tsx","../../../src/components/BaseDrawer.tsx","../../../src/components/BaseModal.tsx","../../../src/components/provider/PopupProvider.tsx","../../../src/components/form/_components/FormFields.tsx","../../../src/components/form/_utils/index.ts","../../../src/components/form/_components/FormFoot.tsx","../../../src/components/form/_config.ts","../../../src/components/form/_hooks/index.ts","../../../src/components/form/BaseForm/index.tsx","../../../src/layout/_components/TheHead/_components/UserInfo.tsx","../../../src/components/form/SectionForm/index.tsx","../../../src/layout/_components/TheHead/_components/SystemInfo.tsx","../../../src/assets/images/default/avatar.png","../../../src/assets/images/default/avatar-man.png","../../../src/assets/images/default/avatar-woman.png","../../../src/assets/images/default/img.png","../../../src/assets/images/default/err.png","../../../src/components/BaseImg/index.tsx","../../../src/components/BaseAvatar/index.tsx","../../../src/components/BaseIcon/index.tsx","../../../src/layout/_components/TheHead/_components/PathBreadcrumb/index.tsx","../../../src/layout/_components/TheHead/_components/SystemSet/_components/LayoutStyle/index.tsx","../../../src/layout/_components/TheHead/_components/SystemSet/index.tsx","../../../src/assets/images/logo.svg","../../../src/layout/_components/TheHead/index.tsx","../../../src/layout/index.tsx","../../../src/views/login/_components/Captcha/index.tsx","../../../src/views/login/_components/FindPassword.tsx","../../../src/views/login/_components/Register.tsx","../../../src/views/login/index.tsx","../../../src/components/RouterView.tsx","../../../src/components/provider/BaseProvider.tsx","../../../src/App.tsx","../../../src/components/FullLoading/index.tsx","../../../src/mockProdServer.ts","../../../src/main.tsx"],"sourcesContent":["/********************************************************************/\r\n/***** 构造cookie存储，让api跟localStorage、sessionStorage保持一致 *****/\r\n/********************************************************************/\r\n\r\nexport type StorageType = \"local\" | \"session\" | \"cookie\";\r\nconst cookieStorage = {\r\n  setItem(key: string, val: any, hours = 24) {\r\n    const date = new Date();\r\n    date.setTime(date.getTime() + hours * 3600 * 1000);\r\n    document.cookie = key + \"=\" + val + \";expires=\" + date.toUTCString();\r\n  },\r\n  getItem(key: string) {\r\n    const arrCookie = document.cookie.split(\";\");\r\n    let val = null;\r\n    for (let i = 0; i < arrCookie.length; i++) {\r\n      const arr = arrCookie[i].split(\"=\");\r\n      if (key == arr[0]) {\r\n        val = arr[1];\r\n        break;\r\n      }\r\n    }\r\n    return val;\r\n  },\r\n  removeItem(key: string) {\r\n    const date = new Date();\r\n    date.setTime(date.getTime() - 1000);\r\n    document.cookie = key + \"=0; expires =\" + date.toUTCString();\r\n  },\r\n  clear() {\r\n    const keys = document.cookie.match(/[^ =;]+(?=\\=)/g);\r\n    if (keys) {\r\n      for (let i = keys.length; i--; ) document.cookie = keys[i] + \"=0;expires=\" + new Date(0).toUTCString();\r\n    }\r\n  },\r\n};\r\ninterface StorageMap {\r\n  [key: string]: any;\r\n}\r\n//定义一个映射关系，方便下面直接动态赋予属性\r\nconst storageMap: StorageMap = {\r\n  cookieStorage,\r\n  localStorage,\r\n  sessionStorage,\r\n};\r\nexport default {\r\n  /**\r\n   * 存数据\r\n   * @param key {String} 要存储数据的键名\r\n   * @param val {*} 要存储的数据值\r\n   * @param type {String} 存储类型：local, session, cookie\r\n   * @param hours {Number} cookie的过期时间，只有当type为cookie时，才会用到这个参数\r\n   */\r\n  setItem(key: string, val: any, type: StorageType = \"local\", hours?: number) {\r\n    if (typeof val === \"object\") {\r\n      val = JSON.stringify(val);\r\n    }\r\n    return storageMap[type + \"Storage\"].setItem(key, val, hours);\r\n  },\r\n  /**\r\n   * 取数据\r\n   * @param key {String} 要取数据的键名\r\n   * @param type {String} 存储类型：local, session, cookie\r\n   */\r\n  getItem(key: string, type: StorageType = \"local\") {\r\n    let val = storageMap[type + \"Storage\"].getItem(key);\r\n    if (val === null) return null;\r\n    if (val === \"undefined\") return;\r\n    if (val === \"false\") return false;\r\n    if (val === \"true\") return true;\r\n    if (val.startsWith(\"{\") || val.startsWith(\"[\")) {\r\n      val = JSON.parse(val);\r\n    }\r\n    return val;\r\n  },\r\n  /**\r\n   * 删除指定键名对应的数据\r\n   * @param key {String} 要删除数据的键名\r\n   * @param type {String} 删除类型：local, session, cookie\r\n   */\r\n  removeItem(key: string, type: StorageType = \"local\") {\r\n    return storageMap[type + \"Storage\"].removeItem(key);\r\n  },\r\n  /**\r\n   * 删除所有存储数据\r\n   * @param type\r\n   */\r\n  clear(type: StorageType = \"local\") {\r\n    return storageMap[type + \"Storage\"].clear();\r\n  },\r\n  /**\r\n   * 删除所有存储的键名\r\n   * @param type\r\n   */\r\n  getKeys(type: StorageType = \"local\") {\r\n    return Object.keys(storageMap[type + \"Storage\"]);\r\n  },\r\n};\r\n","import { BaseComponentsConfig } from \"./_types\";\r\nimport { BaseCrudColItemAttrs } from \"@/components/table\";\r\nimport { getUserInfo, storage } from \"@/utils\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nexport * from \"./_types\";\r\n\r\nconst isSmall = true;\r\nconst isProd = import.meta.env.MODE === \"production\";\r\n// 首页地址（默认）\r\n\r\nconst config = {\r\n  // homePath: \"/home\",\r\n  mergeStrategy: \"assign\",\r\n  popup: {\r\n    defaultType: \"dialog\",\r\n  },\r\n  form: {\r\n    emptyTime: \"1000-01-01 00:00:00\",\r\n    defaultFormItemType: \"input\",\r\n    // defaultDateShortcuts: [],\r\n    // defaultDateRangeShortcuts: [],\r\n    // defaultFieldAttrs: {},\r\n    // defaultPopoverAttrs: {},\r\n    // defaultValidTypes: {},\r\n  },\r\n  table: {\r\n    // defaultGroupBtnsMaxNum: 3,\r\n    customSpecialCol: {\r\n      //创建列\r\n      create: {\r\n        prop: [\"adminName\", \"createdAt\"],\r\n        label: \"创建时间\",\r\n        minWidth: 170,\r\n      },\r\n      //修改列\r\n      update: {\r\n        prop: [\"adminName\", \"updatedAt\"],\r\n        label: \"修改时间\",\r\n        minWidth: 170,\r\n      },\r\n      //switch开关\r\n      switch: {\r\n        prop: \"status\",\r\n        label: \"启用状态\",\r\n        minWidth: 90,\r\n        attrs: {\r\n          activeValue: 0,\r\n          inactiveValue: 1,\r\n          activeText: \"启用\",\r\n          inactiveText: \"禁用\",\r\n          inlinePrompt: true,\r\n          // onChange() {\r\n          //   ElMessage.warning(\"暂未处理【启用/禁用】事件\");\r\n          // },\r\n        },\r\n      },\r\n      //是否启用 状态\r\n      BaseTag: {\r\n        prop: \"status\",\r\n        label: \"状态\",\r\n        minWidth: 100,\r\n        attrs: { name: \"EnableStatus\" },\r\n      },\r\n      //图片\r\n      BaseImg: {\r\n        prop: \"imgUrl\",\r\n        label: \"图片\",\r\n        minWidth: 146,\r\n        attrs: { size: \"120\" },\r\n      },\r\n      //文本复制\r\n      // BaseCopy: {},\r\n      //用户信息\r\n      UserInfo: {\r\n        prop: \"userData\",\r\n        label: \"用户信息\",\r\n        // minWidth: 280, // 450/280\r\n        fixed: \"left\",\r\n        getAttrs(col: BaseCrudColItemAttrs) {\r\n          return {\r\n            width: col?.attrs?.simple ? 232 : 450,\r\n          };\r\n        },\r\n      },\r\n    },\r\n  },\r\n  BaseCrud: {\r\n    Index: {\r\n      // immediate: true,\r\n      // changeFetch: true,\r\n      // batchBtn: false,\r\n      // log: false,\r\n      // isOmit: true,\r\n      // inputDebounce: true,\r\n      // exportLimit: 10000,\r\n      // pagination: () => ({ currPage: 1, pageSize: 20 }),\r\n      // reqMap: () => ({\r\n      //   curr_page: \"page\",\r\n      //   page_size: \"pageSize\",\r\n      // }),\r\n      // resMap: () => ({\r\n      //   curr_page: \"currentPage\",\r\n      //   page_size: \"pageSize\",\r\n      //   total_num: \"total\",\r\n      //   has_more: \"hasMore\",\r\n      //   records: \"list\",\r\n      // }),\r\n      filterByAuth: (auth: number[]) => auth.includes(getUserInfo()?.type),\r\n      // filterByAuth: (auth: number[]) => true,\r\n      //跟下面的size  small 搭配使用\r\n      // colSpanAttrs: () => ({\r\n      //   xs: 12,\r\n      //   sm: 12,\r\n      //   md: 8,\r\n      //   lg: 4,\r\n      //   xl: 3,\r\n      // }),\r\n      // size: isSmall ? \"small\" : undefined,\r\n      // compact: (_props: CommonObj) => _props.colSpanAttrs.xl < 6,\r\n    },\r\n    // _components: {\r\n    //   ExtraBtns: undefined,\r\n    //   BatchBtns: undefined,\r\n    //   GroupBtns: undefined,\r\n    //   Pagination: undefined,\r\n    //   QueryForm: undefined,\r\n    //   Column: undefined,\r\n    //   QueryTable: undefined,\r\n    //   SetPrint: undefined,\r\n    //   SetTable: undefined,\r\n    // },\r\n  },\r\n  BaseBtn: {\r\n    btnsMap: {\r\n      //auth 权限说明 0超级管理员 1普通管理员 2特殊用户 3普通用户 4游客用户 5开发者\r\n      add: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      edit: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      delete: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      pass: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      reject: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      repeal: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      import: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      export: { auth: [] },\r\n      upload: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      download: { auth: [] },\r\n      enable: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      forbid: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      audit: { auth: [0, 1, 2, { code: 4, disabled: true }, 5] },\r\n      view: { auth: undefined },\r\n      submit: { auth: null },\r\n      reset: { auth: [0, 5] },\r\n      log: { auth: null },\r\n      // empty: { auth: null },\r\n    },\r\n  },\r\n  BaseUpload: {\r\n    // size: 100,\r\n    // fit: \"cover\",\r\n    // showFileList: false,\r\n    // showTips: true,\r\n    // accept: \"image/png,image/jpg,image/jpeg\",\r\n    // limitSize: 1024 * 1024 * 10, //10M\r\n    headers: () => ({ \"X-Token\": storage.getItem(\"token\") }),\r\n    action: `${isProd ? \"\" : \"/proxy\"}/api/admin/upload/image`,\r\n    handleSuccessResponse: (res: CommonObj, upFile: CommonObj) => {\r\n      return new Promise((resolve, reject) => {\r\n        const { code, message, data } = res;\r\n        if (code === 2000) {\r\n          resolve(data.fullUrl);\r\n        } else {\r\n          reject(message);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  // regexp: {},\r\n} as BaseComponentsConfig;\r\nexport default config;\r\n","/********************************************************************/\r\n/*************************** 正则表单式配置 ***************************/\r\n\r\nimport config from \"@/config\";\r\nimport { getExportData } from \"@/components/_utils\";\r\n\r\n/********************************************************************/\r\nexport default getExportData(\r\n  {\r\n    onlyNum: /^[0-9.]+$/, //只匹配数字，至少一位，123或\"123\"均可\r\n    lowerChar: /[a-z]+/, //小写字母\r\n    //移动电话(中国，宽松)：只要是13,14,15,16,17,18,19开头即可\r\n    phone: /^(?:(?:\\+|00)86)?1[3-9]\\d{9}$/,\r\n    // 身份证号, 支持1/2代(15位/18位数字)\r\n    identity:\r\n      /^\\d{6}((((((19|20)\\d{2})(0[13-9]|1[012])(0[1-9]|[12]\\d|30))|(((19|20)\\d{2})(0[13578]|1[02])31)|((19|20)\\d{2})02(0[1-9]|1\\d|2[0-8])|((((19|20)([13579][26]|[2468][048]|0[48]))|(2000))0229))\\d{3})|((((\\d{2})(0[13-9]|1[012])(0[1-9]|[12]\\d|30))|((\\d{2})(0[13578]|1[02])31)|((\\d{2})02(0[1-9]|1\\d|2[0-8]))|(([13579][26]|[2468][048]|0[048])0229))\\d{2}))(\\d|X|x)$/,\r\n    // 身份证号(1代,15位数字)\r\n    identity_1: /^[1-9]\\d{7}(?:0\\d|10|11|12)(?:0[1-9]|[1-2][\\d]|30|31)\\d{3}$/,\r\n    // 身份证号(2代,18位数字),最后一位是校验位,可能为数字或字符X\r\n    identity_2: /^[1-9]\\d{5}(?:18|19|20)\\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\\d|30|31)\\d{3}[\\dXx]$/,\r\n    //邮箱\r\n    email:\r\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n    //密码： 6-16位字母和数字组合\r\n    password: /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,\r\n    //银行卡号\r\n    creditCard: /^[1-9]\\d{9,29}$/,\r\n  },\r\n  config.regexp\r\n);\r\n\r\n// 其他\r\n// this.phone.replace(/(\\d{3})\\d*(\\d{4})/, \"$1****$2\")  //隐藏电话号码的中间位置\r\n","/********************************************************************/\r\n/***************************** 系统常量 ******************************/\r\n/********************************************************************/\r\n\r\nimport { getExportData } from \"@/components/_utils\";\r\nimport { ReqMap, ResMap } from \"@/components/BaseCrud\";\r\nimport { ColSpanAttrs } from \"@/components/form\";\r\nimport config from \"@/config\";\r\n\r\nconst { table, form, homePath, widgetSize } = config;\r\n\r\nexport const defaultHomePath = getExportData(\"/\", homePath); //首页路径\r\n\r\nexport const defaultWidgetSize = getExportData(\"medium\", widgetSize); //控件大小\r\n\r\nexport const defaultIconName = \"ElemeFilled\"; //默认图标\r\n\r\nexport const defaultGroupBtnsMaxNum = getExportData(3, table?.defaultGroupBtnsMaxNum);\r\nexport const defaultFormItemType = getExportData(\"input\", form?.defaultFormItemType);\r\nexport const defaultReqMap: ReqMap = {\r\n  curr_page: \"curr_page\",\r\n  page_size: \"page_size\",\r\n};\r\nexport const defaultResMap: ResMap = {\r\n  curr_page: \"curr_page\",\r\n  page_size: \"page_size\",\r\n  total_num: \"total_num\",\r\n  has_more: \"has_more\",\r\n  records: \"records\",\r\n};\r\nexport const defaultColSpanAttrs: ColSpanAttrs = {\r\n  xs: 12,\r\n  sm: 12,\r\n  md: 8,\r\n  lg: 6,\r\n  xl: 4,\r\n};\r\nexport const popupCloseAnimationDuration = 300; // 弹出层dialog、drawer关闭时的动画持续时间，单位：毫秒\r\nexport const propsJoinChar = \",\"; //双props的连接符号\r\nexport const rangeJoinChar = \"~\"; //日期、数字范围区间的连接符号\r\nexport const emptyVals = [\"\", null, undefined]; //空值，凡遇此空值，则用“-”进行占位填充。看后期是否要考虑将 \"undefined\", \"null\" 这两个加入其中\r\nexport const emptyTime = getExportData(\"\", config?.form?.emptyTime, \"alert\"); //本应该为空的默认时间（当出现此值时，说明此时间应该为空）\r\n// export const isProd = import.meta.env.PROD; //是否是生产环境，此方式会有问题，故弃用\r\nexport const isProd = import.meta.env.MODE === \"prod\"; //是否是生产环境，因为import.meta.env.PROD在生产环境中不为true，所以暂时这样处理。本来应该是'production'，但是package.json中指定了 --mode prod\r\nexport const isDev = import.meta.env.MODE === \"dev\"; //是否是开发环境，本来应该是'development'，但是package.json中指定了 --mode dev\r\n","/********************************************************************/\r\n/**************** 系统级别的方法，可能因工程改变而改变 ****************/\r\n/********************************************************************/\r\n\r\nimport { typeOf } from \"@/components/_utils\";\r\nimport { FormFieldAttrs } from \"@/components/BaseFormItem\";\r\nimport { CommonObj, OptionItem, StrNum } from \"@/vite-env\";\r\nimport { emptyVals, emptyTime } from \"./consts\";\r\nimport dayjs from \"dayjs\";\r\nimport * as xlsx from \"xlsx\";\r\n\r\n/**\r\n * 导入excel中的数据\r\n * @param fileBuffer\r\n * @returns {unknown[]}\r\n */\r\nexport function importExcel(\r\n  fileBuffer: any,\r\n  opts = {\r\n    defval: \"\", //默认值配置\r\n  }\r\n): CommonObj[] {\r\n  const workbook = xlsx.read(fileBuffer, { type: \"buffer\" }); // 获取 workbook\r\n  const firstSheetName = workbook.SheetNames[0]; // 获取第一张表名\r\n  const firstSheet = workbook.Sheets[firstSheetName]; // 获取第一张表\r\n  return xlsx.utils.sheet_to_json(firstSheet, opts); // 获取数据\r\n}\r\n\r\n/**\r\n * 导出（下载）Excel数据表\r\n * @param data array 要下载的数据  例：[[\"A1\", \"B1\", \"C1\"], [\"A2\", \"B2\", \"C2\"],[\"A3\", \"B3\", \"C3\"]]   通常第一行是表头，可以单独拼接\r\n * @param {string} fileName 文件名称\r\n * @param {string} sheetName 表名称\r\n * @param {Function} callback 回调函数\r\n * @link 参考链接 https://www.jianshu.com/p/f9ba3dd3cd4f\r\n */\r\nexport function exportExcel(\r\n  data: string[][] = [],\r\n  fileName = dayjs().format(\"YYYYMMDD\"),\r\n  sheetName = \"表1\",\r\n  callback?: () => void\r\n) {\r\n  const wb = xlsx.utils.book_new(); // 创建workbook\r\n  // const ws = xlsx.utils.aoa_to_sheet(data); // 创建sheet\r\n  const ws = xlsx.utils.json_to_sheet(data, {\r\n    // header: [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\"],\r\n    skipHeader: true,\r\n  }); // 创建sheet\r\n  xlsx.utils.book_append_sheet(wb, ws, sheetName); // 把sheet放入workbook\r\n  xlsx.writeFile(wb, fileName + \".xls\"); // 写入文件(通过文件名控制导出的类型)\r\n  callback?.();\r\n}\r\n\r\n/**\r\n * 获取时间（几年/月/天/小时/分钟前）\r\n */\r\nexport function getTimeAgo(time: any) {\r\n  if (!time) return \"\";\r\n  time = dayjs().diff(time) / 1000;\r\n  let unit = \"\";\r\n  let num = 0;\r\n  const y = Math.floor(time / (60 * 60 * 24 * 365));\r\n  if (y > 0) {\r\n    unit = \"年\";\r\n    num = y;\r\n    return `${num}${unit}前`;\r\n  } else {\r\n    const M = Math.floor(time / (60 * 60 * 24 * 30));\r\n    if (M > 0) {\r\n      unit = \"月\";\r\n      num = M;\r\n      return `${num}${unit}前`;\r\n    } else {\r\n      const d = Math.floor(time / (60 * 60 * 24));\r\n      if (d > 0) {\r\n        unit = \"天\";\r\n        num = d;\r\n      } else {\r\n        const h = Math.floor(time / (60 * 60));\r\n        if (h > 0) {\r\n          unit = \"小时\";\r\n          num = h;\r\n        } else {\r\n          const m = Math.floor(time / 60);\r\n          if (m > 0) {\r\n            unit = \"分钟\";\r\n            num = m;\r\n          } else {\r\n            return \"刚刚\";\r\n          }\r\n        }\r\n      }\r\n      return `${num}${unit}前`;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 获取过去时间距离现在的文本字符\r\n * @param time 能被new Date()解析的时间格式\r\n * @return string  //刚刚  XX分钟前 XX小时前 XX天前\r\n */\r\nexport function getLastTimeStr(time: any) {\r\n  const lastTime = new Date(time).getTime();\r\n  const diffTime = (Date.now() - lastTime) / 1000;\r\n  if (diffTime < 0) {\r\n    console.error(\"传入时间不能大于当前时间值\");\r\n    return \"-\";\r\n  } else {\r\n    // const M = Math.trunc(diffTime / (30 * 24 * 60 * 60));\r\n    // if (M > 0) {\r\n    //   return `${M}月前`;\r\n    // } else {\r\n    const d = Math.trunc(diffTime / (24 * 60 * 60));\r\n    if (d > 0) {\r\n      return `${d}天前`;\r\n    } else {\r\n      const h = Math.trunc(diffTime / (60 * 60));\r\n      if (h > 0) {\r\n        return `${h}小时前`;\r\n      } else {\r\n        const m = Math.trunc(diffTime / 60);\r\n        return m > 0 ? `${m}分钟前` : \"刚刚\";\r\n      }\r\n    }\r\n    // }\r\n  }\r\n}\r\n\r\n/**\r\n * 处理平台默认值问题 Form echo data\r\n * @description 后端的数据库日期必须有一个默认值，回显的时候会显示这个默认值，因为数据量较多，改动较大，所以由前端统一处理\r\n */\r\nexport function handleFormInitData(field: FormFieldAttrs, modelValue?: CommonObj) {\r\n  if (!modelValue || emptyVals.includes(emptyTime)) return;\r\n  const { type, prop } = field;\r\n  const propType = typeOf(prop);\r\n  if (type?.includes(\"date\")) {\r\n    if (propType === \"String\") {\r\n      if (modelValue[prop as string] === emptyTime) {\r\n        modelValue[prop as string] = \"\";\r\n      }\r\n    } else if (propType === \"Array\") {\r\n      (prop as string[]).forEach((key: string) => {\r\n        if (modelValue[key] === emptyTime) {\r\n          modelValue[key] = \"\";\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 计算弹性布局时，末尾需要的空盒子个数\r\n * @param {number} total  总共多少个元素\r\n * @param {number} cols   多少列布局\r\n * @returns\r\n */\r\nexport function getEmptyNum(total: number, cols: number) {\r\n  return cols - (total % cols);\r\n}\r\n\r\n/**\r\n * 对象数组排序（默认order）\r\n * @param opts {}[] 要排序的数组\r\n * @param inds number[] 排序依据的对象属性键名\r\n */\r\nexport function getTextFromOpts(opts: OptionItem[] = [], inds: number[] = []) {\r\n  let text = \"\";\r\n  function cycle(opts: OptionItem[], ind: number = 0) {\r\n    const { label = \"\", children = [] } = opts?.[inds[ind]] || {};\r\n    text += label;\r\n    if (children?.length) {\r\n      cycle(children, ind + 1);\r\n    }\r\n  }\r\n  cycle(opts);\r\n  return text;\r\n}\r\n\r\n/**\r\n * 获取图片的http请求路径\r\n * @param path {string} 图片路径\r\n * @returns\r\n */\r\nexport const getImgUrl = (path: string) => {\r\n  return new URL(path, import.meta.url).href;\r\n};\r\n\r\n/**\r\n * 从树形数组中根据id获取菜单文本\r\n * @param tree {}[] 树形数据\r\n * @param {string | number} id  id\r\n * @param key 要获取的文本的键名\r\n * @param keyMap 键名映射\r\n */\r\nexport function getTextFromTreeByKey(\r\n  tree: CommonObj[] = [],\r\n  val: StrNum,\r\n  key: string,\r\n  keyMap: CommonObj = { id: \"id\", children: \"children\" }\r\n) {\r\n  if (!val) return \"\";\r\n  let text = \"\";\r\n  tree?.find(item => {\r\n    if (item[keyMap.id] == val) {\r\n      text = item[key];\r\n      return !!text;\r\n    } else {\r\n      text = getTextFromTreeByKey(item[keyMap.children], val, key);\r\n      return !!text;\r\n    }\r\n  });\r\n  return text;\r\n}\r\n\r\n/**\r\n * 根据值(非数组)从options获取label文本\r\n */\r\nexport function getLabelFromOptionsByLastValue(\r\n  options: CommonObj[],\r\n  val: StrNum,\r\n  propsMap: CommonObj = {\r\n    label: \"label\",\r\n    value: \"value\",\r\n    children: \"children\",\r\n  },\r\n  emptyChar = \"-\"\r\n) {\r\n  const { label: labelKey, value: valueKey, children: childrenKey } = propsMap;\r\n  let target: CommonObj | undefined;\r\n  function getLabel(opts: CommonObj[]): boolean {\r\n    return !!opts.find(item => {\r\n      const children = item[childrenKey];\r\n      const value = item[valueKey];\r\n      const isFind = value === val;\r\n      if (isFind) {\r\n        target = item;\r\n      } else {\r\n        if (children?.length) {\r\n          return getLabel(children);\r\n        }\r\n      }\r\n      return isFind;\r\n    });\r\n  }\r\n  getLabel(options);\r\n  return target?.[labelKey] ?? emptyChar;\r\n}\r\n\r\n/**\r\n * 根据值（数组）从options获取label文本\r\n */\r\nexport function getLabelFromOptionsByAllValues(\r\n  options: CommonObj[],\r\n  values: StrNum[],\r\n  propsMap: CommonObj = {\r\n    label: \"label\",\r\n    value: \"value\",\r\n    children: \"children\",\r\n  },\r\n  char = \"\"\r\n) {\r\n  const { label: labelKey, value: valueKey, children: childrenKey } = propsMap;\r\n  const labels: string[] = [];\r\n  function getLabel(opts: CommonObj[], level = 0) {\r\n    opts.find(item => {\r\n      const children = item[childrenKey];\r\n      const value = item[valueKey];\r\n      const label = item[labelKey];\r\n      const isFind = value === values[level];\r\n      if (isFind) {\r\n        labels.push(label);\r\n        if (children) {\r\n          getLabel(children, ++level);\r\n        }\r\n      }\r\n      return isFind;\r\n    });\r\n  }\r\n  getLabel(options);\r\n  return labels.join(char);\r\n}\r\n\r\n/**\r\n * 根据url地址下载文件\r\n * @param {string} url  下载地址\r\n * @param {string} name  文件名称\r\n */\r\nexport function downloadByUrl(url: string, name: string = dayjs().format(\"YYYY-MM-DD\")) {\r\n  const a = document.createElement(\"a\");\r\n  a.download = name;\r\n  a.href = url;\r\n  a.style.display = \"none\";\r\n  a.click();\r\n  a.remove();\r\n}\r\n\r\n/**\r\n * 根据 bufferData 下载文件\r\n * @param {string} buffer  Buffer数据\r\n * @param {string} name  文件名称\r\n */\r\nexport function downloadByBuffer(buffer, name?: string) {\r\n  const blob = new Blob([buffer], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n  const url = window.URL.createObjectURL(blob);\r\n  downloadByUrl(url, name);\r\n}\r\n\r\n/**\r\n * @description 获取浏览器默认语言\r\n * @returns {String}\r\n */\r\nexport function getBrowserLang() {\r\n  const lang = (navigator.language ?? navigator.browserLanguage).toLowerCase();\r\n  return [\"cn\", \"zh\", \"zh-cn\"].includes(lang) ? \"zh\" : \"en\";\r\n}\r\n","/********************************************************************/\r\n/*************** 为Base*.vue正常执行逻辑提供的常用的方法 ***************/\r\n/********************************************************************/\r\n\r\nimport { regexp, showMessage, toCamelCase } from \"@/components/_utils\";\r\nimport { merge } from \"lodash\";\r\nimport config, { ConfigMergeStrategy } from \"@/config\";\r\nimport { CommonObj, StrNum } from \"@/vite-env\";\r\nimport { BtnName } from \"@/components/BaseBtn\";\r\nimport { FormField, FormFieldAttrs } from \"@/components/BaseFormItem\";\r\nimport { propsJoinChar, emptyVals } from \"./consts\";\r\n\r\n/**\r\n * 检测元素所属类型\r\n * Object.prototype.toString.call(*)的可能结果如下所示：\r\n * @example null             [object Null]\r\n * @example undefined        [object Undefined]\r\n * @example Symbol());       [object Symbol]\r\n * @example true             [object Boolean]\r\n * @example ''               [object String]\r\n * @example 1                [object Number]\r\n * @example []               [object Array]\r\n * @example {}               [object Object]\r\n * @example new Date()       [object Date]\r\n * @example new Function()   [object Function]\r\n * @example new RegExp()     [object RegExp]\r\n * @example new Error()      [object Error]\r\n * @example document         [object HTMLDocument]\r\n * @example window           [object global] window 是全局对象 global 的引用\r\n * @param {*} ele 待检测的对象、字符串、数组等\r\n * @returns {String} 元素类型（string、number、boolean、symbol、undefined、null、function、date、array、object、regexp、error、htmldocument、global）\r\n */\r\nexport type TypeOfReturn =\r\n  | \"Null\"\r\n  | \"Undefined\"\r\n  | \"Symbol\"\r\n  | \"Boolean\"\r\n  | \"String\"\r\n  | \"Number\"\r\n  | \"Array\"\r\n  | \"Object\"\r\n  | \"Date\"\r\n  | \"Function\"\r\n  | \"RegExp\"\r\n  | \"Error\"\r\n  | \"HTMLDocument\"\r\n  | \"global\";\r\nexport const typeOf = (ele: any): TypeOfReturn => {\r\n  const endStr = Object.prototype.toString.call(ele);\r\n  const type = endStr.split(\" \")[1].slice(0, -1) as TypeOfReturn;\r\n  return type;\r\n};\r\n\r\n/**\r\n * 把css的值转换下，如果已经带有单位，则返回原值，如果没有带单位，则加上px\r\n * @param  val {string,number,undefined}  数值\r\n * @param  unit {string} 单位\r\n * @returns\r\n */\r\nexport const toCssVal = (val: number | string | undefined, unit = \"px\") => {\r\n  val = String(val);\r\n  const isOnlyNum = regexp.onlyNum.test(val);\r\n  return isOnlyNum ? val + unit : val;\r\n};\r\n\r\n/**\r\n * 获取css值的单位\r\n * @param  val {string} 数值\r\n * @returns {string}\r\n */\r\nexport const getCssValUnit = (val: string) => {\r\n  const res = val.match(regexp.lowerChar);\r\n  const unit = res ? res[0] : \"\";\r\n  return unit;\r\n};\r\n\r\n/**\r\n * 把css的值转换下，如果已经带有单位，则返回原值，如果没有带单位，则加上px\r\n * @param  val {string,number,undefined} 数值\r\n * @param  operator {string} 运算符号，可选值：+, -, *, /\r\n * @param  num {string}  操作数\r\n * @returns {string}\r\n */\r\nexport const calCssVal = (val: number | string | undefined, operator: string, num: number) => {\r\n  val = String(val);\r\n  const unit = getCssValUnit(val);\r\n  const newVal = parseFloat(val);\r\n  let end; //运算结果\r\n  switch (operator) {\r\n    case \"+\":\r\n      end = newVal + num;\r\n      break;\r\n    case \"-\":\r\n      end = newVal - num;\r\n      break;\r\n    case \"*\":\r\n      end = newVal * num;\r\n      break;\r\n    case \"/\":\r\n      end = newVal / num;\r\n      break;\r\n    default:\r\n      throw new Error(\"暂不支持此运算符进行运算：\" + operator);\r\n  }\r\n  return end + unit;\r\n};\r\n\r\n/**\r\n * 获取中文字符长度\r\n * @param 全角符算1个，半角符算0.5个字符\r\n */\r\nexport function getChinaCharLength(str?: string): number {\r\n  if (!str) return 0;\r\n  return str.replace(/[^\\x00-\\xff]/g, \"**\").length / 2;\r\n}\r\n\r\n/**\r\n * 获取字符串的字节长度（全角符算2个，半角符算1个字符）\r\n * @param str string 字符串\r\n */\r\nexport function getBytes(str = \"\") {\r\n  const len = str.length;\r\n  let bytes = len;\r\n  for (let i = 0; i < len; i++) {\r\n    if (str.charCodeAt(i) > 255) bytes++;\r\n  }\r\n  return bytes;\r\n}\r\n\r\n/**\r\n * 剔除对象值为指定类型的对象属性\r\n * @param obj 要剔除属性的对象\r\n * @param list 要剔除的属性数组\r\n */\r\nexport function omitAttrs(obj: CommonObj, list = emptyVals) {\r\n  const newObj: CommonObj = {};\r\n  for (const key in obj) {\r\n    const val = obj[key];\r\n    const type = typeOf(val);\r\n    if (type === \"Object\") {\r\n      newObj[key] = omitAttrs(val);\r\n      // if (!Object.keys(newObj[key]).length) {\r\n      //   newObj[key] = undefined;\r\n      // }\r\n    } else if (type === \"Array\") {\r\n      // 如果range类字段，每个值都为空字符串，则剔除掉这个属性\r\n      if (val.some((it: StrNum) => it !== \"\")) {\r\n        newObj[key] = val;\r\n      }\r\n      // newObj[key] = val.filter((it: any) => {\r\n      //   const t = typeOf(it);\r\n      //   if (t === \"Object\") {\r\n      //     return JSON.stringify(it) !== \"{}\";\r\n      //   } else if (t === \"Array\") {\r\n      //     return true;\r\n      //   } else {\r\n      //     return !list.includes(it);\r\n      //   }\r\n      // });\r\n    } else if (!list.includes(val)) {\r\n      newObj[key] = val;\r\n    }\r\n  }\r\n  return newObj;\r\n}\r\n\r\n/**\r\n * 剔除对象属性（不会改变原数组）\r\n * @param obj 要剔除属性的对象\r\n * @param keys 剔除的属性数组\r\n */\r\nexport function deleteAttrs(obj: CommonObj = {}, keys: string | string[]) {\r\n  const newObj = JSON.parse(JSON.stringify(obj));\r\n  if (!keys?.length) return newObj;\r\n  if (typeof keys === \"string\") return delete newObj[keys];\r\n  keys.forEach(key => delete newObj[key]);\r\n  return newObj;\r\n}\r\n\r\n/**\r\n * 将联合prop拆成两个字段\r\n * @param obj 要拆解的对象\r\n * @param isRange 是否是区间数组\r\n * @reture args 不会修改原对象\r\n */\r\nexport function splitPropsParams(args: CommonObj) {\r\n  const obj = JSON.parse(JSON.stringify(args));\r\n  const entrs = Object.keys(obj).filter(it => it.includes(propsJoinChar));\r\n  entrs.forEach((prop: string, ind: number) => {\r\n    if (!obj[prop]) return;\r\n    const type = typeOf(obj[prop]);\r\n    //区间数组 [min,max] = [最小值，最大值]\r\n    if (type === \"Array\") {\r\n      const [minProp, maxProp] = prop.split(propsJoinChar);\r\n      const [minVal, maxVal] = obj[prop];\r\n      obj[minProp] = minVal;\r\n      obj[maxProp] = maxVal;\r\n    } else if (type === \"Object\") {\r\n      //表单字段中无prop，但是有children属性\r\n      const keys = prop.split(propsJoinChar);\r\n      keys.forEach((key: string) => {\r\n        obj[key] = obj[prop][key];\r\n      });\r\n    } else {\r\n      throw new Error(`暂未处理type为${type}的类型`);\r\n    }\r\n    delete obj[prop];\r\n  });\r\n  return obj;\r\n}\r\n\r\n/**\r\n * 根据路由信息生成组件名称\r\n * @param route object 路由信息\r\n * @returns name string 组件名称\r\n */\r\nexport function getCompNameByRoute(route: CommonObj): string {\r\n  const { path, meta, query, name, matched } = route;\r\n  const { tagIdKey = \"id\" } = meta;\r\n  const defName = matched.at(-1)?.components?.default.name;\r\n  let compName = defName ?? toCamelCase(path, true);\r\n  if (query[tagIdKey]) {\r\n    compName += \"Of\" + query[tagIdKey];\r\n  }\r\n  return compName;\r\n}\r\n\r\n/**\r\n * 处理暴露的数据对象\r\n *@param sysData object 系统数据\r\n *@param customData object 自定义数据\r\n */\r\nexport function getExportData(\r\n  sysData: any,\r\n  customData?: any,\r\n  mergeType: ConfigMergeStrategy = config?.mergeStrategy ?? \"assign\"\r\n) {\r\n  if ([null, undefined].includes(customData)) return sysData;\r\n  if (!mergeType) return customData;\r\n  const isBaseData = [\"string\", \"number\", \"boolean\"].includes(typeof sysData); //如果是基础数据类型\r\n  if (isBaseData) mergeType = \"alert\";\r\n  if (mergeType === \"merge\") return merge(sysData, customData);\r\n  if (mergeType === \"assign\") return Object.assign(sysData, customData);\r\n  if (mergeType === \"alert\") return customData ?? sysData;\r\n  if (mergeType === \"auto\") return sysData;\r\n  throw new Error(`暂不支持${mergeType}合并策略`);\r\n}\r\n\r\n/**\r\n * 判断两个元素是否一致（是否修改过）\r\n * @tips 是否已经修改过\r\n */\r\nexport function getIsUpdated(e_1: any, e_2: any) {\r\n  const t1 = typeOf(e_1);\r\n  const t2 = typeOf(e_2);\r\n  if (t1 !== t2) return true;\r\n  if (t1 === \"Array\") {\r\n    if (e_1.length !== e_2.length) return true;\r\n    const updated = !!e_1.find((it: any, i: number) => getIsUpdated(e_1[i], e_2[i]));\r\n    if (updated) return true;\r\n  } else if (t1 === \"Object\") {\r\n    if (Object.keys(e_1).length !== Object.keys(e_2).length) return true;\r\n    for (const key in e_1) {\r\n      const updated = getIsUpdated(e_1[key], e_2[key]);\r\n      if (updated) return true;\r\n    }\r\n  } else {\r\n    if (e_1 !== e_2) return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * 处理分组（操作）按钮（表格中操作列的按钮）\r\n * @param map 事件方法映射\r\n * @param name 触发的按钮名称\r\n */\r\nexport function handleBtnNext(map: CommonObj, name: BtnName) {\r\n  map[name] ? map[name]() : showMessage(`点击了${name}按钮`, \"info\");\r\n}\r\n\r\n/**\r\n * 对象数组排序（默认order）\r\n * @param arr {}[] 要排序的数组\r\n * @param key string 排序依据的对象属性键名\r\n * @param type string 排序方式 asc 升序 desc 降序\r\n */\r\nexport function sortObjArrByKey(arr: CommonObj[] = [], key = \"order\", type = \"asc\"): CommonObj[] {\r\n  arr.sort((a: CommonObj, b: CommonObj) => {\r\n    if (type === \"asc\") {\r\n      return a[key] - b[key];\r\n    } else if (type === \"desc\") {\r\n      return b[key] - a[key];\r\n    } else if (type === \"random\") {\r\n      return Math.random() - 0.5;\r\n    }\r\n  });\r\n  return arr;\r\n}\r\n\r\n/**\r\n * 复制文本\r\n * @param text 要复制到剪切板的内容\r\n */\r\nexport function copyText(text = \"\") {\r\n  const input = document.createElement(\"input\");\r\n  input.setAttribute(\"value\", text);\r\n  document.body.appendChild(input);\r\n  input.select();\r\n  const copyText = document.execCommand(\"copy\");\r\n  if (copyText) {\r\n    showMessage(\"复制成功！\");\r\n  }\r\n  document.body.removeChild(input);\r\n}\r\n\r\n/**\r\n * 文本是否已超出（出现了省略号）\r\n */\r\nexport function getIsOver(target: any) {\r\n  if (!target) return false;\r\n  const { scrollHeight, clientHeight } = target;\r\n  return scrollHeight > clientHeight;\r\n}\r\n\r\n/**\r\n * 是否是数组元素的删除\r\n */\r\n// export function isArrDel(fObj: CommonObj, tObj: CommonObj) {\r\n//   for (const key in fObj) {\r\n//     const type = typeOf(fObj[key]);\r\n//     if (type === \"Array\") {\r\n//       const isDel = fObj[key].length > tObj[key]?.length;\r\n//       if (isDel) return true;\r\n//     } else if (type === \"Object\") {\r\n//       const isDel = isArrDel(fObj[key], tObj[key]);\r\n//       if (isDel) return true;\r\n//     }\r\n//   }\r\n//   return false;\r\n// }\r\n","/********************************************************************/\r\n/************** 为临时放置的后续可能会移到其他文件下的方法 *************/\r\n/********************************************************************/\r\n\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\n/**\r\n * 获取时间阶段\r\n */\r\nexport function getTimePeriodAlias() {\r\n  const hours = new Date().getHours();\r\n  let alias = \"\";\r\n  if (hours < 1) {\r\n    alias = \"凌晨\";\r\n  } else if (hours < 8) {\r\n    alias = \"清晨\";\r\n  } else if (hours < 11) {\r\n    alias = \"上午\";\r\n  } else if (hours < 13) {\r\n    alias = \"中午\";\r\n  } else if (hours < 18) {\r\n    alias = \"下午\";\r\n  } else if (hours < 20) {\r\n    alias = \"傍晚\";\r\n  } else if (hours < 23) {\r\n    alias = \"晚上\";\r\n  } else {\r\n    alias = \"深夜\";\r\n  }\r\n  return alias;\r\n}\r\n\r\n/**\r\n * 计算百分比\r\n */\r\nexport function getPercentage(num: number, total: number, fixedNum = 2) {\r\n  if (!total) return Number(0).toFixed(fixedNum);\r\n  return ((num / total) * 100).toFixed(fixedNum);\r\n}\r\n\r\n/**\r\n * 获取带错别字，敏感词标识的html字符串\r\n * @param str\r\n * @param wrongWords string[] 错别字数组\r\n * @param sensWords string[]  敏感词数组\r\n * @param wrongStyle string 错别字样式\r\n * @param sensStyle string  敏感词样式\r\n * @example getTagHtmlStr(\"我们的假象，在希望的田野上，热爱我们的祖国！\",['假象'],['我', '的'])\r\n */\r\nexport function getTagHtmlStr(\r\n  str = \"\",\r\n  wrongWords: string[] = [],\r\n  sensWords: string[] = [],\r\n  wrongStyle = \"color: red;\",\r\n  sensStyle = \"color: darkorange;\"\r\n) {\r\n  // wrongGroups=['假象->家乡']\r\n  // const wrongWords = wrongGroups.map(it=>it.split(\"->\")[0])\r\n  const wrongStr = wrongWords.join(\"|\");\r\n  const sensStr = sensWords.join(\"|\");\r\n  const wordStr = [wrongStr, sensStr]\r\n    .filter(it => it !== \"\")\r\n    .map(item => (item ? `(${item})` : item))\r\n    .join(\"|\");\r\n  if (str && wordStr) {\r\n    const reg = new RegExp(wordStr, \"g\");\r\n    str = str.replace(reg, (matchStr: string, chars: string, index: number) => {\r\n      const isWrong = wrongWords.includes(matchStr);\r\n      return `<span style=\"${isWrong ? wrongStyle : sensStyle}\">${matchStr}</span>`;\r\n    });\r\n  }\r\n  return str;\r\n}\r\n\r\n/**\r\n * 获取 css 变量的值\r\n * @tips 暂时没用上\r\n */\r\n// export function getCssVarVal(name: string = \"--color-primary\") {\r\n//   const val = getComputedStyle(document.documentElement).getPropertyValue(name); // 获取计算后的样式\r\n//   if (!val) {\r\n//     throw new Error(`不存在此CSS变量：${name}`);\r\n//   }\r\n//   return val;\r\n// }\r\n\r\n/**\r\n * 监测本地文件是否更改\r\n * @link 参考：https://geek-docs.com/html/html-ask-answer/256_html_check_if_file_has_changed_using_html5_file_api.html\r\n */\r\nexport function checkFileChanged(e: any) {\r\n  const { lastModifiedDate: lastModified } = e.target.files[0];\r\n  const isChanged = localStorage.getItem(\"lastModified\") !== lastModified.toString();\r\n  if (isChanged) {\r\n    localStorage.setItem(\"lastModified\", lastModified);\r\n  }\r\n  return isChanged;\r\n}\r\n\r\n/**\r\n * 将浏览器路径参数转为对象\r\n * @param searchStr string 要转化的字符串\r\n * @notice urlSearchToParams(`http://127.0.0.1:5174/test/10/3?id=3&age=&sex=&isAgree=true`)\r\n * 解析有误=> {http://127.0.0.1:5174/test/10/3?id: '3', age: '', sex: '', isAgree: 'true'}\r\n * 故暂时弃用\r\n */\r\n// export function urlSearchToParams(searchStr = location.search.slice(1)) {\r\n//   return Object.fromEntries(new URLSearchParams(searchStr));\r\n// }\r\n\r\n/**\r\n * 将浏览器路径参数转为对象\r\n * @param searchStr string 要转化的字符串\r\n */\r\nexport function urlSearchToParams(path: string, noHandleKeys?: string[]) {\r\n  if (!path) return \"\";\r\n  const str = path.split(\"?\")[1];\r\n  const obj: CommonObj = {};\r\n  str.split(\"&\").forEach((item: string) => {\r\n    let [key, val] = item.split(\"=\");\r\n    if (!noHandleKeys?.includes(key) && val !== \"\") {\r\n      const num = Number(val);\r\n      if (!isNaN(num)) {\r\n        val = num as any;\r\n      } else {\r\n        if (val === \"true\") {\r\n          val = true as any;\r\n        } else if (val === \"false\") {\r\n          val = false as any;\r\n        }\r\n      }\r\n    }\r\n    obj[key] = val;\r\n  });\r\n  return obj;\r\n}\r\n\r\n/**\r\n * 将浏览器路径对象转为参数\r\n * @param params CommonObj 要转化的参数\r\n */\r\nexport function urlParamsToSearch(params?: CommonObj) {\r\n  if (!params) return \"\";\r\n  let str: string = \"\";\r\n  for (const key in params) {\r\n    const val = params[key] ?? \"\";\r\n    if (typeof val === \"object\") throw new Error(\"路由参数中不允许传入非基本数据类型的值\");\r\n    str += `&${key}=${val}`;\r\n  }\r\n  return str.slice(1);\r\n}\r\n\r\n/**\r\n * 获取html文本\r\n * @param title 要高亮的文本\r\n * @param words 关键词\r\n * @returns html字符串\r\n */\r\nexport const getHtmlStr = (str: string, words: string) => {\r\n  // 关键词高亮处理\r\n  // const index = str.indexOf(words);\r\n  // const beforeStr = str.substring(0, index);\r\n  // const afterStr = str.slice(index + words.length);\r\n  // if (index > -1) return `<span>${beforeStr}<span style=\"color:red\">${words}</span>${afterStr}</span>`;\r\n  // return `<span>${str}</span>`;\r\n  // react tsx 写法\r\n  // return index > -1 ? (\r\n  //   <span>\r\n  //     {beforeStr}\r\n  //     <span style={{ color: \"red\" }}>{words}</span>\r\n  //     {afterStr}\r\n  //   </span>\r\n  // ) : (\r\n  //   <span>{str}</span>\r\n  // );\r\n};\r\n\r\n/**\r\n * 根据关键词模糊过滤树节点\r\n * @param val 模糊搜索的关键词\r\n * @param tree 树数据\r\n * @param newArr 缓存的节点树\r\n * @returns 返回一个新的树，不改变原数组\r\n */\r\nexport const filterTreeByKeywords = (val: string, tree: CommonObj[], newArr: CommonObj[] = []): CommonObj[] => {\r\n  if (!(tree.length && val)) return tree;\r\n  tree.forEach(item => {\r\n    const { title, children } = item;\r\n    if (title.includes(val)) {\r\n      item.title = getHtmlStr(title, val);\r\n      if (children?.length) {\r\n        item.children = filterTreeByKeywords(val, children);\r\n      }\r\n      return newArr.push(item);\r\n    }\r\n    if (!children?.length) return item;\r\n    const subArr = filterTreeByKeywords(val, children);\r\n    if (subArr?.length) {\r\n      item.title = getHtmlStr(title, val);\r\n      newArr.push({ ...item, children: subArr });\r\n    }\r\n    return item;\r\n  });\r\n  return newArr;\r\n};\r\n\r\n/**\r\n * 给数字每隔 3 位就增加一个逗号\r\n * @param num 要转化的数字\r\n * @returns\r\n */\r\nexport const addCommasToNumber = (num: string | number) => num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { typeOf } from \"#/mock/utils\";\r\nimport { CSSProperties, useMemo } from \"react\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  valClass?: string;\r\n  style?: CSSProperties;\r\n  labelStyle?: CSSProperties;\r\n  colon?: boolean;\r\n  label?: any; //可以自定义图标等\r\n  value?: any; //可以自定义图标等\r\n  lineNum?: number; //多少行\r\n  children?: any;\r\n}\r\nfunction getText(children: any, value: any) {\r\n  let text = children || value;\r\n  if ([\"\", undefined].includes(text)) {\r\n    text = \"-\";\r\n  } else if (typeOf(text) === \"Boolean\") {\r\n    text = String(text);\r\n  }\r\n  return text;\r\n}\r\nexport default ({\r\n  className = \"\",\r\n  style,\r\n  labelStyle,\r\n  colon = true,\r\n  label = \"label\",\r\n  value,\r\n  lineNum = 0,\r\n  valClass = \"\",\r\n  children,\r\n}: Props) => {\r\n  const valText = getText(children, value);\r\n  return (\r\n    <div style={style} className={`${className} ${s[\"base-key-val\"]} f-fs-fs`}>\r\n      <div\r\n        style={labelStyle}\r\n        className={`${s.key} ${colon ? s.colon : \"\"} f-0`}\r\n      >\r\n        {label}\r\n      </div>\r\n      <div\r\n        className={`${s.val} ${colon ? s.colon : \"\"} ${\r\n          valClass ? s[valClass] : \"\"\r\n        } ${s[`line-${lineNum}`]} f-1`}\r\n      >\r\n        {valText}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { CSSProperties, ReactNode, useState } from \"react\";\r\nimport { Button, Form, Space } from \"antd\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { PlusCircleOutlined, MinusCircleOutlined } from \"@ant-design/icons\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  formItems?: ReactNode[];\r\n  [key: string]: any;\r\n}\r\nexport default ({ className = \"\", formItems = [], children, ...restProps }: Props) => {\r\n  const [list, setList] = useState<CommonObj[]>([{}]);\r\n  function handleClick(ind: number, isAdd: boolean) {\r\n    if (isAdd) {\r\n      setList([...list, {}]);\r\n    } else {\r\n      list.splice(ind, 1);\r\n      setList([...list]);\r\n    }\r\n  }\r\n  return list.map((item: CommonObj, ind: number) => {\r\n    const isAdd = ind === list.length - 1;\r\n    return (\r\n      <Form.Item className={`${className}`} {...restProps} key={ind} noStyle>\r\n        <Space.Compact>{formItems}</Space.Compact>\r\n        <Button\r\n          className=\"ml-h\"\r\n          icon={isAdd ? <PlusCircleOutlined /> : <MinusCircleOutlined />}\r\n          type={isAdd ? \"primary\" : undefined}\r\n          danger={!isAdd}\r\n          onClick={() => handleClick(ind, isAdd)}\r\n          shape=\"circle\"\r\n        />\r\n      </Form.Item>\r\n    );\r\n  });\r\n};\r\n","import { CommonObj } from \"@/vite-env\";\r\nimport { Form, InputNumber } from \"antd\";\r\nimport { showMessage } from \"./_utils\";\r\n\r\nexport interface Props {\r\n  //下面四个是默认会自动传入的属性\r\n  id?: string; //以数组形式回传值\r\n  value?: string;\r\n  onBlur?: () => void;\r\n  onChange?: () => void;\r\n  //两个控件的name数组值，以对象的两个属性回传值\r\n  names?: [string, string];\r\n  //这是手动传入的表单控件的属性\r\n  attrs?: {\r\n    min?: number;\r\n    max?: number;\r\n    [key: string]: any;\r\n  };\r\n}\r\nconst defaultAttrs = {\r\n  min: 0,\r\n  style: { width: \"100%\" },\r\n};\r\n\r\nconst formItemStyle = {\r\n  className: \"f-1 mb-0\",\r\n  style: { display: \"inline-block\", width: \"calc(50% - 11px)\" },\r\n};\r\n\r\nexport default ({ id = \"\", names, attrs, ...restProps }: Props) => {\r\n  const newAttrs = Object.assign({}, defaultAttrs, attrs);\r\n  let [minName, maxName] = names || [\r\n    [id, 0],\r\n    [id, 1],\r\n  ];\r\n  const rules = [\r\n    ({ getFieldValue }: CommonObj) => ({\r\n      validator(obj: CommonObj, value: number) {\r\n        const minVal = getFieldValue(minName);\r\n        const maxVal = getFieldValue(maxName);\r\n        if (minVal === undefined || maxVal === undefined) {\r\n          return Promise.resolve();\r\n        } else {\r\n          if (minVal > maxVal) {\r\n            showMessage(\"最小值不能超过最大值\", \"error\");\r\n            return Promise.reject();\r\n          } else {\r\n            return Promise.resolve();\r\n          }\r\n        }\r\n      },\r\n    }),\r\n  ];\r\n  return (\r\n    <Form.Item noStyle {...restProps}>\r\n      <Form.Item name={minName} {...formItemStyle} rules={rules}>\r\n        <InputNumber placeholder=\"最小值\" {...newAttrs} />\r\n      </Form.Item>\r\n      <span className=\"f-0 ml-8 mr-8\" style={{ lineHeight: \"30px\" }}>\r\n        -\r\n      </span>\r\n      <Form.Item name={maxName} {...formItemStyle} rules={rules}>\r\n        <InputNumber placeholder=\"最大值\" {...newAttrs} />\r\n      </Form.Item>\r\n    </Form.Item>\r\n  );\r\n};\r\n","import React, { CSSProperties, useState } from \"react\";\r\nimport { LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport { Image, message, Upload } from \"antd\";\r\nimport type { UploadChangeParam } from \"antd/es/upload\";\r\nimport type { RcFile, UploadFile, UploadProps } from \"antd/es/upload/interface\";\r\nimport { showMessage } from \"../_utils\";\r\nimport { upperCase } from \"lodash\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  value?: string;\r\n  accept?: string;\r\n  maxSize?: number; //允许上传的最大尺寸\r\n  onChange?: UploadProps[\"onChange\"];\r\n  [key: string]: any;\r\n}\r\nconst getBase64 = (img: RcFile, callback: (url: string) => void) => {\r\n  const reader = new FileReader();\r\n  reader.addEventListener(\"load\", () => callback(reader.result as string));\r\n  reader.readAsDataURL(img);\r\n};\r\n\r\nconst defaultUploadAttrs = {\r\n  name: \"avatar\",\r\n  accept: \"image/png,image/jpeg,image/jpg\",\r\n  listType: \"picture-circle\",\r\n  showUploadList: false,\r\n};\r\n// 获取大小及其单位\r\nfunction getSizeUnit(size: number) {\r\n  const kb = size / 1024;\r\n  if (kb < 1024) return kb + \"KB\";\r\n  const mb = kb / 1024;\r\n  return mb + \"MB\";\r\n}\r\nexport default ({ className = \"\", maxSize = 1024 * 1024 * 2, value, ...restProps }: Props) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [imgUrl, setImgUrl] = useState<string | undefined>(value);\r\n  const newAttrs = Object.assign({}, defaultUploadAttrs, restProps);\r\n\r\n  const beforeUpload = (file: RcFile) => {\r\n    const { type, size } = file;\r\n    const types = newAttrs.accept.split(\",\");\r\n    const isAccept = types.includes(type);\r\n    const typeStr = types.map((it: string) => upperCase(it.split(\"/\")[1])).join(\"/\");\r\n    if (!isAccept) {\r\n      showMessage(`只支持上传 ${typeStr} 图片格式!`, \"error\");\r\n      return false;\r\n    }\r\n    const isLt2M = size <= maxSize;\r\n    if (!isLt2M) {\r\n      showMessage(`图片大小不能超过 ${getSizeUnit(maxSize)}!`, \"error\");\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleChange: UploadProps[\"onChange\"] = (info: UploadChangeParam<UploadFile>) => {\r\n    if (info.file.status === \"uploading\") {\r\n      setLoading(true);\r\n      return;\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      getBase64(info.file.originFileObj as RcFile, (url: string) => {\r\n        setLoading(false);\r\n        setImgUrl(url);\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Upload\r\n      className={`${className}`}\r\n      action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n      beforeUpload={beforeUpload}\r\n      onChange={handleChange}\r\n      {...newAttrs}\r\n    >\r\n      {imgUrl ? (\r\n        <img src={imgUrl} alt=\"avatar\" style={{ width: \"100%\", borderRadius: \"50%\" }} />\r\n      ) : (\r\n        <div>\r\n          {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n          <div style={{ marginTop: 8 }}>上传头像</div>\r\n        </div>\r\n      )}\r\n    </Upload>\r\n  );\r\n};\r\n","import { ReactNode } from \"react\";\r\nimport { regexp } from \"../_utils\";\r\nimport dayjs from \"dayjs\";\r\nimport {\r\n  Cascader,\r\n  Checkbox,\r\n  DatePicker,\r\n  Input,\r\n  AutoComplete,\r\n  InputNumber,\r\n  Radio,\r\n  Rate,\r\n  Select,\r\n  Slider,\r\n  Switch,\r\n  TimePicker,\r\n  TimePickerProps,\r\n  TimeRangePickerProps,\r\n  Space,\r\n  ColorPicker,\r\n} from \"antd\";\r\nimport {\r\n  CheckboxGroupAttrs,\r\n  ChildrenStyle,\r\n  DateRangePickerAttrs,\r\n  FormField,\r\n  FormFieldAttrs,\r\n  RadioGroupAttrs,\r\n  StandFieldAttrs,\r\n  DefaultFieldAttrs,\r\n  StandardFormFieldAttrs,\r\n} from \"./_types\";\r\nimport AddDelList from \"./_components/AddDelList\";\r\nimport BaseNumberRange from \"../BaseNumberRange\";\r\nimport { Props as BaseNumberRangeAttrs } from \"@/components/BaseNumberRange\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport BaseFormItem from \".\";\r\nimport UploadAvatar from \"../upload/UploadAvatar\";\r\n\r\nconst datePresets: TimePickerProps[\"presets\"] = [\r\n  { label: \"昨天\", value: dayjs().add(-1, \"d\") },\r\n  { label: \"上周\", value: dayjs().add(-7, \"d\") },\r\n  { label: \"上月\", value: dayjs().add(-1, \"month\") },\r\n];\r\n\r\nconst dateRangePresets: TimeRangePickerProps[\"presets\"] = [\r\n  { label: \"近7天\", value: [dayjs().add(-7, \"d\"), dayjs()] },\r\n  { label: \"近14天\", value: [dayjs().add(-14, \"d\"), dayjs()] },\r\n  { label: \"近30天\", value: [dayjs().add(-30, \"d\"), dayjs()] },\r\n  { label: \"近90天\", value: [dayjs().add(-90, \"d\"), dayjs()] },\r\n];\r\n\r\nexport const fieldMap: { [key: string]: (...args: any) => ReactNode } = {\r\n  Input: (attrs: StandFieldAttrs) => <Input {...attrs} />,\r\n  Password: (attrs: StandFieldAttrs) => <Input.Password {...attrs} />,\r\n  TextArea: (attrs: StandFieldAttrs) => <Input.TextArea {...attrs} />,\r\n  Search: (attrs: StandFieldAttrs) => <Input.Search {...attrs} />,\r\n  InputNumber: (attrs: StandFieldAttrs) => <InputNumber {...attrs} />,\r\n  AutoComplete: (attrs: StandFieldAttrs) => <AutoComplete {...attrs} />,\r\n  Select: (attrs: StandFieldAttrs) => <Select {...attrs} />,\r\n  RadioGroup: (attrs: RadioGroupAttrs) => <Radio.Group {...attrs} />,\r\n  Rate: (attrs: StandFieldAttrs) => <Rate {...attrs} />,\r\n  TimePicker: (attrs: StandFieldAttrs) => <TimePicker {...attrs} />,\r\n  TimeRangePicker: (attrs: TimeRangePickerProps) => <TimePicker.RangePicker {...attrs} />,\r\n  DatePicker: (attrs: StandFieldAttrs) => <DatePicker {...attrs} />,\r\n  ColorPicker: (attrs: StandFieldAttrs) => <ColorPicker {...attrs} />,\r\n  DateRangePicker: (attrs: DateRangePickerAttrs) => <DatePicker.RangePicker {...attrs} />,\r\n  Slider: (attrs: StandFieldAttrs) => <Slider {...attrs} />,\r\n  Cascader: (attrs: StandFieldAttrs) => <Cascader {...attrs} />,\r\n  Switch: (attrs: StandFieldAttrs) => <Switch {...attrs} />,\r\n  Checkbox: (attrs: StandFieldAttrs) => <Checkbox {...attrs} />,\r\n  CheckboxGroup: (attrs: CheckboxGroupAttrs) => <Checkbox.Group {...attrs} />,\r\n  BaseNumberRange: (attrs: BaseNumberRangeAttrs) => <BaseNumberRange {...attrs} />,\r\n  UploadAvatar: (attrs: CommonObj) => <UploadAvatar {...attrs} />,\r\n  Custom: (attrs: StandFieldAttrs, render: (attrs: StandFieldAttrs) => ReactNode) => render?.(attrs as StandFieldAttrs),\r\n  Children: (field: FormFieldAttrs, childrenStyle: ChildrenStyle) => {\r\n    const { children } = field;\r\n    const formItems = children?.map((item: FormField, ind: number) => {\r\n      if (!item) return null;\r\n      return <BaseFormItem field={item as FormFieldAttrs} isChild key={ind} />;\r\n    });\r\n    if (childrenStyle === \"compact\") return <Space.Compact>{formItems}</Space.Compact>;\r\n    if (childrenStyle === \"addDel\") return <AddDelList formItems={formItems} />;\r\n    return formItems;\r\n  },\r\n};\r\n\r\n//覆盖重写el-form-item 的默认属性值\r\nexport const defaultFieldAttrs: DefaultFieldAttrs = {\r\n  Input: {\r\n    attrs: {\r\n      placeholder: \"请输入{label}\",\r\n      // maxLength: 30,\r\n      allowClear: true,\r\n      getAttrs(field: FormFieldAttrs) {\r\n        const { attrs } = field;\r\n        if (attrs) attrs.showCount = !!attrs.maxLength;\r\n        return attrs;\r\n      },\r\n    },\r\n  },\r\n  Select: {\r\n    attrs: {\r\n      // style: { width: \"100%\" },\r\n      placeholder: \"请选择{label}\",\r\n      allowClear: true,\r\n      // options: [],\r\n    },\r\n  },\r\n  DateRangePicker: {\r\n    attrs: {\r\n      // style: { width: \"100%\" },\r\n      // mode: \"date\", //time, date, month, year, decade\r\n      format: \"YYYY-MM-DD\", //用于设置展示和传值的效果值，\r\n      placeholder: [\"开始日期\", \"结束日期\"],\r\n      allowClear: true,\r\n      presets: dateRangePresets,\r\n    },\r\n  },\r\n  DatePicker: {\r\n    attrs: {\r\n      // style: { width: \"100%\" },\r\n      // mode: \"date\", //time, date, month, year, decade\r\n      format: \"YYYY-MM-DD\", //用于设置展示和传值的效果值，\r\n      placeholder: \"请选择{label}\",\r\n      allowClear: true,\r\n      presets: datePresets,\r\n    },\r\n  },\r\n  Switch: {\r\n    valuePropName: \"checked\", //必须设置，不然会触发警告\r\n    attrs: {\r\n      checkedChildren: \"启用\",\r\n      unCheckedChildren: \"禁用\",\r\n    },\r\n  },\r\n  Checkbox: {\r\n    valuePropName: \"checked\", //必须设置，不然会触发警告\r\n    attrs: {},\r\n  },\r\n  RadioGroup: {\r\n    attrs: {\r\n      optionType: \"button\",\r\n      buttonStyle: \"solid\",\r\n      // options: [{ label: \"单选项1\" }],\r\n    },\r\n  },\r\n  CheckboxGroup: {\r\n    attrs: {\r\n      // options: [{ label: \"多选项1\" }],\r\n    },\r\n  },\r\n  InputNumber: {\r\n    attrs: {\r\n      // style: { width: \"100%\" },\r\n      placeholder: \"{label}\",\r\n    },\r\n  },\r\n  TextArea: {\r\n    attrs: {\r\n      placeholder: \"请输入{label}\",\r\n      maxLength: 100,\r\n      allowClear: true,\r\n      // showCount: true,\r\n      getAttrs(field: FormFieldAttrs) {\r\n        const { attrs } = field;\r\n        if (attrs) attrs.showCount = !!attrs.maxLength;\r\n        return attrs;\r\n      },\r\n    },\r\n  },\r\n  Password: {\r\n    attrs: {\r\n      placeholder: \"请输入{label}\",\r\n      // maxLength: 30,\r\n      allowClear: true,\r\n      // iconRender: (visible: boolean) => {\r\n      //   return visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />;\r\n      // },\r\n      // showCount: true,\r\n      getAttrs(field: FormFieldAttrs) {\r\n        const { attrs } = field;\r\n        if (attrs) attrs.showCount = !!attrs.maxLength;\r\n        return attrs;\r\n      },\r\n    },\r\n  },\r\n  AutoComplete: {\r\n    attrs: {\r\n      placeholder: \"请输入{label}\",\r\n      // maxLength: 30,\r\n      allowClear: true,\r\n    },\r\n  },\r\n  Cascader: {\r\n    attrs: {\r\n      // style: { width: \"100%\" },\r\n      placeholder: \"请选择{label}\",\r\n      allowClear: true,\r\n      // options: [],\r\n    },\r\n  },\r\n  Search: {\r\n    attrs: {\r\n      placeholder: \"请输入{label}\",\r\n      // maxLength: 30,\r\n      allowClear: true,\r\n      // showCount: true,\r\n      getAttrs(field: FormFieldAttrs) {\r\n        const { attrs } = field;\r\n        if (attrs) attrs.showCount = !!attrs.maxLength;\r\n        return attrs;\r\n      },\r\n    },\r\n  },\r\n  Slider: {\r\n    attrs: {\r\n      style: { width: \"calc(100% - 20px)\" },\r\n    },\r\n  },\r\n  TimePicker: {\r\n    attrs: {\r\n      // style: { width: \"100%\" },\r\n      format: \"HH:mm:ss\",\r\n      placeholder: \"请选择{label}\",\r\n      allowClear: true,\r\n    },\r\n  },\r\n  TimeRangePicker: {\r\n    attrs: {\r\n      // style: { width: \"100%\" },\r\n      format: \"HH:mm:ss\",\r\n      placeholder: [\"开始时间\", \"结束时间\"],\r\n      allowClear: true,\r\n    },\r\n  },\r\n  Rate: {\r\n    attrs: {},\r\n  },\r\n  Custom: {\r\n    attrs: {},\r\n  },\r\n};\r\n// 默认的校验类型\r\nexport const defaultValidTypes: CommonObj = {\r\n  // 手机号\r\n  phone: {\r\n    rules: [\r\n      {\r\n        pattern: regexp.phone,\r\n        message: \"请输入正确的11位电话号码\",\r\n      },\r\n    ],\r\n    attrs: {\r\n      maxLength: 11,\r\n    },\r\n  },\r\n  // 密码\r\n  password: {\r\n    rules: [\r\n      {\r\n        min: 6,\r\n        message: \"密码长度不能小于6位\",\r\n      },\r\n      {\r\n        pattern: regexp.password,\r\n        message: \"请输入正确的6~16位字母 + 数字组合密码\",\r\n      },\r\n    ],\r\n    attrs: {\r\n      type: \"password\",\r\n      maxLength: 16,\r\n    },\r\n  },\r\n  // 用户姓名\r\n  userName: {\r\n    rules: [\r\n      {\r\n        min: 2,\r\n        message: \"不能少于一个字符\",\r\n      },\r\n    ],\r\n    attrs: {\r\n      maxLength: 5,\r\n    },\r\n  },\r\n  // 身高\r\n  height: {\r\n    type: \"InputNumber\",\r\n    attrs: {\r\n      min: 0,\r\n      max: 200,\r\n      addonAfter: \"cm\",\r\n    },\r\n  },\r\n  // 年龄\r\n  age: {\r\n    type: \"InputNumber\",\r\n    attrs: {\r\n      min: 0,\r\n      max: 100,\r\n      addonAfter: \"岁\",\r\n    },\r\n  },\r\n  // 体重\r\n  weight: {\r\n    type: \"InputNumber\",\r\n    attrs: {\r\n      min: 0,\r\n      max: 180,\r\n      addonAfter: \"kg\",\r\n    },\r\n  },\r\n  // 人民币\r\n  rmb: {\r\n    type: \"InputNumber\",\r\n    attrs: {\r\n      min: 0,\r\n      step: 0.01,\r\n      addonAfter: \"￥\",\r\n    },\r\n  },\r\n};\r\n","import { typeOf, getTextFromOpts } from \"@/components/_utils\";\r\nimport { merge } from \"lodash\";\r\nimport { defaultFieldAttrs } from \"./_config\";\r\nimport { ColAttrs, FormFieldAttrs } from \"./_types\";\r\nimport { OptionItem } from \"@/vite-env\";\r\n\r\n//获取表单键值对的值\r\nexport function getKeyVal(field: FormFieldAttrs, val: any) {\r\n  const { type = \"Input\", label, attrs = {} } = field;\r\n  const options = attrs.options as OptionItem[];\r\n  if ([\"Select\", \"RadioGroup\"].includes(type)) {\r\n    val = options?.find((it: OptionItem) => it.value === val)?.label;\r\n  } else if (type.includes(\"Time\") || type.includes(\"Date\")) {\r\n    const { format } = merge({}, defaultFieldAttrs[type]?.attrs, attrs);\r\n    const isArr = typeOf(val) === \"Array\";\r\n    val = isArr ? val.map((it: any) => it.format(format)).join(\" ~ \") : val.format(format);\r\n  } else if ([\"CheckboxGroup\"].includes(type)) {\r\n    val = options\r\n      ?.filter((it: OptionItem) => val.includes(it.value))\r\n      ?.map((it: OptionItem) => it.label)\r\n      .join(\"，\");\r\n  } else if (type === \"InputNumber\") {\r\n    val = val + (attrs?.addonAfter || \"\");\r\n  } else if (typeOf(val) === \"Boolean\") {\r\n    if (type === \"Switch\") {\r\n      const { checkedChildren = \"是\", unCheckedChildren = \"否\" } = attrs;\r\n      val = val ? checkedChildren : unCheckedChildren;\r\n    } else {\r\n      val = val ? \"是\" : \"否\";\r\n    }\r\n  } else if (type === \"Cascader\") {\r\n    val = getTextFromOpts(options, val);\r\n  } else if (type === \"Custom\") {\r\n  }\r\n  return { label, value: val };\r\n}\r\n\r\nexport function getColAttrs(col?: number | ColAttrs) {\r\n  if (typeof col === \"number\") return { span: col };\r\n  return col;\r\n}\r\n","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { Popover } from \"antd\";\r\nimport { CSSProperties } from \"react\";\r\nimport { QuestionCircleFilled } from \"@ant-design/icons\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  type?: \"danger\" | \"success\" | \"primary\" | \"info\" | \"warning\";\r\n  [key: string]: any;\r\n}\r\nexport default ({ className = \"\", type = \"info\", children, ...restProps }: Props) => {\r\n  return <Popover {...restProps}>{children || <QuestionCircleFilled className={`${className} ml-2 color-${type}`} />}</Popover>;\r\n};\r\n","/**\r\n * 表单字段组件\r\n */\r\n\r\nimport { useMemo } from \"react\";\r\nimport { Form, Col } from \"antd\";\r\nimport { CSSProperties } from \"react\";\r\nimport { merge } from \"lodash\";\r\nimport BaseKeyVal from \"@/components/BaseKeyVal\";\r\nimport { ChildrenStyle, FormField, FormFieldAttrs, FormItemType } from \"./_types\";\r\nimport { getColAttrs, getKeyVal } from \"./_utils\";\r\nimport { defaultFieldAttrs, defaultValidTypes, fieldMap } from \"./_config\";\r\nimport { CascaderName, DictName } from \"@/dict\";\r\nimport { useDictMap } from \"@/hooks\";\r\nimport { deleteAttrs } from \"../_utils\";\r\nimport BaseQuestionPopover from \"../BaseQuestionPopover\";\r\n\r\nexport * from \"./_types\";\r\nexport * from \"./_config\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  field: FormFieldAttrs;\r\n  readOnly?: boolean;\r\n  pureText?: any;\r\n  labelWidth?: string;\r\n  isChild?: boolean;\r\n  showChildLabel?: boolean;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface FieldProps {\r\n  field: FormFieldAttrs;\r\n  childrenStyle?: ChildrenStyle;\r\n  [key: string]: any;\r\n}\r\n\r\nconst getSomeRequired = (children?: FormField[]): boolean => {\r\n  if (!children) return false;\r\n  return !!children?.some(it => {\r\n    if (!it) return false;\r\n    const { required, children } = it as FormFieldAttrs;\r\n    return required || getSomeRequired(children);\r\n  });\r\n};\r\n\r\nconst FieldItem = ({ field, childrenStyle = \"custom\", ...restProps }: FieldProps) => {\r\n  const { type, attrs, render, children } = field;\r\n  attrs && Object.assign(attrs, restProps);\r\n  const renderField = fieldMap[type as FormItemType];\r\n  if (!renderField) return <div className=\"color-danger\">不存在该类型：{type}</div>;\r\n  if (type === \"Custom\") return renderField(attrs, render);\r\n  if (type === \"Children\") return renderField(field, childrenStyle);\r\n  return renderField(attrs);\r\n};\r\n\r\nexport default ({ className = \"\", style, field, pureText, labelWidth, isChild, showChildLabel, ...restProps }: Props) => {\r\n  const { getOpts, getCascaderOpts } = useDictMap();\r\n  const fieldInfo: FormFieldAttrs = useMemo(() => {\r\n    const { extra, render, children } = field;\r\n    let { type = \"Input\" } = field;\r\n    if (render) type = \"Custom\";\r\n    else if (children) type = \"Children\";\r\n    const tempField: FormFieldAttrs = merge({}, defaultFieldAttrs[type], field, { type });\r\n    const { getAttrs } = tempField?.attrs ?? {};\r\n    getAttrs && merge(tempField, { attrs: getAttrs(tempField) }, field);\r\n    const { label = \"\", attrs = {}, required = children ? getSomeRequired(children) : false, rules, otherAttrs = {} } = tempField;\r\n    const { valid, example, popover } = otherAttrs;\r\n    const currValidField = valid ? defaultValidTypes[valid] : undefined;\r\n    let { options, placeholder: phr = \"\" } = attrs;\r\n    if (typeof options === \"string\")\r\n      options = type === \"Cascader\" ? getCascaderOpts(options as CascaderName) : getOpts(options as DictName);\r\n    phr = phr.includes(\"{label}\") ? phr.replace(\"{label}\", label as string) : phr;\r\n    if (example) phr += `，例：${example}`;\r\n    tempField.attrs = merge({}, attrs, currValidField?.attrs, { placeholder: phr, options }, restProps);\r\n    tempField.required = required;\r\n    tempField.rules = [\r\n      ...(currValidField?.rules ?? []),\r\n      ...(required && !children ? [{ required, message: `${label}不能为空` }] : []),\r\n      ...(rules || []),\r\n    ];\r\n    if (extra) tempField.extra = typeof extra === \"string\" ? <>注：{extra}</> : extra;\r\n    if (popover)\r\n      tempField.label = (\r\n        <>\r\n          {label}\r\n          <BaseQuestionPopover content={popover} />\r\n        </>\r\n      );\r\n    delete tempField?.attrs?.getAttrs;\r\n    return tempField;\r\n  }, [field]);\r\n\r\n  const { colAttrs, otherAttrs, getAttrs, childrenStyle, ...fieldAttrs } = fieldInfo;\r\n  const { render, ...standFieldAttrs } = fieldAttrs;\r\n  return isChild ? (\r\n    <>\r\n      {pureText ? (\r\n        <BaseKeyVal className=\"mb-o\" labelStyle={{ width: labelWidth }} {...getKeyVal(fieldAttrs, pureText)} />\r\n      ) : (\r\n        <Form.Item\r\n          // className={`${className}`}\r\n          style={style}\r\n          labelCol={{ style: { width: labelWidth } }}\r\n          // wrapperCol={getColAttrs(colAttrs)}\r\n          {...(showChildLabel ? fieldAttrs : deleteAttrs(fieldAttrs, [\"label\"]))}\r\n        >\r\n          <FieldItem field={fieldAttrs} />\r\n        </Form.Item>\r\n      )}\r\n    </>\r\n  ) : (\r\n    <Col span={24} {...getColAttrs(colAttrs)}>\r\n      {pureText ? (\r\n        <BaseKeyVal className=\"mb-o\" labelStyle={{ width: labelWidth }} {...getKeyVal(fieldAttrs, pureText)} />\r\n      ) : (\r\n        <Form.Item className={`${className}`} style={style} labelCol={{ style: { width: labelWidth } }} {...standFieldAttrs}>\r\n          <FieldItem field={fieldAttrs} childrenStyle={childrenStyle} />\r\n        </Form.Item>\r\n      )}\r\n    </Col>\r\n  );\r\n};\r\n","/********************************************************************/\r\n/*************** 为Vue或React或各UI平台差异化单独写的方法 *************/\r\n/********************************************************************/\r\n\r\nimport cssVars from \"@/assets/styles/_var.module.less\";\r\nimport { message } from \"antd\";\r\nimport { getChinaCharLength, storage, typeOf } from \"@/components/_utils\";\r\nimport { PopoverAttrs } from \"@/components/BaseFormItem\";\r\nimport { CommonObj, TostMessageType } from \"@/vite-env\";\r\nimport type { FormField, FormFieldAttrs } from \"@/components/BaseFormItem\";\r\nimport { merge } from \"lodash\";\r\nimport dayjs from \"dayjs\";\r\nimport { defaultFieldAttrs, FormItemType } from \"@/components/BaseFormItem\";\r\nimport * as Icons from \"@ant-design/icons\";\r\nimport { ReactNode, isValidElement } from \"react\";\r\nimport { ArgsProps } from \"antd/es/message\";\r\n\r\n/**\r\n * 获取 ReactNode 的文本字符串\r\n * @param node ReactNode Rect的节点\r\n */\r\nexport function getTextFromReactNode(node: ReactNode): string {\r\n  if (!node) return \"\";\r\n  if ([\"string\", \"number\"].includes(typeof node)) return String(node);\r\n  if (Array.isArray(node)) return node.map(getTextFromReactNode).join(\"\");\r\n  if (typeof node === \"object\" && node !== null) {\r\n    if (node?.props?.children) return getTextFromReactNode(node.props.children); // 处理有可能有子节点的情况\r\n  }\r\n  return \"\";\r\n}\r\n\r\n/**\r\n * 展示message提示信息\r\n * @param hint string, MessageParams 提示内容\r\n * @description 默认展示成功通知\r\n */\r\nexport function showMessage(hint: ReactNode | ArgsProps, type: TostMessageType = \"success\", others?: ArgsProps) {\r\n  if (!hint) return;\r\n  let hintStr: string = \"\";\r\n  if (typeof hint === \"string\") {\r\n    hintStr = hint;\r\n  } else if (isValidElement(hint)) {\r\n    hintStr = getTextFromReactNode(hint);\r\n  } else if (typeOf(hint) === \"Object\") {\r\n    hintStr = getTextFromReactNode((hint as ArgsProps).content);\r\n  } else {\r\n    throw new Error(`暂未处理此种类型：${typeOf(hint)}`);\r\n  }\r\n  const speed = 7; //速度：9字/秒\r\n  let duration = hintStr.length / speed;\r\n  if (duration < 1.5) duration = 1.5;\r\n  const isObj = typeOf(hint) === \"Object\";\r\n  const cfg = isObj ? Object.assign({ duration }, hint as ArgsProps) : { content: hint, duration };\r\n  message[type](Object.assign(cfg, others));\r\n}\r\n\r\n/**\r\n * 输出请求参数与响应数据的log信息\r\n * @param data any 要打印的数据\r\n * @param type PrintLogType 要打印的日志类型 或要输出的文本内容\r\n */\r\nexport type PrintLogType = \"req\" | \"res\" | \"err\";\r\nexport type ThemeColorType = \"primary\" | \"success\" | \"danger\" | \"warning\" | \"info\";\r\nexport function printLog(data: any, type: PrintLogType | ThemeColorType = \"req\", text: string = \"\") {\r\n  if ([\"req\", \"res\", \"err\"].includes(type)) {\r\n    const map: CommonObj = {\r\n      req: {\r\n        text: \"请求参数\",\r\n        bgColor: cssVars.colorPrimary,\r\n      },\r\n      res: {\r\n        text: \"响应数据\",\r\n        bgColor: cssVars.colorSuccess,\r\n      },\r\n      err: {\r\n        text: \"错误数据\",\r\n        bgColor: cssVars.colorDanger,\r\n      },\r\n    };\r\n    const { text, bgColor } = map[type];\r\n    console.log(`%c ${text}：`, `background:${bgColor};color:#fff;`, data);\r\n  } else {\r\n    const themeMap = {\r\n      primary: cssVars.colorPrimary,\r\n      success: cssVars.colorSuccess,\r\n      danger: cssVars.colorDanger,\r\n      warning: cssVars.colorWarning,\r\n      info: cssVars.colorInfo,\r\n    };\r\n    const bgColor = themeMap[type as ThemeColorType];\r\n    console.log(`%c ${text}：`, `background:${bgColor};color:#fff;`, data);\r\n  }\r\n}\r\n\r\n/**\r\n * 处理时间：后端的时间为 1000-01-01 00:00:00 时，实际上是空值\r\n * @param text 要显示的文本内容\r\n * @param color 文本颜色\r\n * @param elTag 元素标签类型\r\n */\r\n// export function devErrorTips(\r\n//   text: string,\r\n//   attrs: CommonObj | null = {\r\n//     style: `color: ${cssVars.colorDanger};font-weight:600;`,\r\n//   },\r\n//   elTag: string | null = \"span\"\r\n// ): string | VNode<RendererNode, RendererElement, { [key: string]: any }> {\r\n//   if (!elTag) return `~~${text}~~`;\r\n//   return h(elTag, attrs, `~~${text}~~`);\r\n// }\r\n\r\n/**\r\n * 防抖：指触发事件后在 n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则会重新计算函数执行时间\r\n * @param {Function} fn 回调函数\r\n * @param {Boolean} immediate 是否立即执行\r\n * @param {Number} delay 延迟时间\r\n * @example methods: {onSubmit: debounce((event, param) => {console.log(\"防抖测试\");})}\r\n */\r\nexport function debounce(fn: (...args: any) => void, immediate = true, delay = 1000) {\r\n  let timer: any = null;\r\n  return function (...args: any) {\r\n    if (timer) clearTimeout(timer);\r\n    if (immediate) {\r\n      const canExe = !timer;\r\n      timer = setTimeout(() => {\r\n        timer = null;\r\n      }, delay);\r\n      if (canExe) {\r\n        fn(...args);\r\n      }\r\n    } else {\r\n      timer = setTimeout(() => {\r\n        fn(...args);\r\n        timer = null;\r\n      }, delay);\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * 防抖处理\r\n * @param fn 要执行的函数\r\n * @param delay 延迟执行时间\r\n * @returns 返回执行函数\r\n */\r\n// export function debounceHandler(fn: Function, delay = 500) {\r\n//   let timer: number | null = null;\r\n//   return function (...args: any) {\r\n//     const _this = this;\r\n//     if (timer) clearTimeout(timer);\r\n//     timer = window.setTimeout(() => {\r\n//       fn.apply(_this, ...args);\r\n//       timer = null;\r\n//     }, delay);\r\n//   };\r\n// }\r\n\r\n/**\r\n * 节流：指连续触发事件，但是在 n 秒内只执行一次函数\r\n * @param {Function} fn 回调函数\r\n * @param {Boolean} immediate 是否立即执行\r\n * @param {Number} delay 延迟时间\r\n * @example methods: {onSubmit: throttle((event, param) => {console.log(\"节流测试\");})}\r\n */\r\nexport function throttle(fn: (...args: any) => void, immediate = true, delay = 1000) {\r\n  if (immediate) {\r\n    let previous = 0;\r\n    return (...args: any) => {\r\n      const now = Date.now();\r\n      if (now - previous > delay) {\r\n        fn(...args);\r\n        previous = now;\r\n      }\r\n    };\r\n  }\r\n  let timer: any = null;\r\n  return (...args: any) => {\r\n    if (!timer) {\r\n      timer = setTimeout(() => {\r\n        fn(...args);\r\n        timer = null;\r\n      }, delay);\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * 处理ElementPlus表格的汇总\r\n * @param exceptKeys 要排除掉的不进行汇总的列prop\r\n */\r\n// export interface SummaryMethodProps<T = CommonObj> {\r\n//   columns: TableColumnCtx<T>[];\r\n//   data: T[];\r\n// }\r\n// export function handleTableSummary(param: SummaryMethodProps, exceptKeys?: string[]) {\r\n//   const { columns, data } = param;\r\n//   const sums: string[] = [];\r\n//   columns.forEach((column, index) => {\r\n//     if (index === 0) {\r\n//       sums[index] = \"合计\";\r\n//       return;\r\n//     }\r\n//     const values = data.map(item => Number(item[column.property]));\r\n//     if (values.every(value => Number.isNaN(value))) {\r\n//       sums[index] = \"-\"; //N/A\r\n//     } else {\r\n//       if (exceptKeys?.includes(column.property)) {\r\n//         sums[index] = \"-\";\r\n//       } else {\r\n//         sums[index] = `${values.reduce((prev, curr) => {\r\n//           const value = Number(curr);\r\n//           if (!Number.isNaN(value)) {\r\n//             return prev + curr;\r\n//           } else {\r\n//             return prev;\r\n//           }\r\n//         }, 0)}`;\r\n//       }\r\n//     }\r\n//   });\r\n//   return sums;\r\n// }\r\n\r\n/**\r\n * 获取屏幕大小的类型，对应着element-plus定义的屏幕类型\r\n * @return string 屏幕类型\r\n */\r\nexport type ScreenSizeType = \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\r\nexport function getScreenSizeType(w = document.body.offsetWidth): ScreenSizeType {\r\n  if (w < 576) return \"xs\";\r\n  if (w >= 576 && w < 768) return \"sm\";\r\n  if (w >= 768 && w < 992) return \"md\";\r\n  if (w >= 992 && w < 1200) return \"lg\";\r\n  if (w >= 992 && w < 1600) return \"xl\";\r\n  if (w >= 1600) return \"xxl\";\r\n  return \"xxl\";\r\n}\r\n\r\n/**\r\n * 获取popover的属性值\r\n * @param popover\r\n * @returns\r\n */\r\nexport function getPopoverAttrs(popover?: string | PopoverAttrs): PopoverAttrs | undefined {\r\n  if (!popover) return;\r\n  const t = typeOf(popover);\r\n  if (t === \"String\") return { content: popover as string };\r\n  if (t === \"Object\") return popover as PopoverAttrs;\r\n  throw new Error(`暂不支持此popover类型：${t}`);\r\n}\r\n\r\n/********************************************************************/\r\n/************************** 下面是新添加的 **************************/\r\n/********************************************************************/\r\n\r\n/**\r\n * 过滤筛选日期字段\r\n * @param fields 字段数组\r\n */\r\nfunction getDateFields(fields: FormFieldAttrs[]): FormFieldAttrs[] {\r\n  return fields.filter((field: FormFieldAttrs) => {\r\n    if (!field) throw new Error(\"上级应该过滤掉\");\r\n    const { type } = field as FormFieldAttrs;\r\n    if (!type) return false;\r\n    return type.includes(\"Date\") || type.includes(\"Time\");\r\n  }) as FormFieldAttrs[];\r\n}\r\n\r\n/**\r\n * 转换日期\r\n * @param dateFields Array 日期字段数组\r\n * @param key 对象属性名\r\n */\r\nfunction getDateFormat(dateFields: FormFieldAttrs[], key: string) {\r\n  const { type, attrs } = dateFields.find(it => it.name === key) || {};\r\n  const newAttrs = merge({}, defaultFieldAttrs[type as FormItemType]?.attrs, attrs);\r\n  return newAttrs.format || \"YYYY-MM-DD\";\r\n}\r\n\r\n/**\r\n * 转换日期\r\n * @param fields Array 表单字段数组\r\n * @param params Object 要整理的参数\r\n * @param type 日期转换类型, set 设置值， get 获取值\r\n */\r\nexport type ConvertDateFieldType = \"set\" | \"get\";\r\nexport function convertDateField(fields: FormField[], params: CommonObj = {}, type: ConvertDateFieldType = \"get\") {\r\n  const dateFields = getDateFields(fields);\r\n  const dateNames = dateFields.map(it => it.name);\r\n  for (let key in params) {\r\n    if (!dateNames.includes(key)) continue;\r\n    const format = getDateFormat(dateFields, key);\r\n    const val = params[key];\r\n    const isArr = typeOf(val) === \"Array\";\r\n    if (type === \"get\") {\r\n      params[key] = isArr ? val.map((it: any) => it.format(format)) : val?.format(format);\r\n    } else if (type === \"set\") {\r\n      params[key] = isArr ? val.map((it: string) => dayjs(it, format)) : dayjs(val, format);\r\n    }\r\n  }\r\n  return params;\r\n}\r\n\r\n/**\r\n * 获取label的最大字符长度\r\n * @param fields 表单域\r\n * @param num 额外的空白宽度，默认2 // 2是因为：一个是间距宽度，一个是*宽度\r\n */\r\nexport function getMaxLength(fields: FormFieldAttrs[] = [], num = 2): number {\r\n  let max = 1;\r\n  fields.forEach(item => {\r\n    const { label, children, otherAttrs } = item as FormFieldAttrs;\r\n    const popNum = otherAttrs?.popover ? 1 : 0;\r\n    if (typeof label === \"string\") {\r\n      if (label?.length + popNum > max) {\r\n        max = getChinaCharLength(label) + popNum; //全角符算1个，半角符算0.5个字符\r\n      }\r\n    } else {\r\n      console.error(`暂未处理类型为${typeOf(label)}的label`);\r\n    }\r\n    if (children) {\r\n      const _max = getMaxLength(children.filter(it => !!it) as FormFieldAttrs[], 0);\r\n      if (_max > max) max = _max;\r\n    }\r\n  });\r\n  return max + num;\r\n}\r\n\r\n/**\r\n * 获取用户信息\r\n * @returns\r\n */\r\nexport function getUserInfo(): CommonObj | null {\r\n  const info = storage.getItem(\"userInfo\");\r\n  // if (!info) showMessage(\"检测到未登录异常\", \"error\");\r\n  if (!info) console.error(\"检测到未登录异常\", \"error\");\r\n  return info;\r\n}\r\n\r\nexport const getIconNames = () => {\r\n  const names: string[] = [];\r\n  Object.keys(Icons).forEach((name: any, ind: number) => {\r\n    const code = name.charCodeAt(0);\r\n    const isUpper = code >= 65 && code <= 90;\r\n    if (isUpper) names.push(name);\r\n    // else {\r\n    //   // 可以通过使用 getTwoToneColor() 和 setTwoToneColor(colorString) 来全局设置图标主色。\r\n    // }\r\n  });\r\n  return names;\r\n};\r\n\r\n/**\r\n * antd 图标的名称集合\r\n */\r\n// type IconNames = (typeof allIconNames)[number];\r\nexport const allIconNames = getIconNames();\r\n","import { CommonObj, OptionItem, StrNum } from \"@/vite-env\";\r\nimport { merge } from \"lodash\";\r\nimport { useStoreSlice } from \".\";\r\nimport { DictName } from \"@/dict\";\r\nimport { CascaderName } from \"@/dict/cascader\";\r\nimport { typeOf } from \"@/utils\";\r\n\r\nexport default () => {\r\n  const { dictMap, cascaderMap } = useStoreSlice(\"dict\");\r\n  /**\r\n   * 获取tagMap\r\n   * @param name 映射map的名称\r\n   * @param codeMap 例如：YesNo 的 codeMap: {0:1, 1:0}，显示时就会将是否对调\r\n   */\r\n  function getMap(name: DictName, codeMap?: CommonObj) {\r\n    const currMap = dictMap[name];\r\n    if (!currMap) return console.error(\"未找到name为\" + name + \"的tagMap\");\r\n    if (codeMap) {\r\n      const tempMap: CommonObj = {};\r\n      for (const key in codeMap) {\r\n        tempMap[key] = currMap[codeMap[key]];\r\n      }\r\n      return merge({}, currMap, tempMap); //是为了可以不写完所有code（只写出需要对调的code即可）\r\n    }\r\n    return currMap;\r\n  }\r\n\r\n  /**\r\n   * 获取字典文本内容\r\n   * @param name string 字典名称\r\n   * @param key string 字典中的建名\r\n   * @param char string 为空时的占位符号\r\n   */\r\n  function getText(name: DictName, key: StrNum, char = \"-\"): string {\r\n    const currMap = getMap(name);\r\n    return currMap[key]?.text || char;\r\n  }\r\n\r\n  /**\r\n   * 获取字典下拉项\r\n   * @param name DictName 字典名称\r\n   * @param includeKeys string[] 过滤时要包含的keys\r\n   * @param isExclude boolean 是否排除掉要包含的keys\r\n   */\r\n  function getOpts(name: DictName, includeKeys: StrNum[] = [], isExclude = false): OptionItem[] {\r\n    const currMap = getMap(name);\r\n    let opts: OptionItem[] = [];\r\n    for (let key in currMap) {\r\n      const { text, disabled } = currMap[key];\r\n      const val = isNaN(Number(key)) ? key : Number(key);\r\n      const opt: OptionItem = { label: text, value: val };\r\n      if (disabled !== undefined) {\r\n        opt.disabled = disabled;\r\n      }\r\n      opts.push(opt);\r\n    }\r\n    if (typeOf(includeKeys) !== \"Array\") {\r\n      throw new Error(\"请传入一个数组\");\r\n    }\r\n    if (includeKeys?.length) {\r\n      opts = opts.filter(it => {\r\n        const isInclude = includeKeys.includes(it.value as StrNum);\r\n        return isExclude ? !isInclude : isInclude;\r\n      });\r\n    }\r\n    return opts;\r\n  }\r\n\r\n  /**\r\n   * 获取级联中的文字\r\n   * @param name 级联名称\r\n   * @param val 查找文本时依据的code值\r\n   * @param char 连接多个文本的字符串\r\n   * @returns\r\n   */\r\n  function getCascaderText(name: CascaderName, val: StrNum, char = \"-\") {\r\n    if (typeof val === \"undefined\") return char;\r\n    const regions: OptionItem[] = cascaderMap[name];\r\n    if (!regions) throw new Error(`未找到name为${name}的字典映射`);\r\n    let text = \"\";\r\n    regions.find(item => {\r\n      const { label, children = [] } = item;\r\n      const target = children.find((it: OptionItem) => it.value === val);\r\n      if (target) {\r\n        text = `${label}${char}${target.label}`;\r\n      }\r\n      return !!target;\r\n    });\r\n    return text;\r\n  }\r\n\r\n  /**\r\n   * 获取级联下拉项\r\n   * @param name 级联名称\r\n   * @returns\r\n   */\r\n  function getCascaderOpts(name: CascaderName): OptionItem[] {\r\n    const opts = cascaderMap[name];\r\n    if (!opts) throw new Error(`未找到name为${name}的字典映射`);\r\n    return opts;\r\n  }\r\n\r\n  return {\r\n    getMap,\r\n    getText,\r\n    getOpts,\r\n    getCascaderText,\r\n    getCascaderOpts,\r\n  };\r\n};\r\n","import { useEffect } from \"react\";\r\n\r\nexport default (\r\n  name: string,\r\n  fn: (e?: Event) => void,\r\n  effect: any[],\r\n  isImmediate = false\r\n) => {\r\n  useEffect(() => {\r\n    isImmediate && fn();\r\n    window.addEventListener(name, fn);\r\n    return () => {\r\n      window.removeEventListener(name, fn);\r\n    };\r\n  }, effect);\r\n};\r\n","// import { checkObjKeyError } from \"@/utils\";\r\n// import { storage } from \"@/utils\";\r\nimport { typeOf } from \"#/mock/utils\";\r\nimport { storage } from \"@/utils\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { SliceNames, sliceMap } from \"@/store\";\r\n\r\n// 修改state的值\r\nexport function updateState(state: any, { payload }: CommonObj) {\r\n  // checkObjKeyError(defaultSet[name], obj); // 是为了校验防止传参出错\r\n  if (typeOf(payload) === \"Array\") {\r\n    const [key, value, name] = payload;\r\n    Object.assign(state[key], value);\r\n    if (!name) return;\r\n    if (!sliceMap[name as SliceNames]) throw new Error(`sliceStore的name错误，请检查：${name}`);\r\n    storage.setItem(name, state);\r\n  } else {\r\n    Object.assign(state, payload);\r\n  }\r\n}\r\n","import { storage } from \"@/utils\";\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport { updateState } from \"../_utils\";\r\n\r\nexport default createSlice({\r\n  name: \"base\",\r\n  initialState: {},\r\n  reducers: {\r\n    updateBaseState: updateState,\r\n  },\r\n});\r\n","import { defaultWidgetSize, showMessage, storage } from \"@/utils\";\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport cssVars from \"@/assets/styles/_var.module.less\";\r\nimport { ShowCodes } from \"@/vite-env\";\r\nimport { updateState } from \"../_utils\";\r\n\r\nexport type LayoutType = \"vertical\" | \"classics\" | \"horizontal\" | \"columns\";\r\nexport type LayoutSize = \"large\" | \"medium\" | \"small\" | \"mini\";\r\nexport type SetName = keyof typeof defaultSet;\r\nexport type LanguageTypes = \"zh\" | \"en\";\r\n\r\nexport interface LayoutAttrs {\r\n  type: LayoutType;\r\n  size: LayoutSize;\r\n}\r\ninterface DefaultSet {\r\n  layout: LayoutAttrs;\r\n  language: {\r\n    type: LanguageTypes;\r\n  };\r\n  menu: {\r\n    uniqueOpened: ShowCodes;\r\n  };\r\n  pageTags: {\r\n    show: ShowCodes;\r\n    showIcon: ShowCodes;\r\n  };\r\n  breadcrumb: {\r\n    show: ShowCodes;\r\n    showIcon: ShowCodes;\r\n  };\r\n  footer: {\r\n    show: ShowCodes;\r\n  };\r\n  theme: {\r\n    color: string;\r\n    darkMode: ShowCodes;\r\n  };\r\n}\r\n\r\nexport const defaultSet: DefaultSet = {\r\n  //布局\r\n  layout: {\r\n    type: \"columns\",\r\n    size: defaultWidgetSize,\r\n  },\r\n  //语言\r\n  language: {\r\n    type: \"zh\",\r\n  },\r\n  //菜单设置\r\n  menu: {\r\n    uniqueOpened: 0, //是否只保持一个子菜单的展开\r\n  },\r\n  //页签\r\n  pageTags: { show: 1, showIcon: 0 },\r\n  //面包屑\r\n  breadcrumb: { show: 1, showIcon: 1 },\r\n  //底部\r\n  footer: { show: 0 },\r\n  //主题\r\n  theme: {\r\n    color: cssVars.colorPrimary,\r\n    darkMode: 0,\r\n  },\r\n};\r\nconst initState = storage.getItem(\"set\") ?? JSON.parse(JSON.stringify(defaultSet));\r\nexport default createSlice({\r\n  name: \"set\",\r\n  initialState: initState,\r\n  reducers: {\r\n    updateSetState: updateState,\r\n    resetDefault(state: any, { payload }) {\r\n      // Object.assign(state, JSON.parse(JSON.stringify(defaultSet)));\r\n      // storage.setItem(\"set\", defaultSet);\r\n      // showMessage(\"已恢复为默认值\");\r\n    },\r\n  },\r\n});\r\n","import React from \"react\";\r\nimport { ResponseMenuItem } from \"@/layout/_types\";\r\nimport { AntdMenuItem } from \"@/layout/_types\";\r\nimport { createSlice, current } from \"@reduxjs/toolkit\";\r\nimport { getUserInfo, storage } from \"@/utils\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { updateState } from \"../_utils\";\r\nimport * as Icons from \"@ant-design/icons\";\r\n\r\nexport function convertToMenuNavs(menus: ResponseMenuItem[] = [], level = 0): AntdMenuItem[] {\r\n  const user = getUserInfo();\r\n  const filterMenus = menus.filter((it: ResponseMenuItem) => {\r\n    const { type, auth_codes } = it;\r\n    if (!auth_codes?.length) return true;\r\n    return type !== 2 && auth_codes.includes(user?.type);\r\n    // return it.type !== 2;\r\n  });\r\n  const antdMenus = filterMenus.map((item: ResponseMenuItem) => {\r\n    let { path, icon = \"TwitterOutlined\", children, label, type } = item;\r\n    const obj: CommonObj = {\r\n      key: path,\r\n      icon: level < 1 ? React.createElement(Icons[icon] ?? Icons.TwitterOutlined) : null, // 为了保持统一美观好看性，菜单多语两级的就不展示图标了\r\n      label,\r\n      type,\r\n    };\r\n    if (children?.length) {\r\n      obj.children = convertToMenuNavs(children, level + 1);\r\n    }\r\n    return obj as AntdMenuItem;\r\n  });\r\n  return antdMenus;\r\n}\r\n\r\nconst localMenus = storage.getItem(\"allMenus\") || [];\r\nconst menuSlice = createSlice({\r\n  name: \"menu\",\r\n  initialState: {\r\n    isCollapse: storage.getItem(\"isCollapse\", \"session\") ?? false, //是否折叠菜单\r\n    updatedTitle: false, // 是否已经更新了document.title\r\n    openKeys: [], //打开的菜单项\r\n    seledKeys: [], //选中的菜单项\r\n    activeIndex: 0, // 当前选中根菜单的下标项\r\n    allMenus: localMenus, // 完整导航数据\r\n    sideMenus: localMenus[0]?.children,\r\n  } as CommonObj,\r\n  reducers: {\r\n    // 修改state的值\r\n    updateMenuState: updateState,\r\n    // 初始化菜单\r\n    initMenus: (state, { payload = [] }) => {\r\n      state.allMenus = payload;\r\n    },\r\n  },\r\n  selectors: {\r\n    // state: state => state,\r\n    // getActiveKeysTest(state, args) {\r\n    //   console.log(state, args, \"args------------\");\r\n    //   let openKeys: string[] = [];\r\n    //   let seledKeys: string[] = [];\r\n    //   return { openKeys, seledKeys };\r\n    // },\r\n  },\r\n});\r\n\r\nexport default menuSlice;\r\n","export default {\r\n  // 启用状态\r\n  EnableStatus: {\r\n    0: {\r\n      text: \"禁用\",\r\n      attrs: {\r\n        color: \"default\",\r\n      },\r\n    },\r\n    1: {\r\n      text: \"启用\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n  },\r\n  //性别：0未知 1男 2女\r\n  Gender: {\r\n    0: {\r\n      text: \"未知\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    1: {\r\n      text: \"男\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    2: {\r\n      text: \"女\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n  },\r\n  // 是否状态类型\r\n  YesNoStatus: {\r\n    0: {\r\n      text: \"否\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    1: {\r\n      text: \"是\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n  },\r\n};\r\n","import { GetMockCommonList } from \"@/api-mock\";\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\nexport default {\r\n  // 身份认证情况：1=未认证,2=学历;3=公司,4=双认证\r\n  AuthCase: {\r\n    \"1\": {\r\n      text: \"未认证\",\r\n      attrs: {\r\n        color: \"default\",\r\n      },\r\n    },\r\n    \"2\": {\r\n      text: \"学历认证\",\r\n      attrs: {\r\n        color: \"#06D4E0\",\r\n        style: {\r\n          color: \"#fff\",\r\n        },\r\n      },\r\n    },\r\n    \"3\": {\r\n      text: \"公司认证\",\r\n      attrs: {\r\n        color: \"#1368F9\",\r\n        style: {\r\n          color: \"#fff\",\r\n        },\r\n      },\r\n    },\r\n    \"4\": {\r\n      text: \"双认证\",\r\n      attrs: {\r\n        color: \"success\",\r\n      },\r\n    },\r\n  },\r\n  // 学历类型: 0未知 1大专 2本科 3研究生 4博士\r\n  EducationType: {\r\n    0: {\r\n      text: \"未知\",\r\n      attrs: {\r\n        color: \"default\",\r\n      },\r\n    },\r\n    1: {\r\n      text: \"专科\",\r\n      attrs: {\r\n        color: \"default\",\r\n      },\r\n    },\r\n    2: {\r\n      text: \"本科\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    3: {\r\n      text: \"硕士\",\r\n      attrs: {\r\n        color: \"warning\",\r\n      },\r\n    },\r\n    4: {\r\n      text: \"博士\",\r\n      attrs: {\r\n        color: \"success\",\r\n      },\r\n    },\r\n  },\r\n  //领取奖励方式：0手动 1自动\r\n  GetRewardWay: {\r\n    0: {\r\n      text: \"手动\",\r\n      attrs: {\r\n        color: \"default\",\r\n      },\r\n    },\r\n    1: {\r\n      text: \"自动\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n  },\r\n  // 任务奖励类型: 1 金币， 2 心动嘉宾\r\n  TaskRewards: {\r\n    1: {\r\n      text: \"金币\",\r\n      attrs: {\r\n        color: \"warning\",\r\n      },\r\n    },\r\n    2: {\r\n      text: \"心动嘉宾\",\r\n      attrs: {\r\n        color: \"error\",\r\n      },\r\n    },\r\n  },\r\n  // 测试用的请求下拉项\r\n  TestFetchAsync: {},\r\n  // await GetMockCommonList().then((res: CommonObj) => {\r\n  //   const obj: CommonObj = {};\r\n  //   Array(3)\r\n  //     .fill(\"\")\r\n  //     .forEach((item: string, ind: number) => {\r\n  //       obj[ind] = {\r\n  //         text: `请求下拉项${ind}`,\r\n  //       };\r\n  //     });\r\n  //   return obj;\r\n  // }),\r\n};\r\n","export default {\r\n  // 菜单类型\r\n  MenuType: {\r\n    0: {\r\n      text: \"目录\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    1: {\r\n      text: \"菜单\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    2: {\r\n      text: \"按钮\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    // 3: {\r\n    //   text: \"外链\",\r\n    //   attrs: {\r\n    //     color: \"processing\",\r\n    //   },\r\n    // },\r\n  },\r\n  //角色类型\r\n  RoleType: {\r\n    0: {\r\n      text: \"超级管理员\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    1: {\r\n      text: \"普通管理员\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    2: {\r\n      text: \"特殊用户\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    3: {\r\n      text: \"普通用户\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    4: {\r\n      text: \"游客用户\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n    5: {\r\n      text: \"开发人员\",\r\n      attrs: {\r\n        color: \"processing\",\r\n      },\r\n    },\r\n  },\r\n};\r\n","import { GetCascaderRegion } from \"@/api-mock\";\r\n\r\nexport type CascaderName = keyof typeof cascader;\r\n\r\n/**\r\n * 级联的逻辑处理暂时放在这里，后续再改进放置位置\r\n */\r\n\r\nconst cascader = {\r\n  // 地区（省市区）\r\n  Region: [], // await GetCascaderRegion().then((res: any) => res),\r\n};\r\n\r\nexport default cascader;\r\n","import base from \"./modules/base\";\r\nimport other from \"./modules/other\";\r\nimport system from \"./modules/system\";\r\n\r\nexport * from \"./_config\";\r\nexport * from \"./_types\";\r\nexport * from \"./cascader\";\r\n\r\n/**\r\n * 字典映射集合\r\n */\r\n\r\nexport default {\r\n  ...base,\r\n  ...other,\r\n  ...system,\r\n};\r\n","import { createSlice, current } from \"@reduxjs/toolkit\";\r\nimport dict, { DictName } from \"@/dict\";\r\nimport cascader, { type CascaderName } from \"@/dict/cascader\";\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\n/**\r\n * 将对象按属性排序（整理文件按属性排序的时候会用到）\r\n * @param map CommonObj\r\n */\r\nfunction sortMapByKey(map: CommonObj) {\r\n  const keys = Object.keys(map);\r\n  keys.sort();\r\n  const obj: CommonObj = {};\r\n  keys.forEach((key, ind) => {\r\n    obj[key] = map[key];\r\n  });\r\n  return obj;\r\n}\r\n\r\nexport default createSlice({\r\n  name: \"dict\",\r\n  initialState: {\r\n    dictMap: dict,\r\n    cascaderMap: cascader,\r\n  },\r\n  reducers: {\r\n    // 未来可能有如下方法\r\n    // getDictMap() {},\r\n    // setDictMap() {},\r\n    // clearDictMap() {},\r\n  },\r\n});\r\n","// const baseUrl = \"http://127.0.0.1:5179\";\r\n// mock 地址： \"https://mockapi.eolink.com/wejlzfKceefd6d629b89a3818c1b5f4d447d672cdbde39c\"\r\nconst useMock = false;\r\n// const realUrl = \"120.26.198.77:18888/api/csmweb\";\r\n// const realUrl = \"http://wzh.frp.nsusn.com:18888/api/csmweb\";\r\nconst realUrl = \"https://cloudapi.nsusn.com/api/csmweb\";\r\n// const baseUrl = useMock\r\n//   ? \"https://mockapi.eolink.com/wejlzfKceefd6d629b89a3818c1b5f4d447d672cdbde39c\"\r\n//   : realUrl;\r\nimport axios, { AxiosResponse, AxiosRequestConfig } from \"axios\";\r\nimport { showMessage, storage, typeOf } from \"@/utils\";\r\nimport qs from \"qs\";\r\nimport { CommonObj, SetTimeout, TostMessageType } from \"@/vite-env\";\r\n// import { useRouter } from \"vue-router\";\r\n\r\ntype ToastType = \"warning\" | \"info\" | \"success\" | \"error\";\r\n\r\nlet historyMsg = \"\"; // 上次提示过了，下次不提示重复的\r\nlet timer: SetTimeout = null;\r\nlet showLoadTimer: SetTimeout = null;\r\nlet loading: null | CommonObj = null;\r\nlet loadingCount = 0;\r\n// const router = useRouter();\r\nconst startLoading = () => {\r\n  // loading = ElLoading.service({\r\n  //   lock: true,\r\n  //   text: \"玩命加载中……\",\r\n  //   background: \"rgba(0, 0, 0, 0.5)\",\r\n  // });\r\n};\r\nconst endLoading = () => {\r\n  loading?.close();\r\n  loading = null;\r\n};\r\nconst showLoading = () => {\r\n  if (loadingCount === 0) {\r\n    showLoadTimer = setTimeout(() => {\r\n      startLoading();\r\n      showLoadTimer = null;\r\n    }, 1000);\r\n  }\r\n  loadingCount += 1;\r\n};\r\n\r\nconst hideLoading = () => {\r\n  if (loadingCount > 0) {\r\n    loadingCount -= 1;\r\n    if (loadingCount === 0) {\r\n      if (showLoadTimer) {\r\n        clearTimeout(showLoadTimer);\r\n        showLoadTimer = null;\r\n      } else {\r\n        endLoading();\r\n      }\r\n    }\r\n  }\r\n};\r\nconst service = axios.create({ timeout: 6000 });\r\nconst isDev = process.env.NODE_ENV === \"development\";\r\nfunction showToast(msg: string, type: TostMessageType = \"warning\") {\r\n  if (historyMsg === msg) {\r\n    historyMsg = \"\";\r\n    return;\r\n  }\r\n  historyMsg = msg;\r\n  timer && clearTimeout(timer);\r\n  timer = setTimeout(() => {\r\n    historyMsg = \"\";\r\n    timer && clearTimeout(timer);\r\n  }, 300);\r\n  showMessage(msg, type);\r\n}\r\n\r\nservice.interceptors.request.use(\r\n  (cfg: AxiosRequestConfig) => {\r\n    showLoading();\r\n    cfg.headers[\"Content-Type\"] = \"application/json;charset=utf-8\";\r\n    cfg.headers[\"token\"] = storage.getItem(\"token\");\r\n    cfg.headers[\"device\"] = storage.getItem(\"user\")?.device;\r\n    return cfg;\r\n  },\r\n  (err: CommonObj) => {\r\n    console.error(\"请求错误：\", err);\r\n    return err;\r\n  }\r\n);\r\n\r\nservice.interceptors.response.use(\r\n  (res: AxiosResponse) => {\r\n    const { data: resData } = res;\r\n    const { code, data, msg } = resData;\r\n    hideLoading();\r\n    if (code === 0) {\r\n      return data;\r\n    } else if (code === 401) {\r\n      showToast(\"token已过期，请重新登录\");\r\n      const { pathname, search } = location;\r\n      location.href = `/login?redirect=${pathname}${search}`;\r\n      return;\r\n    } else {\r\n      // const isDevTips = code > 0; //是否是开发提示\r\n      // if (isDevTips) {\r\n      showToast(msg === undefined ? \"请求错误\" : msg, \"error\");\r\n      // }\r\n      console.error(\"请求错误：\", msg);\r\n      throw new Error(msg);\r\n    }\r\n  },\r\n  (err: CommonObj) => {\r\n    const { message, config } = err;\r\n    hideLoading();\r\n    if (message === \"Network Error\") {\r\n      showToast(useMock ? \"请输入命令【npm run mock】启动mock服务！\" : \"网络错误\", \"error\");\r\n    } else if (message.includes(\"404\")) {\r\n      console.error(\"接口不存在：\" + config.url);\r\n      showToast(\"接口不存在\");\r\n    } else if (message.includes(\"timeout\")) {\r\n      showToast(\"请求超时，请重试\");\r\n    } else {\r\n      console.error(\"响应错误：\", err);\r\n      showToast(\"网络错误\");\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\n/**\r\n * 发送http请求\r\n * @param {String} method 请求类型（区分大小写），可选值：get,post,put,patch,delete\r\n * get 获取数据。请求指定的页面信息，并返回实体主体。\r\n * post 提交数据。如：提交表单或上传文件。数据被包含在请求体中\r\n * put 更新全部数据（类似post）\r\n * patch 更新局部数据（类似post，只针对更改过的）。是对put的补充，patch意为修补。\r\n * delete 删除数据。\r\n * @param {String} url 请求地址\r\n * @param {Object} data 请求参数\r\n * @param {Object} others 除上述三个axios配置参数外，其余任意多个axios的标准参数\r\n * @returns\r\n */\r\nexport default (method = \"get\", url = \"\", data: any, others = {}, isStringify = false) => {\r\n  method = method.toLowerCase();\r\n  // if (!url.startsWith(\"http\")) {\r\n  //   url = baseUrl + url;\r\n  // }\r\n  const cfg: CommonObj = { url, method, ...others };\r\n  if ([\"get\"].includes(method)) {\r\n    cfg.params = data;\r\n  } else if ([\"post\", \"put\", \"patch\", \"delete\"].includes(method)) {\r\n    // cfg.data = isStringify ? qs.stringify(data) : data;\r\n    const isObj = typeOf(data) === \"Object\";\r\n    if (isObj) {\r\n      cfg.data = isStringify ? qs.stringify(data) : data;\r\n    } else {\r\n      cfg.data = data;\r\n    }\r\n    // cfg.data = isObj && isStringify ? qs.stringify(data) : data;\r\n  } else {\r\n    throw new Error(\"请传入正确的请求方法\");\r\n  }\r\n  return service(cfg);\r\n};\r\n","import http from \"@/services/http\";\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\n//获取验证码\r\nexport const GetUserCaptcha = (data?: CommonObj) => http(\"get\", \"/user/captcha\", data);\r\n//注册\r\nexport const PostUserRegister = (data?: CommonObj) => http(\"post\", \"/user/register\", data);\r\n//登录\r\nexport const PostUserLogin = (data?: CommonObj) => http(\"post\", \"/user/login\", data);\r\n//登出\r\nexport const PostUserLogout = (data?: CommonObj) => http(\"post\", \"/user/logout\", data);\r\n//获取可登录的用户账号\r\nexport const GetUserLoginAccounts = (data?: CommonObj) => http(\"get\", \"/user/login/accounts\", data);\r\n//获取用户列表\r\nexport const GetUserInfo = (data?: CommonObj) => http(\"get\", \"/user/info\", data);\r\n//获取导航数据\r\nexport const GetUserNavs = (data?: CommonObj) => http(\"get\", \"/user/navs\", data);\r\n//获取用户列表\r\nexport const GetUserList = (data?: CommonObj) => http(\"get\", \"/user/list\", data);\r\n//批量删除用户\r\nexport const DeleteUserList = (data?: CommonObj) => http(\"delete\", \"/user/list\", data);\r\n//导出用户列表\r\nexport const PostUserListExport = (data?: CommonObj) => http(\"post\", \"/user/list/export\", data);\r\n//新增用户\r\nexport const PostUserAdd = (data?: CommonObj) => http(\"post\", \"/user/add\", data);\r\n//编辑修改用户\r\nexport const PostUserUpdate = (data?: CommonObj) => http(\"post\", \"/user/update\", data);\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { updateState } from \"../_utils\";\r\n\r\nexport default createSlice({\r\n  name: \"route\",\r\n  initialState: {\r\n    // routes: {}, //路由名称 - 路径映射\r\n    isCreatedRoute: false, // 路由是否已创建完毕\r\n  },\r\n  reducers: {\r\n    updateRoutesState: updateState,\r\n  },\r\n});\r\n","import { storage, defaultHomePath, defaultIconName, showMessage } from \"@/utils\";\r\nimport { createSlice, createAsyncThunk, current } from \"@reduxjs/toolkit\";\r\nimport { ResponseMenuItem } from \"@/layout/_types\";\r\nimport { PostUserLogin, PostUserLogout } from \"@/api-mock\";\r\nimport { notification } from \"antd\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport menuStore from \"@/store/modules/menu\";\r\nimport routesStore from \"@/store/modules/routes\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst expiration = 24 * 60 * 60 * 1000; // 过期时间，单位：秒，默认24小时不登录即会过期\r\n\r\nconst { initMenus } = menuStore.actions;\r\nconst { updateRoutesState } = routesStore.actions;\r\n\r\nfunction handleMenusIcon(navs: ResponseMenuItem[], level = 0): ResponseMenuItem[] {\r\n  if (!navs) return [];\r\n  return navs.map((item: ResponseMenuItem) => {\r\n    const { icon = defaultIconName, children = [] } = item;\r\n    //为了保持统一及美观，对于嵌套两层以上的菜单项不展示图标\r\n    item.icon = level > 1 ? undefined : icon;\r\n    item.children = handleMenusIcon(children, level + 1);\r\n    return item;\r\n  });\r\n}\r\n\r\n/**\r\n * 登录\r\n * @param data\r\n * @returns\r\n */\r\nconst handleLoginIn = createAsyncThunk(\"userLoginIn\", async (payload: CommonObj, { dispatch, getState, extra }) => {\r\n  const { remember, ...args } = payload.params;\r\n  const { router, location } = payload.other;\r\n  if (remember) {\r\n    storage.setItem(\"rememberAccount\", args);\r\n  } else {\r\n    storage.removeItem(\"rememberAccount\");\r\n  }\r\n  return await PostUserLogin(args).then(res => {\r\n    const { user, navs, ...rest } = res as CommonObj;\r\n    const filterNavs = navs.filter((it: ResponseMenuItem) => {\r\n      const { auth_codes, path } = it;\r\n      if (path === \"demo\") return false; // 过滤掉demo示例代码\r\n      return true;\r\n      // if (!auth_codes) return true;\r\n      // return auth_codes.includes(user.type);\r\n    });\r\n    const newNavs = handleMenusIcon(filterNavs);\r\n    const { id = \"\", name = \"\", nickname = \"\", type_text = \"\" } = user;\r\n    user._title = name || nickname || type_text + id;\r\n    const expired = Date.now() + expiration;\r\n    const expiredDate = dayjs(expired).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    storage.setItem(\"userInfo\", user);\r\n    storage.setItem(\"token\", user?.token ?? \"\");\r\n    storage.setItem(\"allMenus\", newNavs);\r\n    storage.setItem(\"expiredDate\", expiredDate);\r\n    dispatch(initMenus(newNavs));\r\n    // 等路由创建好了，再进入\r\n    let toPath = defaultHomePath;\r\n    if (location.search) toPath = location.search.slice(10);\r\n    const timer = setInterval(() => {\r\n      const { isCreatedRoute } = getState().routes;\r\n      if (isCreatedRoute) {\r\n        router.push(toPath);\r\n        notification.success({\r\n          closeIcon: false,\r\n          style: { top: \"36px\" },\r\n          placement: \"topRight\",\r\n          message: \"登录成功\",\r\n          description: `欢迎回来，${user?.name ?? \"XXX\"}`,\r\n          duration: 3, //单位：秒\r\n        });\r\n        clearInterval(timer);\r\n      }\r\n    });\r\n    return {\r\n      user,\r\n      expired,\r\n      ...rest,\r\n    };\r\n  });\r\n});\r\nconst handleLoginInAfter = (builder: any) => {\r\n  const { pending, fulfilled, rejected } = handleLoginIn;\r\n  builder.addCase(fulfilled, (state: any, { payload }: CommonObj) => {\r\n    const { user, expired } = payload as CommonObj;\r\n    state.userInfo = user;\r\n    state.isLogin = true;\r\n    state.expired = expired;\r\n  });\r\n};\r\n\r\n/**\r\n * 用户登出\r\n */\r\nconst handleLoginOut = createAsyncThunk(\"userLoginOut\", async (payload: CommonObj, { dispatch, getState, extra }) => {\r\n  const { phone, isFetch = false } = payload.params;\r\n  const { router, location } = payload.other;\r\n  return await PostUserLogout({ phone }).then((res: any) => {\r\n    storage.getKeys().forEach((key: string) => {\r\n      const isRemove = ![\"rememberAccount\", \"set\", \"hasGuide\"].includes(key);\r\n      if (isRemove) storage.removeItem(key);\r\n    });\r\n    storage.clear(\"session\"); //清除sessionStorage的数据\r\n    // changeActiveIndex(0); //这个是hooks\r\n    showMessage(\"退出成功！\");\r\n    const { pathname } = location;\r\n    // const { path, fullPath, name } = route;\r\n    // router.push({\r\n    //   name: \"login\",\r\n    //   query:\r\n    //     name !== \"login\" && path !== defaultHomePath\r\n    //       ? { redirect: fullPath }\r\n    //       : undefined,\r\n    // });\r\n    let suffix = \"\";\r\n    if (![\"/login\", defaultHomePath].includes(pathname)) suffix = `?redirect=${pathname}`;\r\n    router.push(`/login${suffix}`);\r\n    dispatch(updateRoutesState({ isCreatedRoute: false }));\r\n    return res;\r\n  });\r\n});\r\n\r\nconst handleLoginOutAfter = (builder: any) => {\r\n  const { pending, fulfilled, rejected } = handleLoginOut;\r\n  builder.addCase(fulfilled, (state: any, { payload }: CommonObj) => {\r\n    //等一秒后再清空，避免userInfo无值时，有些页面会报错\r\n    // setTimeout(() => {  //这样处理会报错\r\n    state.isLogin = false;\r\n    state.userInfo = null;\r\n    state.expired = Date.now();\r\n    // }, 1000);\r\n  });\r\n};\r\n\r\ninterface UserInitState {\r\n  isLogin: boolean;\r\n  userInfo: CommonObj | null;\r\n  expired: number;\r\n}\r\nconst initialState: UserInitState = {\r\n  isLogin: false,\r\n  userInfo: storage.getItem(\"userInfo\"),\r\n  expired: new Date(storage.getItem(\"expiredDate\")).getTime() || Date.now(),\r\n};\r\n\r\nconst userSlice = createSlice({\r\n  name: \"user\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: builder => {\r\n    handleLoginInAfter(builder);\r\n    handleLoginOutAfter(builder);\r\n  },\r\n});\r\n\r\nexport default userSlice;\r\n\r\nexport const userExpose: CommonObj = {\r\n  handleLoginIn,\r\n  handleLoginOut,\r\n};\r\n","/**\r\n * 这个 sliceStore 仅用作测试，和语法示例，并未承载任何业务功能\r\n * redux-toolkit中的createAsyncThunk使用介绍\r\n * @link https://blog.csdn.net/weixin_57017198/article/details/133796912\r\n */\r\n\r\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\n// 通过 createAsyncThunk 创建一个异步的 Action 并导出\r\nexport const getAsyncCountAction = createAsyncThunk(\r\n  /**\r\n   * 一个字符串类型的 action 名称，用于在 Redux 中识别该 action。\r\n   * 该名称通常包含操作名称和状态\r\n   */\r\n  \"getBannerAction\",\r\n  /**\r\n   * 异步操作函数，该函数接收两个参数\r\n   * 第一个参数是 thunk 的 payload，也就是调用的时候传过来的\r\n   * 第二个参数是thunk对象\r\n   * dispatch\r\n   * 用于 dispatch 其他 action 的函数\r\n   * getState\r\n   * 用于获取当前 Redux store 中的 state 的函数\r\n   * extra\r\n   * 性是用于传递额外参数的对象\r\n   * @returns 返回的数据会被传入到 extraReducers 中函数的 action.payload 参数中\r\n   */\r\n  async (payload, { dispatch, getState, extra }) => {\r\n    // 执行异步操作\r\n    // const res = await axios.get('http://123.207.32.32:8000/home/multidata')\r\n    // // 返回的数据会被传入到 extraReducers 中函数的 action.payload 参数中\r\n    // return res.data.data.banner.list.length\r\n  },\r\n  {} // 可选的配置项\r\n);\r\n\r\n// 创建 slice。每一个 slice 里都包含了 reducer 和 actions，可以实现模块化的封装\r\nexport default createSlice({\r\n  //标记 slice，作为 action.type 的前缀\r\n  name: \"demo\",\r\n  //state 的初始值\r\n  initialState: {\r\n    num: 1,\r\n  },\r\n  // 相当于之前的 reducer 函数\r\n  reducers: {\r\n    /**\r\n     * 增加\r\n     * @produce 一个函数就相当于之前的 reducer 函数中的一个 case 语句\r\n     * @produce 相当于既定义了组件中 dispatch 使用的同步 Action（函数名就相当于 Action 的类型），也定义了 Reducer 更新状态函数（函数体就相当于 Reducer 更新 State）\r\n     */\r\n    addNum: (state, { type, payload }) => {\r\n      state.num += payload; // 可以直接使用赋值的方式修改 State，不再需要每一次都返回一个新的 state\r\n    },\r\n    // 减少\r\n    cutNum: (state, { type, payload }) => {\r\n      state.num -= payload;\r\n    },\r\n  },\r\n  /**\r\n   * 可以让 slice 处理在别处定义的 Action，包括由 createAsyncThunk 创建的异步的 Action或其他 slice 生成的 Action\r\n   */\r\n  extraReducers: builder => {\r\n    const { pending, fulfilled, rejected } = getAsyncCountAction;\r\n    builder\r\n      .addCase(pending, (state, { payload }) => {\r\n        console.log(\"pending--------------\");\r\n      })\r\n      .addCase(rejected, (state, { payload }) => {\r\n        console.log(\"rejected--------------\");\r\n      })\r\n      .addCase(fulfilled, (state, { payload }) => {\r\n        console.log(\"fulfilled--------------\");\r\n        // state.num = payload;\r\n      });\r\n  },\r\n  selectors: {\r\n    selectItems: state => state.num,\r\n  },\r\n});\r\n","/**\r\n * store状态管理\r\n * @link 使用参考：https://blog.csdn.net/kkkys_kkk/article/details/135442628,\r\n * @link 使用参考：https://blog.csdn.net/weixin_47002803/article/details/137052547\r\n * @link 使用示例：https://blog.csdn.net/Tory2/article/details/137491641\r\n * @link 使用示例: https://zhuanlan.zhihu.com/p/686433365\r\n * @link redux-persist 持久化储存(选学) https://blog.csdn.net/weixin_47002803/article/details/137052547\r\n */\r\n\r\nimport { ThunkAction, configureStore } from \"@reduxjs/toolkit\";\r\nimport { Action, combineReducers } from \"redux\";\r\nimport base from \"./modules/base\";\r\nimport set from \"./modules/set\";\r\nimport menu from \"./modules/menu\";\r\nimport dict from \"./modules/dict\";\r\nimport user, { userExpose } from \"./modules/user\";\r\nimport routes from \"./modules/routes\";\r\nimport demo from \"./modules/demo\";\r\n// import logger from 'redux-logger'; // 想要添加的中间件\r\n// import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst store = configureStore({\r\n  reducer: combineReducers({\r\n    set: set.reducer,\r\n    base: base.reducer,\r\n    menu: menu.reducer,\r\n    dict: dict.reducer,\r\n    user: user.reducer,\r\n    routes: routes.reducer,\r\n    demo: demo.reducer,\r\n  }),\r\n  // 使用回调函数来自定义中间件\r\n  // middleware: (getDefaultMiddleware) =>\r\n  //   getDefaultMiddleware()\r\n  //     .configure({ serializableCheck: false }) // 你可以禁用或配置默认中间件\r\n  //     .concat(logger), // 你可以添加更多中间件\r\n});\r\nexport default store;\r\n\r\nexport type SliceNames = keyof typeof sliceMap;\r\nexport const sliceMap = {\r\n  base,\r\n  set,\r\n  menu,\r\n  dict,\r\n  user: {\r\n    expose: userExpose,\r\n    ...user,\r\n  },\r\n  routes,\r\n  demo,\r\n};\r\n\r\nexport type RootDispatch = typeof store.dispatch;\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type RootThunk<ReturnType = void> = ThunkAction<ReturnType, RootState, unknown, Action<string>>;\r\n// export const useAppDispatch = () => useDispatch<RootDispatch>();\r\n// export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { SliceNames, sliceMap, type RootState, RootDispatch } from \"@/store\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\nconst getReducers = (actionsMap: CommonObj, dispatch: RootDispatch) => {\r\n  const map: CommonObj = {};\r\n  for (const key in actionsMap) {\r\n    if (!actionsMap[key]) return console.error(`不存在该storeKey：${key}`);\r\n    map[key] = (payload: any) => dispatch(actionsMap[key](payload));\r\n  }\r\n  return map;\r\n};\r\n\r\n/**\r\n * 后续再处理没有传入name时的逻辑\r\n */\r\nexport default (name: SliceNames): CommonObj => {\r\n  if (!name) throw Error(\"请传入 store 唯一ID名称\");\r\n  const slice = sliceMap[name];\r\n  if (!slice) throw new Error(`未找到名称为${name}的store slice`);\r\n  const dispatch = useDispatch();\r\n  const states = useSelector((state: RootState) => state[name]);\r\n  /**\r\n   * 重置state 后续再完善\r\n   * @param name\r\n   */\r\n  function resetState(name: SliceNames) {}\r\n  return {\r\n    ...states,\r\n    ...getReducers(slice.actions, dispatch),\r\n    ...getReducers(slice.expose, dispatch),\r\n  };\r\n};\r\n","/**\r\n * 自定义路由映射后，可以使用 router.push({name: 'home',query:{}}) 方式进行页面跳转\r\n */\r\n\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\nexport default {\r\n  home: \"/\",\r\n  login: \"/login\",\r\n} as CommonObj;\r\n","import { CommonObj } from \"@/vite-env\";\r\nimport { NavigateOptions, useNavigate } from \"react-router-dom\";\r\nimport { defaultHomePath, getUserInfo, storage, urlParamsToSearch } from \"../_utils\";\r\nimport routes from \"@/router/routes\";\r\nimport { ResponseMenuItem } from \"@/layout/_types\";\r\n\r\nexport interface RouteProps {\r\n  name: string;\r\n  query?: CommonObj;\r\n  replace?: boolean;\r\n}\r\n\r\nfunction toPathStr(path: string | RouteProps = \"\") {\r\n  if (typeof path === \"string\") return path;\r\n  const { name, query } = path;\r\n  const route = routes[name as string];\r\n  if (!route) throw new Error(`未找到路由名为${name}的路由地址`);\r\n  return `${route}?${urlParamsToSearch(query)}`;\r\n}\r\n\r\n/***\r\n * 获取当前路由页面是否授权\r\n */\r\nconst whiteList = [\"/login\", \"/403\", \"/404\", \"/500\"];\r\nexport function getRouteIsAuth(path: string, allNavs: ResponseMenuItem[] = storage.getItem(\"allMenus\"), type?: number) {\r\n  if (whiteList.some((it: string) => path.startsWith(it))) return true;\r\n  const userType = type ?? getUserInfo()?.type;\r\n  if (!allNavs?.length) return false;\r\n  let isAuth = false;\r\n  const newPath = path.split(\"?\")[0];\r\n  function cycleIsFind(arr: ResponseMenuItem[]): boolean {\r\n    if (!arr) return false;\r\n    return !!arr.find((item: ResponseMenuItem) => {\r\n      const { path, children, auth_codes } = item;\r\n      if (children?.length) {\r\n        isAuth = auth_codes?.length ? auth_codes.includes(userType) : true;\r\n        if (isAuth) return cycleIsFind(children);\r\n        return false;\r\n      } else {\r\n        const isFind = path === newPath;\r\n        if (isFind) {\r\n          isAuth = auth_codes?.length ? auth_codes.includes(userType) : true;\r\n        }\r\n        return isFind;\r\n      }\r\n    });\r\n  }\r\n  cycleIsFind(allNavs);\r\n  return isAuth;\r\n}\r\n\r\nexport default () => {\r\n  const navigate = useNavigate();\r\n  return {\r\n    go(num: number) {\r\n      navigate(num);\r\n    },\r\n    push(path: string | RouteProps) {\r\n      if (!path) return navigate(defaultHomePath);\r\n      const newPath = toPathStr(path);\r\n      const isAuth = getRouteIsAuth(newPath);\r\n      navigate(isAuth ? newPath : `/403?redirect=${newPath}`);\r\n    },\r\n    replace(path: string | RouteProps) {\r\n      if (!path) return navigate(defaultHomePath);\r\n      const newPath = toPathStr(path);\r\n      const isAuth = getRouteIsAuth(newPath);\r\n      navigate(isAuth ? newPath : `/403?redirect=${newPath}`, { replace: isAuth });\r\n    },\r\n    redirect(path: string | RouteProps) {\r\n      console.error(\"暂未处理重定向路由\");\r\n      if (!path) return navigate(defaultHomePath);\r\n      // if (!path) return;\r\n      // const newPath = toPathStr(path);\r\n      // navigate(newPath, { redirect: true } as NavigateOptions); // 不存在 redirect 属性\r\n    },\r\n  };\r\n};\r\n","import React, { ReactNode } from \"react\";\r\nimport { Empty } from \"antd\";\r\nimport { toCssVal } from \"@/components/_utils\";\r\nimport { StrNum } from \"@/vite-env\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  tips?: ReactNode;\r\n  size?: StrNum;\r\n  [key: string]: any;\r\n}\r\nexport default ({ className = \"\", style, tips = \"空空如也~\", size, ...restProps }: Props) => {\r\n  return (\r\n    <Empty\r\n      className={`${className}`}\r\n      description={tips}\r\n      imageStyle={size ? { height: toCssVal(size), width: toCssVal(size) } : undefined}\r\n      style={{ padding: `${toCssVal(Number(size) / 4)} 0`, ...style }}\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n","import { useRouter, useStoreSlice } from \"@/hooks\";\r\nimport { ResponseMenuItem } from \"@/layout/_types\";\r\n\r\nconst { VITE_APP_NAME } = import.meta.env;\r\n\r\nexport default () => {\r\n  const router = useRouter();\r\n  const { allMenus, updateMenuState } = useStoreSlice(\"menu\");\r\n  /**\r\n   * 路由跳转到子级第一个路径对应的页面\r\n   * @param menu\r\n   * @returns\r\n   */\r\n  function toFirstPath(menu: ResponseMenuItem) {\r\n    if (!menu?.children?.length) return;\r\n    const { children = [], path, label, link_type } = menu?.children[0];\r\n    // 0 | 1 | 2; //1 内部iframe渲染； 2, 新打开一个浏览器标签页展示\r\n    if (link_type) {\r\n      // router.push({ name: \"innerLink\", query: { url: path } });\r\n      // if (link_type === 1) {\r\n      //   return (document.title = label);\r\n      // }\r\n      // if (link_type === 2) {\r\n      //   return window.open(path, \"_blank\");\r\n      // }\r\n      // throw new Error(`暂不支持code为${link_type}的外链类型`);\r\n    } else {\r\n      if (children?.length) {\r\n        if (children[0]?.children?.length) {\r\n          toFirstPath(children[0]);\r\n        } else {\r\n          const { path, label } = children[0];\r\n          document.title = label || VITE_APP_NAME;\r\n          updateMenuState({ seledKeys: [path], updatedTitle: true });\r\n          router.push(path);\r\n        }\r\n      } else {\r\n        document.title = label || VITE_APP_NAME;\r\n        updateMenuState({ seledKeys: [path], updatedTitle: true });\r\n        router.push(path);\r\n      }\r\n    }\r\n  }\r\n  // 改变选中的菜单项\r\n  function changeActiveIndex(ind: number, toFirst = true, menus = allMenus) {\r\n    const subNavs = menus[ind]?.children ?? [];\r\n    updateMenuState({ activeIndex: ind, sideMenus: subNavs });\r\n    if (subNavs?.length) {\r\n      updateMenuState({ isCollapse: false });\r\n    }\r\n    if (subNavs?.length && toFirst) toFirstPath(menus[ind]);\r\n  }\r\n  return {\r\n    toFirstPath,\r\n    changeActiveIndex,\r\n  };\r\n};\r\n","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { useRouter, useStoreSlice } from \"@/hooks\";\r\nimport { convertToMenuNavs } from \"@/store/modules/menu\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { Menu } from \"antd\";\r\nimport { CSSProperties, useCallback, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport BaseEmpty from \"@/components/BaseEmpty\";\r\nimport useMenu from \"@/layout/_hooks\";\r\nimport { ResponseMenuItem } from \"@/layout/_types\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  mode?: \"horizontal\" | \"inline\";\r\n  [key: string]: any;\r\n}\r\n\r\nconst { VITE_APP_NAME } = import.meta.env;\r\n\r\nexport default ({ className = \"\", theme = \"dark\", ...restProps }: Props) => {\r\n  const { layout } = useStoreSlice(\"set\");\r\n  const { seledKeys, openKeys, allMenus, sideMenus, updateMenuState } = useStoreSlice(\"menu\");\r\n  const router = useRouter();\r\n  const location = useLocation();\r\n  const { changeActiveIndex } = useMenu();\r\n  const { pathname } = location;\r\n  const items = convertToMenuNavs(layout.type !== \"columns\" ? allMenus : sideMenus);\r\n  // 如果是分栏布局展示，则渲染的菜单项只是 sideMenus 的数据，所以openKeys, seledKeys 要区分处理\r\n  const isSubMenu = layout.type === \"columns\";\r\n  useEffect(() => {\r\n    setOpenAndSeledKeys(allMenus, pathname);\r\n  }, [allMenus, pathname]);\r\n  const handleSelect = useCallback((info: CommonObj) => {\r\n    const { key, selectedKeys, keyPath } = info;\r\n    const openKeys = keyPath.slice(1).reverse();\r\n    updateMenuState({ seledKeys: selectedKeys, openKeys });\r\n    router.push(key);\r\n  }, []);\r\n  const handleOpenChange = useCallback((openKeys: string[]) => {\r\n    updateMenuState({ openKeys });\r\n  }, []);\r\n  // 设置打开的菜单、被选中的菜单keys\r\n  function setOpenAndSeledKeys(menus: ResponseMenuItem[], pathName: string) {\r\n    let openKeys: string[] | undefined;\r\n    let seledKeys: string[] | undefined;\r\n    let rootInd: number = -1;\r\n    function findTarget(arr: ResponseMenuItem[], level = 0): ResponseMenuItem | undefined {\r\n      return arr.find((item: any, ind: number) => {\r\n        const { children, path, label = VITE_APP_NAME } = item;\r\n        if (children?.length) {\r\n          const target = findTarget(children as ResponseMenuItem[], level + 1);\r\n          if (target) {\r\n            document.title = target.label || VITE_APP_NAME;\r\n            updateMenuState({ updatedTitle: true });\r\n            if (isSubMenu) {\r\n              if (target?.children?.length) {\r\n                openKeys = [target.path];\r\n                seledKeys = [target.children[0]?.path];\r\n                // console.log(openKeys, seledKeys, \"seledKeys---------------------1\");\r\n              } else {\r\n                seledKeys = [target.path];\r\n                // console.log(openKeys, seledKeys, \"seledKeys---------------------2\");\r\n              }\r\n            } else {\r\n              openKeys = [target.path];\r\n              const tarPath = target?.children?.[0]?.path;\r\n              if (tarPath) seledKeys = [tarPath];\r\n            }\r\n            if (level === 0) rootInd = ind;\r\n          }\r\n          return !!target;\r\n        } else {\r\n          const isFind = path === pathName;\r\n          if (isFind) {\r\n            document.title = label;\r\n            updateMenuState({ updatedTitle: true });\r\n            if (level === 0) rootInd = ind;\r\n            if (children?.length) {\r\n              openKeys = [path];\r\n            } else {\r\n              seledKeys = [path];\r\n            }\r\n            // console.log(openKeys, seledKeys, \"seledKeys---------------------3\");\r\n          }\r\n          return isFind;\r\n        }\r\n      });\r\n    }\r\n    const target = findTarget(menus);\r\n    changeActiveIndex(rootInd, false);\r\n    updateMenuState({ openKeys, seledKeys });\r\n    return target?.path; // rootPath\r\n  }\r\n  return items.length > 0 ? (\r\n    <Menu\r\n      style={{ overflow: \"auto\" }}\r\n      className={`${className}`}\r\n      onSelect={handleSelect}\r\n      onOpenChange={handleOpenChange}\r\n      openKeys={openKeys}\r\n      selectedKeys={seledKeys}\r\n      theme={theme}\r\n      items={items}\r\n      {...restProps}\r\n    />\r\n  ) : (\r\n    <div className={`${s[\"empty-box\"]} f-1 f-fs-c-c`}>\r\n      <BaseEmpty className=\"mt-h\" size=\"50\" tips={<div style={{ color: \"#999\", fontSize: \"12px\" }}>无数据</div>} />\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { useRouter, useStoreSlice } from \"@/hooks\";\r\nimport { defaultHomePath } from \"@/utils\";\r\nimport SideMenu from \"../SideMenu\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  defaultSelectedKeys?: string[];\r\n  defaultOpenKeys?: string[];\r\n}\r\nconst { VITE_APP_NAME } = import.meta.env;\r\n\r\nexport default ({ className = \"\" }: Props) => {\r\n  const { isCollapse } = useStoreSlice(\"menu\");\r\n  const router = useRouter();\r\n  return (\r\n    <div className={`${className} ${s.menu} ${isCollapse ? s.collapsed : \"\"} f-sb-s-c`}>\r\n      <div onClick={() => router.push(defaultHomePath)} className={`${s.title} f-0 f-c-c line-2`}>\r\n        {isCollapse ? VITE_APP_NAME?.slice(0, 1) : VITE_APP_NAME}\r\n      </div>\r\n      <SideMenu className=\"f-1 all-hide-scroll\" inlineCollapsed={isCollapse} mode=\"inline\" />\r\n    </div>\r\n  );\r\n};\r\n","import { Divider, Button } from \"antd\";\r\nimport type { MenuProps } from \"antd\";\r\nimport { MenusDisabledCase } from \"..\";\r\nimport {\r\n  CloseOutlined,\r\n  ColumnWidthOutlined,\r\n  CloseCircleOutlined,\r\n  ArrowRightOutlined,\r\n  ArrowLeftOutlined,\r\n  FileDoneOutlined,\r\n  CopyOutlined,\r\n  SnippetsOutlined,\r\n  ReloadOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\nexport type CloseMenuType =\r\n  | \"closeSelf\" //点击标签右侧的关闭图标\r\n  | \"closeCurrent\" //点击右键菜单的关闭按钮\r\n  | \"closeOther\"\r\n  | \"closeAll\"\r\n  | \"closeToRight\"\r\n  | \"closeToLeft\"\r\n  | \"reload\"\r\n  | \"closeSaved\"\r\n  | \"copyPath\"\r\n  | \"copyWholePath\";\r\ninterface Props {\r\n  handleClose: (type: CloseMenuType) => void;\r\n  disabledCase: MenusDisabledCase;\r\n}\r\nconst btnProps: CommonObj = {\r\n  type: \"text\",\r\n  size: \"small\",\r\n  style: { width: \"100%\", textAlign: \"left\" },\r\n};\r\nexport default ({ handleClose, disabledCase }: Props) => {\r\n  return [\r\n    {\r\n      key: \"closeCurrent\",\r\n      disabled: disabledCase.closeCurrent,\r\n      label: (\r\n        <Button\r\n          icon={<CloseOutlined />}\r\n          onClick={() => handleClose(\"closeCurrent\")}\r\n          disabled={disabledCase.closeCurrent}\r\n          {...btnProps}\r\n        >\r\n          关闭\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"closeOther\",\r\n      disabled: disabledCase.closeOther,\r\n      label: (\r\n        <Button\r\n          icon={<ColumnWidthOutlined />}\r\n          onClick={() => handleClose(\"closeOther\")}\r\n          disabled={disabledCase.closeOther}\r\n          {...btnProps}\r\n        >\r\n          关闭其他\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"closeAll\",\r\n      disabled: disabledCase.closeAll,\r\n      label: (\r\n        <Button\r\n          icon={<CloseCircleOutlined />}\r\n          onClick={() => handleClose(\"closeAll\")}\r\n          disabled={disabledCase.closeAll}\r\n          {...btnProps}\r\n        >\r\n          全部关闭\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"d-0\",\r\n      label: <Divider {...btnProps} />,\r\n    },\r\n    {\r\n      key: \"closeToRight\",\r\n      disabled: disabledCase.closeToRight,\r\n      label: (\r\n        <Button\r\n          icon={<ArrowRightOutlined />}\r\n          onClick={() => handleClose(\"closeToRight\")}\r\n          disabled={disabledCase.closeToRight}\r\n          {...btnProps}\r\n        >\r\n          关闭到右侧\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"closeToLeft\",\r\n      disabled: disabledCase.closeToLeft,\r\n      label: (\r\n        <Button\r\n          icon={<ArrowLeftOutlined />}\r\n          onClick={() => handleClose(\"closeToLeft\")}\r\n          disabled={disabledCase.closeToLeft}\r\n          {...btnProps}\r\n        >\r\n          关闭到左侧\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"closeSaved\",\r\n      disabled: disabledCase.closeSaved,\r\n      label: (\r\n        <Button\r\n          icon={<FileDoneOutlined />}\r\n          onClick={() => handleClose(\"closeSaved\")}\r\n          disabled={disabledCase.closeSaved}\r\n          {...btnProps}\r\n        >\r\n          关闭已保存\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"d-1\",\r\n      label: <Divider {...btnProps} />,\r\n    },\r\n    {\r\n      key: \"copyPath\",\r\n      disabled: disabledCase.copyPath,\r\n      label: (\r\n        <Button icon={<CopyOutlined />} onClick={() => handleClose(\"copyPath\")} disabled={disabledCase.copyPath} {...btnProps}>\r\n          复制简单路径\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"copyWholePath\",\r\n      disabled: disabledCase.copyWholePath,\r\n      label: (\r\n        <Button\r\n          icon={<SnippetsOutlined />}\r\n          onClick={() => handleClose(\"copyWholePath\")}\r\n          disabled={disabledCase.copyWholePath}\r\n          {...btnProps}\r\n        >\r\n          复制完整路径\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      key: \"d-2\",\r\n      label: <Divider {...btnProps} />,\r\n    },\r\n    {\r\n      key: \"reload\",\r\n      disabled: disabledCase.reload,\r\n      label: (\r\n        <Button icon={<ReloadOutlined />} onClick={() => handleClose(\"reload\")} disabled={disabledCase.reload} {...btnProps}>\r\n          刷新\r\n        </Button>\r\n      ),\r\n    },\r\n  ] as MenuProps[\"items\"];\r\n};\r\n","import { Tag, Dropdown } from \"antd\";\r\nimport { CSSProperties } from \"react\";\r\nimport getMenus, { CloseMenuType } from \"./menus\";\r\nimport { MenusDisabledCase } from \"..\";\r\nimport cssVars from \"@/assets/styles/_var.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  children?: any;\r\n  active?: boolean;\r\n  closable?: boolean;\r\n  icon?: any;\r\n  onClick?: () => void;\r\n  onClose?: (type: CloseMenuType) => void;\r\n  open?: boolean;\r\n  onOpenChange?: (open: boolean) => void;\r\n  disabledCase: MenusDisabledCase;\r\n}\r\nexport default ({\r\n  className = \"\",\r\n  style,\r\n  children,\r\n  active = false,\r\n  closable = true,\r\n  icon,\r\n  onClose,\r\n  onClick,\r\n  open = false,\r\n  onOpenChange,\r\n  disabledCase,\r\n}: Props) => {\r\n  function handleClose(type: CloseMenuType) {\r\n    onClose?.(type);\r\n  }\r\n  return (\r\n    <Dropdown\r\n      // arrow\r\n      // arrow={{ pointAtCenter: true }}\r\n      menu={{ items: getMenus({ handleClose, disabledCase }) }}\r\n      trigger={[\"contextMenu\"]}\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n    >\r\n      <Tag\r\n        className={`${className}`}\r\n        style={style}\r\n        // style={Object.assign(\r\n        //   {\r\n        //     maxWidth: \"8em\",\r\n        //     overflow: \"hidden\",\r\n        //     textOverflow: \"ellipsis\",\r\n        //     whiteSpace: \"nowrap\",\r\n        //   },\r\n        //   style\r\n        // )}\r\n        color={active ? cssVars.colorPrimary : \"blue\"}\r\n        // color={active ? cssVars.colorPrimary : \"green\"}\r\n        closable={closable}\r\n        icon={icon}\r\n        onClick={onClick}\r\n        onClose={() => handleClose(\"closeSelf\")}\r\n      >\r\n        {children}\r\n      </Tag>\r\n    </Dropdown>\r\n  );\r\n};\r\n","/**\r\n * 页面标签组件\r\n */\r\nimport { HomeOutlined, DoubleLeftOutlined, DoubleRightOutlined } from \"@ant-design/icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { storage, copyText, defaultHomePath, showMessage } from \"@/utils\";\r\nimport { useEventListener, useRouter, useStoreSlice } from \"@/hooks\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport PageTagItem from \"./TagItem\";\r\nimport { CloseMenuType } from \"./TagItem/menus\";\r\nimport { Button } from \"antd\";\r\nimport s from \"./index.module.less\";\r\n\r\n// export interface MenusDisabledCase { [key in CloseMenuType]: boolean }\r\nexport interface MenusDisabledCase {\r\n  [key: string]: boolean;\r\n}\r\ninterface Props {\r\n  className?: string;\r\n  reload?: (cb?: () => void) => void;\r\n}\r\ninterface PageTagItem {\r\n  text: string;\r\n  path: string;\r\n}\r\nexport default ({ className = \"\", reload }: Props) => {\r\n  const { layout } = useStoreSlice(\"set\");\r\n  const { updatedTitle, updateMenuState } = useStoreSlice(\"menu\");\r\n  const location = useLocation();\r\n  const router = useRouter();\r\n  const contMenuIndRef = useRef(-2);\r\n  const scrollRef = useRef<any>(null);\r\n  const [disabled, setDisabled] = useState({\r\n    left: true,\r\n    right: true,\r\n  });\r\n  const [tags, setTags] = useState<PageTagItem[]>(storage.getItem(\"pageTags\") || []);\r\n  const [menusDisabledCase, setMenusDisabledCase] = useState<MenusDisabledCase>({});\r\n  const { pathname } = location;\r\n  function getMenusDisabledCase() {\r\n    const menuInd = contMenuIndRef.current;\r\n    const menuPath = menuInd < 0 ? defaultHomePath : tags[menuInd].path;\r\n    const isHome = menuPath === defaultHomePath;\r\n    const isFirst = menuInd === 0;\r\n    const isLast = menuInd === tags.length - 1;\r\n    const isEmpty = !tags.length;\r\n    const isOnly = tags.length === 1;\r\n    const isActive = pathname === menuPath;\r\n    const map: MenusDisabledCase = {\r\n      closeCurrent: isHome,\r\n      closeOther: isHome ? isEmpty : isOnly,\r\n      closeToRight: isLast,\r\n      closeToLeft: isHome || isFirst,\r\n      closeAll: isEmpty,\r\n      closeSaved: true,\r\n      copyPath: false,\r\n      copyWholePath: false,\r\n      reload: !isActive,\r\n    };\r\n    return map;\r\n  }\r\n  useEventListener(\"beforeunload\", () => storage.setItem(\"pageTags\", tags), [tags]);\r\n  // onResize 和 tags 长度变化时，都要执行一次initDisabled 函数\r\n  useEventListener(\"resize\", initDisabled, []);\r\n  useEffect(() => {\r\n    initDisabled();\r\n  }, [tags]);\r\n  //监听路由变化\r\n  useEffect(() => {\r\n    updatedTitle && addRoute({ text: document.title, path: pathname });\r\n  }, [pathname, updatedTitle]);\r\n  function initDisabled() {\r\n    //必须要使用setTimeout，不然会引起bug（貌似onArrowBtn 中的 ele.scrollTo(left, 0) 是个异步函数，暂不清楚原因）\r\n    setTimeout(() => {\r\n      if (!scrollRef.current) return;\r\n      const { scrollWidth, clientWidth, offsetWidth, scrollLeft } = scrollRef.current;\r\n      const width = clientWidth || offsetWidth;\r\n      setDisabled({\r\n        left: scrollLeft <= 0,\r\n        right: scrollLeft + width >= scrollWidth,\r\n      });\r\n    }, 300);\r\n  }\r\n  //点击左右箭头按钮\r\n  function onArrowBtn(direction = 1, num = 300) {\r\n    const ele = scrollRef?.current;\r\n    const { scrollLeft } = ele;\r\n    const left = scrollLeft + num * direction;\r\n    ele.scrollTo(left, 0);\r\n    initDisabled();\r\n  }\r\n  //将路由添加进历史记录\r\n  function addRoute(data: PageTagItem) {\r\n    const { text, path } = data;\r\n    const target = tags.find(it => it.path === path);\r\n    if (!target && path !== defaultHomePath) {\r\n      if (text === \"404\") {\r\n        data.text = path;\r\n      }\r\n      setTags(tags.concat(data));\r\n    }\r\n    updateMenuState({ updatedTitle: false });\r\n  }\r\n  //处理右键菜单的关闭事件\r\n  function handleClose(type: CloseMenuType, ind: number) {\r\n    let cloneTags = tags.slice(); //深拷贝\r\n    let newPath = \"\";\r\n    const menuInd = type === \"closeSelf\" ? ind : contMenuIndRef.current;\r\n    const isHome = menuInd === -1;\r\n    const isActive = pathname === tags[menuInd].path;\r\n    if ([\"closeCurrent\", \"closeSelf\"].includes(type)) {\r\n      cloneTags.splice(ind, 1);\r\n      if (isActive) {\r\n        const nextInd = ind < cloneTags.length ? ind : ind - 1;\r\n        newPath = cloneTags?.[nextInd]?.path || defaultHomePath;\r\n      }\r\n    } else if (type === \"closeOther\") {\r\n      cloneTags = isHome ? [] : cloneTags.slice(menuInd, menuInd + 1);\r\n      newPath = isHome ? defaultHomePath : cloneTags[0].path;\r\n    } else if (type === \"closeToRight\") {\r\n      cloneTags = cloneTags.slice(0, ind + 1);\r\n      const findInd = cloneTags.findIndex(it => it.path === pathname);\r\n      const isExist = findInd > 0 && findInd < cloneTags.length;\r\n      if (!isExist) {\r\n        newPath = cloneTags.slice(-1)?.[0].path || defaultHomePath;\r\n      }\r\n    } else if (type === \"closeToLeft\") {\r\n      cloneTags = cloneTags.slice(ind);\r\n      const findInd = cloneTags.findIndex(it => it.path === pathname);\r\n      const isExist = findInd > 0 && findInd < cloneTags.length;\r\n      if (!isExist) {\r\n        newPath = cloneTags[0].path;\r\n      }\r\n    } else if (type === \"closeAll\") {\r\n      cloneTags = [];\r\n      newPath = defaultHomePath;\r\n    } else if (type === \"reload\") {\r\n      reload?.(() => showMessage(\"刷新成功\"));\r\n    } else if (type === \"copyPath\") {\r\n      copyText(cloneTags[ind]?.path || defaultHomePath);\r\n    } else if (type === \"copyWholePath\") {\r\n      const path = isHome ? defaultHomePath : cloneTags[menuInd]!.path;\r\n      copyText(window.location.origin + path);\r\n    } else if (type === \"closeSaved\") {\r\n      showMessage(\"暂未开通关闭已保存功能\", \"warning\");\r\n    } else {\r\n      showMessage(\"暂不支持此类型：\" + type, \"error\");\r\n    }\r\n    setTags(cloneTags);\r\n    // router.push(newPath);\r\n    contMenuIndRef.current = -2;\r\n  }\r\n  function handleOpenChange(ind: number, open: boolean) {\r\n    contMenuIndRef.current = open ? ind : -2;\r\n    setMenusDisabledCase(getMenusDisabledCase());\r\n  }\r\n\r\n  return (\r\n    <div className={`${className} ${s[\"page-tags\"]} f-sb-c`}>\r\n      <PageTagItem\r\n        onClick={() => router.push(defaultHomePath)}\r\n        className={`${s[\"tag-item\"]} f-0`}\r\n        style={{ marginInlineStart: 8, marginInlineEnd: 0 }}\r\n        active={pathname === defaultHomePath}\r\n        icon={<HomeOutlined />}\r\n        closable={false}\r\n        onClose={(type: CloseMenuType) => handleClose(type, -1)}\r\n        open={contMenuIndRef.current === -1}\r\n        onOpenChange={(open: boolean) => handleOpenChange(-1, open)}\r\n        disabledCase={menusDisabledCase}\r\n      >\r\n        首页\r\n      </PageTagItem>\r\n      {/* 给定一个宽度技术（例：1px）才能按预期撑开 */}\r\n      <div className=\"f-sb-c f-1\" style={{ width: \"1px\" }}>\r\n        <Button\r\n          type=\"link\"\r\n          size=\"small\"\r\n          className={`f-0`}\r\n          style={{ marginRight: 0, width: \"32px\" }}\r\n          onClick={() => onArrowBtn(-1)}\r\n          icon={<DoubleLeftOutlined />}\r\n          disabled={disabled.left}\r\n        />\r\n        <div className={`${s[\"scroll-bar\"]} all-hide-scroll f-1`} ref={scrollRef}>\r\n          {tags.map((item: any, ind: number) => {\r\n            return (\r\n              <PageTagItem\r\n                onClick={() => router.push(item.path)}\r\n                className={`${s[\"tag-item\"]}`}\r\n                active={pathname === item.path}\r\n                onClose={(type: CloseMenuType) => handleClose(type, ind)}\r\n                open={contMenuIndRef.current === ind}\r\n                onOpenChange={(open: boolean) => handleOpenChange(ind, open)}\r\n                disabledCase={menusDisabledCase}\r\n                key={item.path}\r\n              >\r\n                {item.text}\r\n              </PageTagItem>\r\n            );\r\n          })}\r\n        </div>\r\n        <Button\r\n          type=\"link\"\r\n          size=\"small\"\r\n          className={`f-0`}\r\n          style={{ width: \"32px\" }}\r\n          onClick={() => onArrowBtn(1)}\r\n          icon={<DoubleRightOutlined />}\r\n          disabled={disabled.right}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { Drawer } from \"antd\";\r\n\r\nexport type PlacementType = \"top\" | \"right\" | \"bottom\" | \"left\";\r\ninterface Props {\r\n  className?: string;\r\n  title?: string;\r\n  open?: boolean;\r\n  placement?: PlacementType;\r\n  onClose?: () => void;\r\n  children?: any;\r\n}\r\nconst defaultAttrs: CommonObj = {\r\n  title: \"drawer标题\",\r\n  width: \"auto\",\r\n  placement: \"right\",\r\n  maskClosable: false,\r\n  // forceRender: true\r\n};\r\nexport default ({ className = \"\", children, open, ...restProps }: Props) => {\r\n  // const newAttrs = useMemo(() => {\r\n  //   return Object.assign({}, defaultAttrs, restProps);\r\n  // }, []);\r\n  return (\r\n    <Drawer\r\n      className={`${className}`}\r\n      open={open}\r\n      {...Object.assign({}, defaultAttrs, restProps)}\r\n    >\r\n      {children}\r\n    </Drawer>\r\n  );\r\n};\r\n","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { Modal } from \"antd\";\r\nimport { merge } from \"lodash\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  title?: string;\r\n  open?: boolean;\r\n  width?: string | number;\r\n  children?: any;\r\n  footer?: any;\r\n  onOk?: () => void;\r\n  onCancel?: () => void;\r\n}\r\nconst defaultAttrs: CommonObj = {\r\n  title: \"Modal标题\",\r\n  width: \"fit-content\",\r\n  maskClosable: false,\r\n  // forceRender: true,\r\n  // onCancel: ()=>\r\n};\r\nexport default ({ className = \"\", children, open, ...restProps }: Props) => {\r\n  // const newAttrs = useMemo(() => {\r\n  //   return Object.assign({}, defaultAttrs, restProps);\r\n  // }, []);\r\n  return (\r\n    <Modal className={`${className}`} open={open} {...Object.assign({}, defaultAttrs, restProps)}>\r\n      {children}\r\n    </Modal>\r\n  );\r\n};\r\n","import BaseDrawer, { PlacementType } from \"@/components/BaseDrawer\";\r\nimport BaseModal from \"@/components/BaseModal\";\r\nimport { useState, createContext } from \"react\";\r\nimport { showMessage, sortObjArrByKey } from \"@/components/_utils\";\r\nimport { CommonObj, SetTimeout } from \"@/vite-env\";\r\n\r\ntype BaseRenderData = any;\r\ninterface Props {\r\n  children: any;\r\n}\r\nexport type PopupType = \"drawer\" | \"modal\";\r\nexport type OpenPopupType = ModalPopup | DrawerPopup | PopupType | ModalId | DrawerId; //打开的弹窗类型\r\nexport interface DrawerHeadAttrs {\r\n  title?: string;\r\n  [key: string]: any;\r\n}\r\nexport interface ModalHeadAttrs {\r\n  title?: string;\r\n  [key: string]: any;\r\n}\r\nexport interface DrawerPopup {\r\n  id: number;\r\n  name: \"drawer\";\r\n  open: boolean;\r\n  attrs: {\r\n    title: string;\r\n    placement?: PlacementType;\r\n    [key: string]: any;\r\n  };\r\n  body: BaseRenderData;\r\n  createAt: number; //创建时间戳\r\n}\r\nexport interface ModalPopup {\r\n  id: number;\r\n  name: \"modal\";\r\n  open: boolean;\r\n  attrs: {\r\n    title?: string;\r\n    [key: string]: any;\r\n  };\r\n  body: BaseRenderData;\r\n  foot?: FootRenderData; //底部按钮或自定义节点\r\n  createAt: number; //创建时间戳\r\n}\r\nexport type ClosePopupType = OpenPopupType | number | \"all\"; //关闭的弹窗类型：'all' 关闭所有modal、drawer；number：关闭顶层的 n 个弹窗\r\nexport type CloseModalType = ModalPopup | ModalId | \"all\";\r\nexport type CloseDrawerType = DrawerPopup | DrawerId | \"all\";\r\nexport type DrawerHeadTypes = string | DrawerHeadAttrs;\r\nexport type ModalHeadTypes = string | ModalHeadAttrs;\r\nexport type ModalId = `modal-${number}`; //id必须大于等于0，示例：\"modal-1\"\r\nexport type DrawerId = `drawer-${number}`; //id必须大于等于0，示例：\"drawer-1\"\r\nexport type FootRenderData = null | boolean | BaseRenderData;\r\n\r\nexport interface PopupContextProps {\r\n  openDrawer: (head: DrawerHeadTypes | DrawerId, body?: BaseRenderData) => void;\r\n  closeDrawer: (popup: CloseDrawerType, destroyed?: boolean) => void;\r\n  openModal: (head: ModalHeadTypes | ModalId, body?: BaseRenderData, foot?: FootRenderData) => void;\r\n  closeModal: (popup: CloseModalType, destroyed?: boolean) => void;\r\n  openPopup: (\r\n    head: DrawerHeadTypes | ModalHeadTypes | ModalId | DrawerId,\r\n    body: BaseRenderData,\r\n    type?: PopupType | FootRenderData,\r\n    foot?: FootRenderData\r\n  ) => void;\r\n  closePopup: (type?: ClosePopupType, destroyed?: boolean) => void;\r\n  getPopups: (type?: PopupType) => void;\r\n}\r\n\r\nexport const PopupContext = createContext({} as PopupContextProps);\r\n\r\nconst closeDelay = 500; //延迟关闭弹出层的时间（让关闭动画过渡完，再销毁组件，单位毫秒）\r\nlet modalTimer: SetTimeout = null;\r\nlet drawerTimer: SetTimeout = null;\r\n\r\nexport default ({ children }: Props) => {\r\n  const [drawers, setDrawers] = useState<DrawerPopup[]>([]);\r\n  const [modals, setModals] = useState<ModalPopup[]>([]);\r\n\r\n  /**\r\n   * 构造生成弹出层head的新的attrs对象\r\n   */\r\n  function getHeadAttrs(head: any, popupId: DrawerId | ModalId): any {\r\n    const type = popupId.split(\"-\")[0] as PopupType;\r\n    const closeKeyMap: CommonObj = {\r\n      drawer: \"onClose\",\r\n      modal: \"onCancel\",\r\n    };\r\n    if (typeof head === \"object\")\r\n      return Object.assign(\r\n        { [closeKeyMap[type]]: () => closePopup(popupId) },\r\n        popupId.startsWith(\"modal\") ? { onOk: () => closePopup(popupId) } : null,\r\n        head\r\n      );\r\n    return {\r\n      title: head,\r\n      [closeKeyMap[type]]: () => closePopup(popupId),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 抽屉 drawer\r\n   */\r\n  function openDrawer(head: DrawerHeadTypes | DrawerId, body: BaseRenderData = \"默认 drawer body 内容\") {\r\n    if (drawerTimer) return showMessage(\"您的操作太频繁了\", \"warning\");\r\n    if (typeof head === \"string\" && head.startsWith(\"drawer-\")) {\r\n      const id = Number(head.split(\"-\")[1]);\r\n      const target = drawers.find(it => it.id === id);\r\n      if (target) return (target.open = true);\r\n      return showMessage(`不存在抽屉【drawer-${id}】`, \"error\");\r\n    }\r\n    const id = (drawers.at(-1)?.id ?? -1) + 1;\r\n    drawers.push({\r\n      id,\r\n      name: \"drawer\",\r\n      open: true,\r\n      attrs: getHeadAttrs(head, `drawer-${id}`),\r\n      body,\r\n      createAt: Date.now(),\r\n    });\r\n    setDrawers(drawers.slice());\r\n  }\r\n\r\n  function closeDrawer(popup: CloseDrawerType = `drawer-${drawers.at(-1)?.id ?? 0}`, destroyed = true) {\r\n    if (popup === \"all\") {\r\n      drawers.length = 0;\r\n    } else {\r\n      const ind = drawers.findIndex(item => {\r\n        if (typeof popup !== \"string\") return item === popup;\r\n        return item.id === Number(popup.split(\"-\")[1]);\r\n      });\r\n      if (ind === -1) return;\r\n      drawers[ind].open = false;\r\n      setDrawers(drawers.slice());\r\n      if (!destroyed) return;\r\n      drawerTimer = setTimeout(() => {\r\n        drawers.splice(ind, 1);\r\n        setDrawers(drawers.slice());\r\n        drawerTimer = null;\r\n      }, closeDelay);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对话框modal\r\n   */\r\n  function openModal(head: ModalHeadTypes | ModalId, body: BaseRenderData = \"默认 modal body 内容\", foot: FootRenderData = null) {\r\n    if (modalTimer) return showMessage(\"您的操作太频繁了\", \"warning\");\r\n    if (typeof head === \"string\" && head.startsWith(\"modal-\")) {\r\n      const id = Number(head.split(\"-\")[1]);\r\n      const target = modals.find(it => it.id === id);\r\n      if (target) return (target.open = true);\r\n      return showMessage(`不存在模态框【modal-${id}】`, \"error\");\r\n    }\r\n    const id = (modals.at(-1)?.id ?? -1) + 1;\r\n    modals.push({\r\n      id,\r\n      name: \"modal\",\r\n      open: true,\r\n      attrs: getHeadAttrs(head, `modal-${id}`),\r\n      body,\r\n      foot,\r\n      createAt: Date.now(),\r\n    });\r\n    setModals(modals.slice());\r\n  }\r\n\r\n  function closeModal(popup: CloseModalType = `modal-${modals.at(-1)?.id ?? 0}`, destroyed = true) {\r\n    if (popup === \"all\") {\r\n      modals.length = 0;\r\n    } else {\r\n      const ind = modals.findIndex((item: ModalPopup) => {\r\n        if (typeof popup !== \"string\") return item === popup;\r\n        return item.id === Number(popup.split(\"-\")[1]);\r\n      });\r\n      if (ind === -1) return;\r\n      modals[ind].open = false;\r\n      setModals(modals.slice());\r\n      if (!destroyed) return;\r\n      modalTimer = setTimeout(() => {\r\n        modals.splice(ind, 1);\r\n        setModals(modals.slice());\r\n        modalTimer = null;\r\n      }, closeDelay);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 弹出层 drawer, modal\r\n   */\r\n  function openPopup(\r\n    head: DrawerHeadTypes | ModalHeadTypes | ModalId | DrawerId,\r\n    body?: BaseRenderData,\r\n    type: OpenPopupType | FootRenderData = \"modal\",\r\n    foot: FootRenderData = null\r\n  ) {\r\n    if (typeof head === \"string\") {\r\n      const isModId = head.startsWith(\"modal-\");\r\n      if (isModId || head.startsWith(\"drawer-\")) return isModId ? openModal(head) : openDrawer(head);\r\n    }\r\n    if (type === \"modal\") {\r\n      openModal(head, body, foot);\r\n    } else if (type === \"drawer\") {\r\n      openDrawer(head, body);\r\n    } else {\r\n      // 如果不是弹窗类型，则打开model，且type的值作为modal的footer渲染\r\n      openModal(head, body, type);\r\n    }\r\n  }\r\n  /**\r\n   * 获取顶层弹窗的id数组\r\n   */\r\n  function getTopPopupIds(num = 1): (DrawerId | ModalId)[] {\r\n    if (num <= 0) throw new Error(\"请传入一个正整数\");\r\n    const popups = sortObjArrByKey([...modals, ...drawers], \"createAt\", \"desc\");\r\n    const topPops = popups.slice(0, num);\r\n    return topPops?.map(it => `${it.name}-${it.id}` as DrawerId | ModalId);\r\n  }\r\n\r\n  function closePopup(popup: ClosePopupType = 1, destroyed = true) {\r\n    if (popup === \"all\") {\r\n      closeModal(popup);\r\n      closeDrawer(popup);\r\n    } else if (typeof popup === \"string\") {\r\n      const isModal = popup.startsWith(\"modal\");\r\n      const isId = popup.includes(\"-\");\r\n      if (isModal) {\r\n        const isAll = popup === \"modal\";\r\n        const m = isId ? (popup as CloseModalType) : isAll ? \"all\" : undefined;\r\n        closeModal(m, destroyed);\r\n      } else {\r\n        const isAll = popup === \"drawer\";\r\n        const d = isId ? (popup as CloseDrawerType) : isAll ? \"all\" : undefined;\r\n        closeDrawer(d, destroyed);\r\n      }\r\n    } else if (typeof popup === \"number\") {\r\n      const ids = getTopPopupIds(popup);\r\n      ids.forEach((id: DrawerId | ModalId) => closePopup(id));\r\n    } else {\r\n      const isModal = popup.name === \"modal\";\r\n      isModal ? closeModal(popup) : closeDrawer(popup);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取弹出层栈\r\n   * @param type 弹出层类型，可选值：modal、drawer\r\n   * @returns\r\n   */\r\n  function getPopups(type?: PopupType) {\r\n    if (type === \"modal\") return JSON.parse(JSON.stringify(modals));\r\n    if (type === \"drawer\") return JSON.parse(JSON.stringify(drawers));\r\n    return JSON.parse(JSON.stringify({ modals, drawers }));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PopupContext.Provider\r\n        value={{\r\n          openDrawer,\r\n          closeDrawer,\r\n          openModal,\r\n          closeModal,\r\n          openPopup,\r\n          closePopup,\r\n          getPopups,\r\n        }}\r\n      >\r\n        {children}\r\n        {/* 全局抽屉 */}\r\n        {drawers.map((drawer, ind) => {\r\n          const { open, attrs, body } = drawer;\r\n          return (\r\n            <BaseDrawer open={open} {...attrs} key={ind}>\r\n              {body}\r\n            </BaseDrawer>\r\n          );\r\n        })}\r\n        {/* 全局Modal对话框 */}\r\n        {modals.map((modal, ind) => {\r\n          const { open, body, foot, attrs } = modal;\r\n          return (\r\n            <BaseModal open={open} footer={foot === true ? undefined : foot} {...attrs} key={ind}>\r\n              {body}\r\n            </BaseModal>\r\n          );\r\n        })}\r\n      </PopupContext.Provider>\r\n    </>\r\n  );\r\n};\r\n","import BaseFormItem, { FormField, FormFieldAttrs } from \"@/components/BaseFormItem\";\r\nimport { Row } from \"antd\";\r\nimport { Gutter } from \"antd/es/grid/row\";\r\n\r\nexport type AlignType = \"top\" | \"middle\" | \"bottom\" | \"stretch\";\r\nexport type ScreenSize = \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\r\nexport type JustifyType = \"start\" | \"end\" | \"center\" | \"space-around\" | \"space-between\" | \"space-evenly\";\r\n\r\ninterface Props {\r\n  fields?: FormField[];\r\n  pureText?: boolean;\r\n  readOnly?: boolean;\r\n  labelWidth?: string;\r\n  rowAttrs?: {\r\n    align?: AlignType | { [key in ScreenSize]: AlignType };\r\n    gutter?: Gutter | [Gutter, Gutter];\r\n    justify?: JustifyType | { [key in ScreenSize]: JustifyType };\r\n    wrap?: boolean;\r\n  };\r\n}\r\nexport default ({ fields = [], rowAttrs, ...restProps }: Props) => {\r\n  return (\r\n    <Row {...rowAttrs}>\r\n      {fields?.map((field, ind) => {\r\n        if (!field) return null;\r\n        return <BaseFormItem field={field as FormFieldAttrs} key={ind} {...restProps} />;\r\n      })}\r\n    </Row>\r\n  );\r\n};\r\n","import { BtnAttrs } from \"@/components/form/_types\";\r\n\r\nexport function getBtnProps(btn: string | BtnAttrs): BtnAttrs {\r\n  if (typeof btn === \"string\") return { children: btn };\r\n  return btn;\r\n}\r\n","import { Button } from \"antd\";\r\nimport { RedoOutlined, CloudUploadOutlined } from \"@ant-design/icons\";\r\nimport { getBtnProps } from \"../_utils\";\r\nimport { BtnAttrs } from \"@/components/form/_types\";\r\nimport { showMessage } from \"@/components/_utils\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  loading: boolean;\r\n  submitButton?: string | BtnAttrs;\r\n  resetButton?: string | BtnAttrs;\r\n  readOnly: boolean;\r\n  form?: any;\r\n  onReset?: () => void;\r\n}\r\n\r\nexport default ({ className = \"\", loading, submitButton = \"提交\", resetButton = \"重置\", readOnly, form, onReset }: Props) => {\r\n  const submitBtn = getBtnProps(submitButton);\r\n  const resetBtn = getBtnProps(resetButton);\r\n  //点击重置按钮\r\n  function handleReset() {\r\n    if (readOnly) return showMessage(\"只读模式-不可重置\", \"info\");\r\n    form.resetFields();\r\n    onReset?.();\r\n  }\r\n  return (\r\n    <div className={`${className} pt-h pb-h f-c-c f-0`}>\r\n      {submitBtn.children && (\r\n        <Button icon={<CloudUploadOutlined />} loading={loading} type=\"primary\" htmlType=\"submit\" {...submitBtn.attrs}>\r\n          {submitBtn.children}\r\n        </Button>\r\n      )}\r\n      {resetBtn.children && (\r\n        <Button icon={<RedoOutlined />} htmlType=\"button\" onClick={handleReset} disabled={loading} {...resetBtn.attrs}>\r\n          {resetBtn.children}\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { CommonObj } from \"@/vite-env\";\r\n\r\n// 默认的 form 属性\r\nexport const defaultFormProps: CommonObj = {\r\n  validateTrigger: \"onBlur\",\r\n  scrollToFirstError: true,\r\n};\r\n","import { Form } from \"antd\";\r\nimport { useCallback, useContext, useEffect, useImperativeHandle, useState } from \"react\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { convertDateField, debounce, emptyVals, omitAttrs, printLog, showMessage } from \"@/components/_utils\";\r\nimport { SectionFormField, SectionFormFieldAttrs } from \"../SectionForm\";\r\nimport { FormField, FormFieldAttrs } from \"@/components/BaseFormItem\";\r\nimport { ClosePopupType, PopupContext } from \"@/components/provider/PopupProvider\";\r\nimport { defaultFormProps } from \"../_config\";\r\nimport { getBtnProps } from \"../_utils\";\r\nimport { BtnAttrs } from \"../_types\";\r\n\r\n// 获取未填写完毕的分组的下标\r\nconst getUnFilledInds = (sections: SectionFormField[], args: CommonObj) => {\r\n  const inds: number[] = [];\r\n  const getUnFilled = (fields: FormFieldAttrs[]) => {\r\n    if (!fields?.length) return false;\r\n    return fields.some((field: FormFieldAttrs) => {\r\n      const { name, required } = field;\r\n      return required && emptyVals.includes(args[name]);\r\n    });\r\n  };\r\n  sections.forEach((sItem: SectionFormField, sInd: number) => {\r\n    if (!sItem) return;\r\n    if (getUnFilled((sItem as SectionFormFieldAttrs).fields.filter(it => !!it) as FormFieldAttrs[])) inds.push(sInd);\r\n    const maxInd = sections.length - 1;\r\n    if (sInd === maxInd && !inds.length) inds.push(maxInd);\r\n  });\r\n  return inds;\r\n};\r\n\r\n/**\r\n * 表单初始化数据处理\r\n */\r\nexport interface UseInitFormReturns {\r\n  className: string;\r\n  loading: boolean;\r\n  pureText: boolean;\r\n  readOnly: boolean;\r\n  submitButton: string | BtnAttrs;\r\n  resetButton: string | BtnAttrs;\r\n  fields?: FormFieldAttrs[];\r\n  sections?: SectionFormFieldAttrs[];\r\n  formAttrs: CommonObj;\r\n  [key: string]: any;\r\n}\r\n\r\nfunction getFilterSections(sections: SectionFormField[]): SectionFormFieldAttrs[] {\r\n  return sections?.filter((sItem: SectionFormField) => {\r\n    if (!sItem) return false;\r\n    const { fields } = sItem as SectionFormFieldAttrs;\r\n    (sItem as SectionFormFieldAttrs).fields = fields.filter((fItem: FormField) => !!fItem) as FormFieldAttrs[];\r\n    return true;\r\n  }) as SectionFormFieldAttrs[];\r\n}\r\n\r\nfunction getFilterFields(fields: FormField[], newSections: SectionFormFieldAttrs[]): FormFieldAttrs[] {\r\n  return newSections?.length\r\n    ? (newSections.map((it: SectionFormFieldAttrs) => it.fields).flat(1) as FormFieldAttrs[])\r\n    : (fields.filter((it: FormField) => !!it) as FormFieldAttrs[]);\r\n}\r\n\r\nfunction getInfo(fields: FormField[], sections: SectionFormField[], initVals: CommonObj) {\r\n  const newSections: SectionFormFieldAttrs[] = getFilterSections(sections);\r\n  const newFields: FormFieldAttrs[] = getFilterFields(fields, newSections);\r\n  const newInitVals = convertDateField(newFields, initVals, \"set\");\r\n  return {\r\n    initVals: newInitVals,\r\n    sections: newSections,\r\n    fields: newFields,\r\n  };\r\n}\r\n\r\nexport const useInitForm = (props: CommonObj, ref: any): UseInitFormReturns => {\r\n  const {\r\n    className = \"\",\r\n    getUnFilledIndexs,\r\n    submitButton = \"提交\",\r\n    resetButton = \"重置\",\r\n    fetchSuccess,\r\n    fetchFail,\r\n    fields = [],\r\n    fetch,\r\n    onSubmit,\r\n    sections,\r\n    initialValues,\r\n    onValuesChange,\r\n    isOmit = true,\r\n    log = true,\r\n    pureText = false,\r\n    readOnly = false,\r\n    extraParams,\r\n    footer = true,\r\n    ...restProps\r\n  } = Object.assign({}, defaultFormProps, props);\r\n  const [form] = Form.useForm();\r\n  const [loading, setLoading] = useState(false);\r\n  const { closePopup } = useContext(PopupContext);\r\n  const isSectionForm = !!sections;\r\n\r\n  const { initVals, sections: newSections, fields: newFields } = getInfo(fields, sections, initialValues);\r\n\r\n  useImperativeHandle(ref, () => ({ form }), [form]);\r\n\r\n  const debounceInitInds = useCallback(\r\n    debounce((args = form.getFieldsValue(true)) => {\r\n      isSectionForm && getUnFilledIndexs?.(getUnFilledInds(newSections, args));\r\n    }),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    debounceInitInds();\r\n  }, []);\r\n\r\n  // 防抖处理 onFinish 事件\r\n  const debounceHandleFinish = useCallback(\r\n    debounce((params: CommonObj) => {\r\n      const text = getBtnProps(submitButton).children;\r\n      //请求成功之后的回调函数\r\n      function fetchSucCb(hint = text + \"成功！\", closeType?: ClosePopupType, cb?: () => void, isRefreshList = true) {\r\n        showMessage(hint);\r\n        closePopup(closeType);\r\n        cb?.();\r\n      }\r\n      if (readOnly) return showMessage(\"只读模式 - 不可提交\", \"info\");\r\n      const newParams = convertDateField(newFields, isOmit ? omitAttrs(params) : params);\r\n      log && printLog(newParams, \"req\");\r\n      setLoading(true);\r\n      if (!fetch && !onSubmit) {\r\n        setLoading(false);\r\n        return showMessage(`暂未处理【${text}】事件`, \"error\");\r\n      }\r\n      if (onSubmit) {\r\n        onSubmit(newParams, (msg = `${text}成功！`, closeType?: ClosePopupType, cb?: () => void) => {\r\n          showMessage(msg);\r\n          closePopup?.(closeType);\r\n          cb?.();\r\n        }).finally(() => setLoading(false));\r\n      } else {\r\n        fetch(newParams)\r\n          .then((res: any) => {\r\n            log && printLog(res, \"res\");\r\n            if (!fetchSuccess) fetchSucCb(`${text}成功！`);\r\n            fetchSuccess();\r\n          })\r\n          .catch((err: any) => {\r\n            fetchFail?.(err);\r\n          })\r\n          .finally(() => setLoading(false));\r\n      }\r\n    }),\r\n    []\r\n  );\r\n\r\n  // 防抖处理 onFinish 事件\r\n  const debounceHandleFinishFailed = useCallback(\r\n    debounce((err: CommonObj) => {\r\n      const { values, errorFields, outOfDate } = err;\r\n      const tips = errorFields?.[0]?.errors?.[0];\r\n      showMessage(tips, \"error\");\r\n    }),\r\n    []\r\n  );\r\n\r\n  // 防抖处理表单值change事件\r\n  const handelValuesChange = (vals: CommonObj, allVals: CommonObj) => {\r\n    debounceInitInds();\r\n    onValuesChange?.(vals, allVals);\r\n  };\r\n\r\n  return {\r\n    className,\r\n    loading,\r\n    pureText,\r\n    readOnly,\r\n    footer,\r\n    submitButton,\r\n    resetButton,\r\n    ...(isSectionForm ? { sections: newSections } : { fields: newFields }),\r\n    formAttrs: {\r\n      form,\r\n      initialValues: initVals,\r\n      onFinish: debounceHandleFinish,\r\n      onFinishFailed: debounceHandleFinishFailed,\r\n      onValuesChange: handelValuesChange,\r\n      ...restProps,\r\n    },\r\n  };\r\n};\r\n","/**\r\n * 基础表单 - BaseForm\r\n */\r\n\r\nimport { ReactNode, forwardRef } from \"react\";\r\nimport { Form } from \"antd\";\r\nimport { CSSProperties } from \"react\";\r\nimport { FormField } from \"@/components/BaseFormItem\";\r\nimport { getMaxLength } from \"@/components/_utils\";\r\nimport { SizeType } from \"antd/es/config-provider/SizeContext\";\r\nimport FormFields from \"@/components/form/_components/FormFields\";\r\nimport FormFoot from \"@/components/form/_components/FormFoot\";\r\nimport { CommonObj, FetchType, FinallyNext } from \"@/vite-env\";\r\nimport { BtnAttrs } from \"@/components/form/_types\";\r\nimport { useInitForm } from \"../_hooks\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  /**\r\n   * 以下是继承 antd 的属性\r\n   */\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  initialValues?: CommonObj;\r\n  labelCol?: CommonObj;\r\n  wrapperCol?: CommonObj;\r\n  disabled?: boolean;\r\n  size?: SizeType;\r\n  /**\r\n   * 以下是自定义的属性\r\n   */\r\n  fields?: FormField[];\r\n  submitButton?: string | BtnAttrs;\r\n  resetButton?: string | BtnAttrs;\r\n  readOnly?: boolean;\r\n  pureText?: boolean;\r\n  fetch?: FetchType;\r\n  fetchSuccess?: FinallyNext; //fetch请求成功之后的回调方法\r\n  fetchFail?: FinallyNext; //fetch请求失败之后的回调方法\r\n  onSubmit?: (data: CommonObj, next: () => void) => void;\r\n  isOmit?: boolean; // 表单提交时，是否剔除空的属性\r\n  footer?: ReactNode;\r\n  [key: string]: any;\r\n}\r\n\r\nexport default forwardRef((props: Props, ref: any) => {\r\n  const { className, loading, submitButton, resetButton, fields, pureText, readOnly, footer, formAttrs } = useInitForm(\r\n    props,\r\n    ref\r\n  );\r\n  const labelWidth = getMaxLength(fields) + \"em\";\r\n  return (\r\n    <Form className={`${className} ${s[\"base-form\"]}  f-fs-s-c`} {...formAttrs}>\r\n      <div className={`${s.bodyer} all-hide-scroll`}>\r\n        <FormFields fields={fields} pureText={pureText} readOnly={readOnly} labelWidth={labelWidth} />\r\n      </div>\r\n      {!pureText && footer === true ? (\r\n        <FormFoot\r\n          form={formAttrs.form}\r\n          loading={loading}\r\n          submitButton={submitButton}\r\n          resetButton={resetButton}\r\n          readOnly={readOnly}\r\n        />\r\n      ) : (\r\n        footer\r\n      )}\r\n    </Form>\r\n  );\r\n});\r\n","import { FormField } from \"@/components/BaseFormItem\";\r\nimport BaseForm from \"@/components/form/BaseForm\";\r\nimport { getUserInfo } from \"@/utils\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface Props {\r\n  id: number;\r\n}\r\nconst fields: FormField[] = [\r\n  {\r\n    name: \"avatar\",\r\n    label: \"头像\",\r\n    type: \"UploadAvatar\",\r\n  },\r\n  {\r\n    name: \"nickname\",\r\n    label: \"昵称\",\r\n    attrs: {\r\n      maxLength: 6,\r\n    },\r\n  },\r\n  {\r\n    name: \"name\",\r\n    label: \"姓名\",\r\n    attrs: {\r\n      maxLength: 6,\r\n    },\r\n  },\r\n  {\r\n    name: \"gender\",\r\n    label: \"性别\",\r\n    type: \"RadioGroup\",\r\n    attrs: {\r\n      options: \"Gender\",\r\n    },\r\n  },\r\n  {\r\n    name: \"age\",\r\n    label: \"年龄\",\r\n    type: \"InputNumber\",\r\n    attrs: {\r\n      maxLength: 2,\r\n      max: 99,\r\n      min: 0,\r\n    },\r\n    otherAttrs: {\r\n      valid: \"age\",\r\n    },\r\n  },\r\n  {\r\n    name: \"type_text\",\r\n    label: \"角色\",\r\n    attrs: {\r\n      disabled: true,\r\n    },\r\n  },\r\n  {\r\n    name: \"address\",\r\n    label: \"地址\",\r\n    type: \"Cascader\",\r\n    attrs: {\r\n      options: \"Region\",\r\n    },\r\n  },\r\n  {\r\n    name: \"phone\",\r\n    label: \"电话\",\r\n    otherAttrs: {\r\n      valid: \"phone\",\r\n    },\r\n  },\r\n  {\r\n    name: \"password\",\r\n    label: \"密码\",\r\n    otherAttrs: {\r\n      valid: \"password\",\r\n    },\r\n  },\r\n  {\r\n    name: \"signature\",\r\n    label: \"签名\",\r\n    type: \"TextArea\",\r\n    attrs: {\r\n      maxLength: 50,\r\n    },\r\n  },\r\n];\r\nexport default ({ id }: Props) => {\r\n  useEffect(() => {\r\n    getDetail(id);\r\n  }, []);\r\n  const [initVals, setInitVals] = useState<CommonObj | null>(null);\r\n  function getDetail(id: number) {\r\n    setTimeout(() => {\r\n      setInitVals(getUserInfo());\r\n    }, 500);\r\n  }\r\n  return (\r\n    <>\r\n      {/* <BaseAvatar size={120} className=\"ml-a mr-a\"  round/> */}\r\n      {initVals && <BaseForm initialValues={initVals} style={{ width: \"450px\" }} fields={fields} />}\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * 分块表单 - SectionForm\r\n */\r\n\r\nimport { forwardRef, useState, ReactNode } from \"react\";\r\nimport { Button, Form } from \"antd\";\r\nimport { CSSProperties } from \"react\";\r\nimport { FormField, FormFieldAttrs } from \"@/components/BaseFormItem\";\r\nimport { CaretDownOutlined } from \"@ant-design/icons\";\r\nimport { getMaxLength } from \"@/components/_utils\";\r\nimport { SizeType } from \"antd/es/config-provider/SizeContext\";\r\nimport FormFields from \"../_components/FormFields\";\r\nimport FormFoot from \"../_components/FormFoot\";\r\nimport { BaseDataType, CommonObj, FetchType, FinallyNext } from \"@/vite-env\";\r\nimport { BtnAttrs } from \"../_types\";\r\nimport { useInitForm } from \"../_hooks\";\r\nimport BaseQuestionPopover from \"@/components/BaseQuestionPopover\";\r\nimport s from \"./index.module.less\";\r\n\r\nexport interface SectionFormFieldAttrs {\r\n  name?: string;\r\n  title: string;\r\n  fields: FormField[];\r\n  popover?: ReactNode;\r\n}\r\n\r\nexport type SectionFormField = BaseDataType | SectionFormFieldAttrs;\r\ninterface Props {\r\n  /**\r\n   * 以下是继承 antd 的属性\r\n   */\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  initialValues?: CommonObj;\r\n  labelCol?: CommonObj;\r\n  wrapperCol?: CommonObj;\r\n  disabled?: boolean;\r\n  size?: SizeType;\r\n  /**\r\n   * 以下是自定义的属性\r\n   */\r\n  sections?: SectionFormField[];\r\n  submitButton?: string | BtnAttrs;\r\n  resetButton?: string | BtnAttrs;\r\n  readOnly?: boolean;\r\n  pureText?: boolean;\r\n  fetch?: FetchType;\r\n  fetchSuccess?: FinallyNext; //fetch请求成功之后的回调方法\r\n  fetchFail?: FinallyNext; //fetch请求失败之后的回调方法\r\n  onSubmit?: (data: CommonObj, next: () => void) => void;\r\n  isOmit?: boolean; //是否剔除属性\r\n  getUnFilledIndexs?: (inds: number[]) => void;\r\n  [key: string]: any;\r\n}\r\n\r\nlet initFolds: boolean[] = [];\r\nexport default forwardRef((props: Props, ref: any) => {\r\n  const {\r\n    className,\r\n    loading,\r\n    submitButton,\r\n    resetButton,\r\n    sections = [],\r\n    pureText,\r\n    readOnly,\r\n    footer,\r\n    formAttrs,\r\n  } = useInitForm(props, ref);\r\n  initFolds = Array(sections.length).fill(false);\r\n  const [folds, setFolds] = useState<boolean[]>(initFolds);\r\n  // 处理折叠逻辑\r\n  function handleToggleFold(ind: number) {\r\n    folds[ind] = !folds[ind];\r\n    setFolds(folds.slice());\r\n  }\r\n  return (\r\n    <Form className={`${className} ${s[\"section-form\"]} f-fs-s-c`} {...formAttrs}>\r\n      <div className={`${s.bodyer} all-hide-scroll`}>\r\n        {sections.map((sItem: SectionFormFieldAttrs, sInd: number) => {\r\n          const { title, fields, popover } = sItem;\r\n          const labelWidth = getMaxLength(fields as FormFieldAttrs[]) + \"em\";\r\n          return (\r\n            <div className={`${s.section}`} key={sInd}>\r\n              <div className={`${s.head} f-sb-c`}>\r\n                <div className={`${s.title} f-fs-c`}>\r\n                  {title}\r\n                  {popover && <BaseQuestionPopover content={popover} />}\r\n                </div>\r\n                <Button\r\n                  className={`${s[\"fold-btn\"]}`}\r\n                  type=\"link\"\r\n                  onClick={() => handleToggleFold(sInd)}\r\n                  icon={<CaretDownOutlined className={`${s[\"fold-icon\"]} ${folds[sInd] ? \"\" : \"rotate-180\"}`} />}\r\n                />\r\n              </div>\r\n              <div className={`${s.body}`} style={{ maxHeight: folds[sInd] ? \"0\" : \"100vh\" }}>\r\n                <FormFields fields={fields} pureText={pureText} readOnly={readOnly} labelWidth={labelWidth} />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {!pureText && footer === true ? (\r\n        <FormFoot\r\n          form={formAttrs.form}\r\n          loading={loading}\r\n          submitButton={submitButton}\r\n          resetButton={resetButton}\r\n          readOnly={readOnly}\r\n          onReset={() => setFolds(initFolds)}\r\n        />\r\n      ) : (\r\n        footer\r\n      )}\r\n    </Form>\r\n  );\r\n});\r\n","import SectionForm, { SectionFormField } from \"@/components/form/SectionForm\";\r\nimport { name, version, scripts, dependencies, devDependencies } from \"#/package.json\";\r\nimport { FormField } from \"@/components/BaseFormItem\";\r\nimport { CommonObj } from \"@/vite-env\";\r\n\r\nconst sections: SectionFormField[] = [\r\n  {\r\n    title: \"基础信息\",\r\n    fields: [\r\n      { name: \"name\", label: \"系统名称\" },\r\n      { name: \"version\", label: \"版本号\" },\r\n      {\r\n        name: \"env\",\r\n        label: \"所处环境\",\r\n      },\r\n      {\r\n        name: \"desc\",\r\n        label: \"系统概述\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"脚本命令\",\r\n    fields: toFieldItem(scripts),\r\n  },\r\n  {\r\n    title: \"开发依赖\",\r\n    fields: toFieldItem(dependencies),\r\n  },\r\n  {\r\n    title: \"生产依赖\",\r\n    fields: toFieldItem(devDependencies),\r\n  },\r\n];\r\nconst env = import.meta.env.MODE;\r\nconst envMap: CommonObj = {\r\n  development: \"开发\",\r\n  production: \"生产\",\r\n  test: \"测试\",\r\n};\r\nfunction toFieldItem(obj: CommonObj) {\r\n  const arr: FormField[] = [];\r\n  for (let key in obj) {\r\n    arr.push({ name: key, label: key });\r\n  }\r\n  return arr;\r\n}\r\nexport default () => {\r\n  const inivVals = {\r\n    name,\r\n    version,\r\n    env: `${envMap[env]}（${env}）`,\r\n    desc: \"这是系统介绍描述相关的内容展示这是系统介绍描述相关统\",\r\n    ...scripts,\r\n    ...dependencies,\r\n    ...devDependencies,\r\n  };\r\n  return <SectionForm style={{ width: \"500px\" }} initialValues={inivVals} sections={sections} pureText />;\r\n};\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZKADAAQAAAABAAAAZAAAAAAvu95BAAAI8UlEQVR4Ae2caW8VOwyG7zlQoCvQshYomxAIAUKI//8XWCQQAiH2fd/Xtvdpo2tF2SbOLKdXynyoMhnHsd/YjuOZ09HLly//qVceAuM8skq1gUAFS2EHFawKlgIBBWm1rAqWAgEFabWsCpYCAQVptawKlgIBBWm1rAqWAgEFabWsCpYCAQVptawKlgIBBel2BW3PpD9//vzx48fv379XV1f//v3LX661tbVt27aNN68dO3bs3Lx27dpFZ8/iBNiPJlspBY4vX758+/YNmMAlIGCka3Z2dn5+fm5uDhgjJN13T8yyfv369fHjx8+fP6+vrxeoBb5cILV38xoGsglYFu729u3b79+/F2AUHIJL7tu3b/fu3cGnHXYOChZGBEwfPnzoUAFhhWMePHhw+/YefWU4sIhKr169In6LevmN0WhEdAeIP5tXzHMhOHLkCHtAPmcV5UBgYU1v3rxRSYbmOBfXzMwMSIGXGQ5SIE7Ie/fuHXaKU9tscUnwYru0O7tqDwEWMKlcD4c6duzY0tJSTthmM2VDx2bF3IB1ZWWlD/vqFywUQBP0yVxb0EHPo0ePih1lDmSKe/fusT8aeqwSPvzNHJ5J1i9Yz549EwUaBSJpOnfu3PT0dCNlkICFebx5mad4IuapBT3IWTp7zOjwvnykFhYWLl26VIwU+oDL8ePHT58+bXQjlhHURM9OGn2BRcKZH6dIkS5evNjJCWZ5efnUqVMGmvfv3zvhvyVkvYCFQb1+/TpTMrzvwoULObE8kyG7IVHPEBP4M0flkHUPFmfgfBHB6OzZsx0iZXQ+ceKE8WgyjPztpRGv7sHCpsCrcWJDcPLkSdKoTOJ8MuLXmTNnTHTHGfMHpik7BouD8devX9NTytM9e/YQYuS22wZx8MCBA/DEuJCqE+ZdgkW9JT9UIT2pUCc6xJgQvMyjroyrS7A4fOTXpKhGJeoE4B6DINbvT81JgIwEeo5HnUSuznJcrP3Tp08xTfx+2bDsRxy2Hzx4AB+i3tTUFH6Uk4iT0D158oSaDyn74uIiqYPk7ocPHzY+SB7D8thzFbQ7syzMKn96DsackB16UrNr166RSZr9gfoCB4AbN27QcCjtW2C6c+cOyQoZPJRsxDCRHYZZzFZLwpXmY/OMtbsBi1XNT9YRhdDuCITf3b171/c+ON+/f98hlluecsKRW9MAl4cPH5o2SJHHmXZ7T+wGLG0EpRRsFJC/cMCR5dZuYLNiKXY/7ViUtMtBJmxBvCXAQklW2FEjfetbViLhwL9iZhvrB1yBXkIVPdKZFi/2tAPL0poV9QBiliNQOomPPZVA7nDjVk6aAhadLY2rLVisoVaCYFlOnMVXm21R4o7zNNbPegiODJdRWlFloGm0BYstzOHYeGtLL8REsVjalShL8YYiWEGmViOcsUoxTDbENntiW7AK1ioIFrqdP3/edhmjLemYJOKivzRAgXqh49QcocxBR8jEyughlZN+baNVUkpcL1goRzeRGJUuX75sCvZ4NyaDzjFHk1Hge+XKFdIrtgg4k5T6uwfLI2+VkDnh8sI22GgFVtkBNV3q3b95BWWNdYJF8Dwg9PaMbSyr3A05iyX2exHUb5AK+J299tgzbgSt5JEgIUk5WNizf3ZNzCSPykbJ8IKGDRbDi42rHKwys0JWR/QC5bVDnBknAFYse27UZOKWVfwWo9CyWBz/0NsIkyGQjSmTvj2ZE6Q49Di2ljlFIVjFZoVYLQ9omYoJGYbsr2vZghWCpT05i+g0ygS1OajajlmZsWULVgIWa1Xs9gasMi9QYSTEwbUZDqw2ZoUOIFW8kwoE+Y1gxBgOrOKtVzRUVetlVFkjeMwYDqw2PmgULgYLq6R8xkkw37qDR31Cvh/1Gxej5GxYtiy2KKw2skp9zn6UaBN9bt68aeya4x7nQV7TJ+h5xJCYHxD4tQKoAzxItc8qKSoUfH//9OlT0RwT471O47I9f/48tpkEA38aejVY7X3QCITmMTViEvv0fo89lkVNLMkQYDUupi1uoo2sL168SBD4j/A7uyRNkS9YJpWBIBVMsgwB1i2UmQ11zOoKLOTj7R7V5Pyv/UDq6tWrvP4CAgp4flnV1hmHlbeHdr+0EzgKjdNQu2GB9TpTyi0x/tatWyqG1JEpn1JoTiMFELdv307vd6p5jcw6sDDdtAQCRGaD9ecFfTBvzOTgk5FVsGk25hYokg55PmcdWAWr4U/p9LBjXL9+na2t/SaL8nweAbdGpIwM2rCli1kFfu5AE7wFJuIL27x5MWNH8SC930kk5dMwdgxVSAWs2Ksmfwp6tgRYRjLMFsgePXrEd1W8QyQqEfvt16W2AiwbJokXk6CT4pYdNv+XlmWjgCuhua38xjvS8Zhsm6wdG+QqCDf2FNLWxt8tZFmig9MwAGmtwGESvNXy1AX4nmJWUJMBOrWWpQOLX3YPoMNgU/RrWcuLi4NpMsBEOLhqFp2l7Jyf3z87q5pgKxP364br4/HSwsL4vx+VbmUgcmTrFywkWJubW+n/d+45qran6dcNN+Qbjab37p2xPqdrL/SkOKRP475UujzLjF+dmuL78sfKapQ/9/A9HG44FZDc4oBkv843b43ylP/sN+HwpGOc1NrUVPlIy//kjENyG54w5LNK+1utRnQcghLLMiwS1X4e8TMSXuFQqEtg6ohi37LsPn+/xx6SaHNaAv3YN6uJgc6jcrAcRv4twvGRIz8vATWU9wm0PXwFWVD54veMGJSquhATrEewmBJbIC5QOway4MvOmFhB3Qg3+b+7hjOlHmIrNYzYLNr+fsEy0qD5oUOH+KcWqApkjRs2XhPUEDvlI92cMwqFHVZIu9k1Ylce4BtZBwlAigoUjpkI1ZQAYx8pU8BKvEMDSgBibP5LkKCQsc6hwRI5MBACEMpT82P3JKihKo7Dt9npSim1UJwarNk6cHMukxCYSqHw76MxMbD6UKZvnrqDdN/SbHH+FSzFAlWwKlgKBBSk1bIqWAoEFKTVsipYCgQUpNWyKlgKBBSk1bIqWAoEFKTVsipYCgQUpNWyFGD9C7nhkDaLXlpeAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"__VITE_ASSET__2fcbc7ca__\"","export default \"__VITE_ASSET__217d394c__\"","import { CSSProperties, MouseEventHandler, useState } from \"react\";\r\nimport { Image } from \"antd\";\r\nimport { useRouter } from \"@/components/_hooks\";\r\nimport emptyImg from \"@/assets/images/default/img.png\";\r\nimport errImg from \"@/assets/images/default/err.png\";\r\nimport { StrNum } from \"@/vite-env\";\r\nimport { RouteProps } from \"../_hooks/router\";\r\nimport s from \"./index.module.less\";\r\n\r\ntype Props = {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  onClick?: Function;\r\n  size?: StrNum;\r\n  width?: StrNum;\r\n  height?: StrNum;\r\n  src?: string;\r\n  to?: string | RouteProps; //要跳转的页面地址\r\n  round?: boolean;\r\n  loadTips?: string;\r\n  errTips?: string;\r\n  errImgSrc?: string;\r\n  preview?: boolean;\r\n  [key: string]: any;\r\n};\r\n\r\nexport default ({\r\n  className = \"\",\r\n  style,\r\n  onClick,\r\n  size = 120,\r\n  width,\r\n  height,\r\n  src,\r\n  to,\r\n  round,\r\n  errImgSrc,\r\n  loadTips = \"玩命加载中…\",\r\n  errTips = \"加载失败\",\r\n  preview = !!src,\r\n  fallback = errImg,\r\n  ...restProps\r\n}: Props) => {\r\n  const router = useRouter();\r\n  function handleClick(event: MouseEventHandler<HTMLImageElement>) {\r\n    to ? router.push(to) : onClick?.(event);\r\n  }\r\n  return (\r\n    <>\r\n      <Image\r\n        className={`${className} ${s[\"base-img\"]} ${round ? s.round : \"\"} ${to ? s.to : \"\"} ${src ? \"\" : s.empty}`}\r\n        src={src ?? emptyImg}\r\n        width={size ?? width}\r\n        height={size ?? height}\r\n        style={{ cursor: to ? \"pointer\" : \"inherit\", ...style }}\r\n        onClick={handleClick}\r\n        alt=\"图片加载失败\"\r\n        fallback={fallback}\r\n        preview={preview}\r\n        // onError={err => {\r\n        //   console.log(err, \"err---------\");\r\n        // }}\r\n        {...restProps}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { CSSProperties } from \"react\";\r\nimport avatarImg from \"@/assets/images/default/avatar.png\";\r\nimport avatarManImg from \"@/assets/images/default/avatar-man.png\";\r\nimport avatarWomanImg from \"@/assets/images/default/avatar-woman.png\";\r\nimport BaseImg from \"@/components/BaseImg\";\r\nimport { StrNum } from \"@/vite-env\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  onClick?: (e: Event) => void;\r\n  size?: StrNum;\r\n  height?: StrNum;\r\n  width?: StrNum;\r\n  src?: string;\r\n  to?: string; //要跳转的页面地址\r\n  round?: boolean;\r\n  gender?: 0 | 1; //性别\r\n  preview?: boolean;\r\n  [key: string]: any;\r\n}\r\nconst avatarMap: Record<1 | 2, any> = {\r\n  1: avatarManImg,\r\n  2: avatarWomanImg,\r\n};\r\nexport default ({ className = \"\", style, size = 40, height, width, src, gender, preview = !!src, ...restProps }: Props) => {\r\n  return (\r\n    <BaseImg\r\n      className={`${className} ${s[\"base-avatar\"]}`}\r\n      size={size}\r\n      height={size ?? height}\r\n      width={size ?? width}\r\n      src={src || avatarMap[gender as 1 | 2] || avatarImg}\r\n      preview={preview}\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport * as Icons from \"@ant-design/icons\";\r\nimport { toCssVal } from \"@/components/_utils\";\r\n// import { OmitUser } from \"@/vite-env\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  onClick?: Function;\r\n  name?: IconNames;\r\n  size?: string | number;\r\n  color?: string;\r\n  title?: string;\r\n}\r\n\r\n// export type IconNames = OmitUser<keyof typeof Icons, \"createFromIconfontCN\" | \"default\" | \"getTwoToneColor\" | \"setTwoToneColor\">;\r\nexport type IconNames = keyof typeof Icons;\r\n\r\nexport default ({ className = \"\", name = \"ChromeFilled\", size = \"1em\", color, title, onClick }: Props) => {\r\n  const Icon: any = Icons[name] ?? Icons.TwitterOutlined;\r\n  return React.createElement(Icon, {\r\n    className: `${className}`,\r\n    onClick,\r\n    title,\r\n    style: {\r\n      fontSize: toCssVal(size),\r\n      color,\r\n      cursor: onClick ? \"cursor\" : \"inherit\",\r\n    },\r\n  });\r\n};\r\n","import { CSSProperties, useEffect, useState } from \"react\";\r\nimport { Breadcrumb } from \"antd\";\r\nimport { ResponseMenuItem } from \"@/layout/_types\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { defaultHomePath } from \"@/utils\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useStoreSlice } from \"@/hooks\";\r\nimport BaseIcon from \"@/components/BaseIcon\";\r\nimport useMenu from \"@/layout/_hooks\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  [key: string]: any;\r\n}\r\n\r\nexport default ({ className = \"\", ...restProps }: Props) => {\r\n  const { allMenus } = useStoreSlice(\"menu\");\r\n  const { layout } = useStoreSlice(\"set\");\r\n  const { toFirstPath } = useMenu();\r\n  const location = useLocation();\r\n  const { pathname } = location;\r\n  const isDark = [\"vertical\", \"horizontal\"].includes(layout.type);\r\n  const [breadcrumbs, setBreadcrumbs] = useState<ResponseMenuItem[]>([\r\n    {\r\n      id: \"0\",\r\n      icon: \"HomeOutlined\",\r\n      path: defaultHomePath,\r\n      label: \"首页\",\r\n      type: 0,\r\n      status: 1,\r\n    },\r\n  ]);\r\n  useEffect(() => {\r\n    const list = breadcrumbs.slice(0, 1);\r\n    if (pathname !== defaultHomePath) {\r\n      list.push(...(getAllBreadcrumbs(allMenus)[pathname] ?? []));\r\n    }\r\n    setBreadcrumbs(list);\r\n  }, [pathname]);\r\n  function getAllBreadcrumbs(menus: ResponseMenuItem[], parent = [], result: CommonObj = {}) {\r\n    for (const item of menus) {\r\n      result[item.path] = [...parent, item];\r\n      if (item.children) getAllBreadcrumbs(item.children, result[item.path], result);\r\n    }\r\n    return result;\r\n  }\r\n  return (\r\n    <Breadcrumb\r\n      className={`${className} ${s[\"path-breadcrumb\"]}`}\r\n      separator={<span className={`${s.item} ${isDark ? s.dark : s.light}`}>/</span>}\r\n      // params={{}} //路由参数\r\n      items={breadcrumbs.map((item: ResponseMenuItem, ind: number) => {\r\n        const { path, label, icon } = item;\r\n        return {\r\n          title: (\r\n            <div\r\n              onClick={() => toFirstPath(item)}\r\n              className={`${s.item} ${isDark ? s.dark : s.light} ${ind == breadcrumbs.length - 1 ? s.active : \"\"} ${\r\n                ind === 0 ? s.home : \"\"\r\n              } ${ind !== 0 && ind !== breadcrumbs.length - 1 ? s.link : \"\"}`}\r\n            >\r\n              {icon && <BaseIcon className=\"mr-4\" name={icon} />}\r\n              {label}\r\n            </div>\r\n          ),\r\n        };\r\n      })}\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n","/**\r\n * 文件说明 - 模板文件\r\n */\r\n\r\nimport { Tooltip } from \"antd\";\r\nimport { CSSProperties, useState } from \"react\";\r\nimport { useStoreSlice } from \"@/hooks\";\r\nimport { LayoutType } from \"@/store/modules/set\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  value?: LayoutType;\r\n  onChange?: (val: LayoutType) => void;\r\n  [key: string]: any;\r\n}\r\n\r\nconst tooltipAttrs = {\r\n  //   placement: \"top\",\r\n};\r\nconst layoutMap: { [key in LayoutType]: CommonObj } = {\r\n  columns: {\r\n    name: \"分栏\",\r\n    class: \"f-sb-s\",\r\n  },\r\n  classics: {\r\n    name: \"经典\",\r\n    class: \"f-fs-s-c\",\r\n  },\r\n  vertical: {\r\n    name: \"纵向\",\r\n    class: \"f-sb-s\",\r\n  },\r\n  horizontal: {\r\n    name: \"横向\",\r\n    class: \"f-fs-s-c\",\r\n  },\r\n};\r\nconst keys: LayoutType[] = Object.keys(layoutMap) as LayoutType[];\r\nexport default ({ className = \"\", value, onChange, children, ...restProps }: Props) => {\r\n  const { layout, updateSetState } = useStoreSlice(\"set\");\r\n  const [type, setType] = useState<LayoutType>(value ?? layout.type);\r\n  function handleSelected(val: LayoutType) {\r\n    setType(val);\r\n    onChange?.(val);\r\n    updateSetState([\"layout\", { type: val }, \"set\"]);\r\n  }\r\n  return (\r\n    <div className={`${className} ${s[\"layout-style\"]} f-sb-fs-w`} {...restProps}>\r\n      {keys.map((key: LayoutType) => {\r\n        const item = layoutMap[key];\r\n        return (\r\n          <Tooltip title={item.name} {...tooltipAttrs} key={key}>\r\n            <div\r\n              onClick={() => handleSelected(key)}\r\n              className={`${s.item} ${type == key ? s.active : \"\"}  ${s[key]} ${item.class}`}\r\n            >\r\n              {key === \"columns\" ? (\r\n                <>\r\n                  <div className={`${s.menu} ${s.box} f-0`}></div>\r\n                  <div className={`${s.side} ${s.box} f-0`}></div>\r\n                  <div className=\"f-fs-s-c f-1\">\r\n                    <div className={`${s.side} ${s.box} ${s.right} f-0 `}>1</div>\r\n                    <div className={`${s.main} ${s.box} f-1`}></div>\r\n                  </div>\r\n                </>\r\n              ) : key === \"classics\" ? (\r\n                <>\r\n                  <div className={`${s.menu} ${s.box} f-0`}></div>\r\n                  <div className=\"f-sb-s f-1\">\r\n                    <div className={`${s.side} ${s.box} f-0`}></div>\r\n                    <div className={`${s.main} ${s.box} f-1`}></div>\r\n                  </div>\r\n                </>\r\n              ) : key === \"vertical\" ? (\r\n                <>\r\n                  <div className={`${s.menu} ${s.box} f-0`}></div>\r\n                  <div className={`${s.main} ${s.box} f-1`}></div>\r\n                </>\r\n              ) : key === \"horizontal\" ? (\r\n                <>\r\n                  <div className={`${s.menu} ${s.box} f-0`}></div>\r\n                  <div className={`${s.main} ${s.box} f-1`}></div>\r\n                </>\r\n              ) : null}\r\n            </div>\r\n          </Tooltip>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * 系统设置\r\n */\r\n\r\nimport SectionForm, { SectionFormField } from \"@/components/form/SectionForm\";\r\nimport { CSSProperties, useState } from \"react\";\r\nimport LayoutStyle from \"./_components/LayoutStyle\";\r\nimport { CommonObj, FinallyNext, OptionItem } from \"@/vite-env\";\r\nimport { useStoreSlice } from \"@/hooks\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  [key: string]: any;\r\n}\r\nconst showHideSwitchAttrs = {\r\n  checkedChildren: \"显示\",\r\n  unCheckedChildren: \"隐藏\",\r\n};\r\nconst sizeOpts: OptionItem[] = [\r\n  { label: \"大型\", value: \"large\" },\r\n  { label: \"中等\", value: \"medium\" },\r\n  { label: \"小型\", value: \"small\" },\r\n  // { label: \"迷你\", value: \"mini\" },\r\n];\r\nconst languageOpts: OptionItem[] = [\r\n  { label: \"简体中文\", value: \"zh\" },\r\n  { label: \"英文\", value: \"en\" },\r\n];\r\nconst getSections = (args: CommonObj): SectionFormField[] => {\r\n  const { bread, page_tag } = args;\r\n  return [\r\n    {\r\n      title: \"外观设置\",\r\n      fields: [\r\n        {\r\n          name: \"layout_type\",\r\n          label: \"布局风格\",\r\n          render: (attrs: CommonObj) => <LayoutStyle {...attrs} />,\r\n        },\r\n        {\r\n          name: \"widget_size\",\r\n          label: \"控件大小\",\r\n          type: \"RadioGroup\",\r\n          attrs: {\r\n            options: sizeOpts,\r\n          },\r\n        },\r\n        {\r\n          name: \"language\",\r\n          label: \"语言类型\",\r\n          type: \"RadioGroup\",\r\n          attrs: {\r\n            options: languageOpts,\r\n          },\r\n        },\r\n        {\r\n          name: \"bread\",\r\n          label: \"面包屑\",\r\n          type: \"Switch\",\r\n          colAttrs: bread ? 8 : undefined,\r\n          attrs: showHideSwitchAttrs,\r\n        },\r\n        bread && {\r\n          name: \"bread_icon\",\r\n          label: \"图标\",\r\n          type: \"Switch\",\r\n          colAttrs: 12,\r\n          attrs: showHideSwitchAttrs,\r\n        },\r\n        {\r\n          name: \"page_tag\",\r\n          label: \"页签栏\",\r\n          type: \"Switch\",\r\n          colAttrs: page_tag ? 8 : undefined,\r\n          attrs: showHideSwitchAttrs,\r\n        },\r\n        page_tag && {\r\n          name: \"page_tag_icon\",\r\n          label: \"图标\",\r\n          type: \"Switch\",\r\n          colAttrs: 12,\r\n          attrs: showHideSwitchAttrs,\r\n        },\r\n        {\r\n          name: \"footer\",\r\n          label: \"页脚\",\r\n          type: \"Switch\",\r\n          colAttrs: 12,\r\n          attrs: showHideSwitchAttrs,\r\n          otherAttrs: {\r\n            popover: \"页面底部的专利许可\",\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      title: \"主题设置\",\r\n      fields: [\r\n        {\r\n          name: \"theme_color\",\r\n          label: \"主题颜色\",\r\n          type: \"ColorPicker\",\r\n        },\r\n        {\r\n          name: \"dark_mode\",\r\n          label: \"暗黑模式\",\r\n          type: \"Switch\",\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      title: \"菜单设置\",\r\n      fields: [\r\n        {\r\n          name: \"unique_opened\",\r\n          label: \"手风琴\",\r\n          type: \"Switch\",\r\n          otherAttrs: {\r\n            popover: \"启用后，只保持一个子菜单的展开\",\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n};\r\n\r\nexport default ({ className = \"\", children, ...restProps }: Props) => {\r\n  const setStore = useStoreSlice(\"set\");\r\n  const initVals: CommonObj = getDefaultModel(setStore);\r\n  const [params, setParams] = useState<CommonObj>(initVals);\r\n  const sections = getSections(params);\r\n  function getDefaultModel(set: CommonObj) {\r\n    return {\r\n      layout_type: set.layout.type,\r\n      widget_size: set.layout.size,\r\n      language: set.language.type,\r\n      bread: set.breadcrumb.show,\r\n      bread_icon: set.breadcrumb.showIcon,\r\n      page_tag: set.pageTags.show,\r\n      page_tag_icon: set.pageTags.showIcon,\r\n      footer: set.footer.show,\r\n      theme_color: set.theme.color,\r\n      dark_mode: set.theme.darkMode,\r\n      unique_opened: set.menu.uniqueOpened,\r\n    };\r\n  }\r\n  return (\r\n    <SectionForm\r\n      style={{ width: \"400px\" }}\r\n      sections={sections}\r\n      className={`${className}`}\r\n      submitButton=\"恢复默认设置\"\r\n      onSubmit={(args: CommonObj, next: FinallyNext) => {\r\n        console.log(args, \"点击了提交按钮----------\");\r\n        next(\"已恢复默认设置\");\r\n      }}\r\n      resetButton=\"\"\r\n      initialValues={initVals}\r\n      onValuesChange={(vals: CommonObj, allVals: CommonObj) => setParams(allVals)}\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n","export default \"__VITE_ASSET__c2b3a5f0__\"","/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { useContext, useEffect } from \"react\";\r\nimport { Popover, Divider } from \"antd\";\r\nimport { Button, Modal } from \"antd\";\r\nimport PageTags from \"./_components/PageTags\";\r\nimport { PopupContext } from \"@/components/provider/PopupProvider\";\r\nimport UserInfo from \"./_components/UserInfo\";\r\nimport SystemInfo from \"./_components/SystemInfo\";\r\nimport BaseAvatar from \"@/components/BaseAvatar\";\r\nimport {\r\n  MenuFoldOutlined,\r\n  MenuUnfoldOutlined,\r\n  PoweroffOutlined,\r\n  ExclamationCircleFilled,\r\n  UserOutlined,\r\n  InfoCircleOutlined,\r\n  RedoOutlined,\r\n  SettingOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useRouter, useStoreSlice } from \"@/hooks\";\r\nimport PathBreadcrumb from \"./_components/PathBreadcrumb\";\r\nimport SystemSet from \"./_components/SystemSet\";\r\nimport BaseImg from \"@/components/BaseImg\";\r\nimport logoImg from \"@/assets/images/logo.svg\";\r\nimport { defaultHomePath } from \"@/utils\";\r\nimport SideMenu from \"../SideMenu\";\r\nimport s from \"./index.module.less\";\r\nimport PageTabs from \"./_components/PageTabs\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  [key: string]: any;\r\n}\r\n\r\nconst { VITE_APP_NAME } = import.meta.env;\r\n\r\nexport default ({ className = \"\", ...restProps }: Props) => {\r\n  const { layout } = useStoreSlice(\"set\");\r\n  const { userInfo, handleLoginOut } = useStoreSlice(\"user\");\r\n  const { isCollapse, updateMenuState } = useStoreSlice(\"menu\");\r\n  const router = useRouter();\r\n  const location = useLocation();\r\n  const { openPopup } = useContext(PopupContext);\r\n  useEffect(() => {\r\n    // openPopup({ title: \"系统设置\", maskClosable: true }, <SystemSet />, \"drawer\");\r\n  }, []);\r\n  //打开退出登录对话框\r\n  function openLogoutDialog() {\r\n    Modal.confirm({\r\n      title: \"温馨提示\",\r\n      icon: <ExclamationCircleFilled />,\r\n      content: \"确定退出登录吗？\",\r\n      onOk: () =>\r\n        handleLoginOut({\r\n          params: { phone: \"18483221518\" },\r\n          other: { router, location },\r\n        }),\r\n      onCancel() {},\r\n    });\r\n  }\r\n  return (\r\n    <>\r\n      <div className={`${className} ${s.header} ${layout.type === \"vertical\" ? s.white : \"\"} layout-the-head`} {...restProps}>\r\n        <div className={`${layout.type === \"vertical\" ? s[\"border-bottom\"] : \"\"} f-sb-c pr-h`}>\r\n          {layout.type === \"horizontal\" ? (\r\n            <div onClick={() => router.push(defaultHomePath)} className={`${s.title} f-0 f-c-c`}>\r\n              <BaseImg size={30} src={logoImg} />\r\n              <span className=\"line-2 ml-h\">{isCollapse ? VITE_APP_NAME?.slice(0, 1) : VITE_APP_NAME}</span>\r\n            </div>\r\n          ) : null}\r\n          <div className={`${s[\"toggle-btn\"]} f-0`} onClick={() => updateMenuState({ isCollapse: !isCollapse })}>\r\n            {isCollapse ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}\r\n          </div>\r\n          {layout.type === \"horizontal\" ? <SideMenu className=\"f-1\" mode=\"horizontal\" /> : <PathBreadcrumb className=\"f-1\" />}\r\n\r\n          <div className=\"f-0 ml-8 mr-8 f-fe-s\">\r\n            <div className={`${s.info} f-sa-fe-c`}>\r\n              <div className={`${s.name}`}>{userInfo?._title ?? \"\"}</div>\r\n              <div className={`${s.type}`}>{userInfo?.type_text ?? \"\"}</div>\r\n            </div>\r\n            <Popover\r\n              placement=\"bottom\"\r\n              trigger=\"hover\"\r\n              content={\r\n                <>\r\n                  <Button\r\n                    className={`${s[\"pop-btn\"]}`}\r\n                    onClick={() => openPopup(\"个人信息\", <UserInfo id={1} />, \"drawer\")}\r\n                    icon={<UserOutlined />}\r\n                    type=\"link\"\r\n                  >\r\n                    个人信息\r\n                  </Button>\r\n                  <Button\r\n                    className={`${s[\"pop-btn\"]}`}\r\n                    onClick={() => openPopup(\"刷新系统\", \"【刷新系统】暂未开发\", \"drawer\")}\r\n                    icon={<RedoOutlined />}\r\n                    type=\"link\"\r\n                  >\r\n                    刷新系统\r\n                  </Button>\r\n                  <Button\r\n                    className={`${s[\"pop-btn\"]}`}\r\n                    onClick={() => openPopup({ title: \"系统设置\", maskClosable: true }, <SystemSet />, \"drawer\")}\r\n                    icon={<SettingOutlined />}\r\n                    type=\"link\"\r\n                  >\r\n                    系统设置\r\n                  </Button>\r\n                  <Button\r\n                    className={`${s[\"pop-btn\"]}`}\r\n                    onClick={() => openPopup({ title: \"关于系统\", maskClosable: true }, <SystemInfo />, \"drawer\")}\r\n                    icon={<InfoCircleOutlined />}\r\n                    type=\"link\"\r\n                  >\r\n                    关于系统\r\n                  </Button>\r\n                  <Divider className=\"m-0\" />\r\n                  <Button className={`${s[\"pop-btn\"]}`} onClick={openLogoutDialog} icon={<PoweroffOutlined />} type=\"link\" danger>\r\n                    退出登录\r\n                  </Button>\r\n                </>\r\n              }\r\n            >\r\n              <BaseAvatar src={userInfo?.avatar} className=\"f-0 ml-h\" size={40} preview={false} round />\r\n            </Popover>\r\n          </div>\r\n        </div>\r\n        {layout.type === \"horizontal\" && (\r\n          <div className={`${s[\"breadcrumb-box\"]} ${s.white} f-fs-c`}>\r\n            <PathBreadcrumb />\r\n          </div>\r\n        )}\r\n        <PageTags />\r\n      </div>\r\n      {/* <PageTabs /> */}\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * 布局Layout文件\r\n */\r\n\r\nimport { Outlet } from \"react-router-dom\";\r\nimport TheMenu from \"./_components/TheMenu\";\r\nimport TheHead from \"./_components/TheHead\";\r\nimport { Suspense, useEffect, useState } from \"react\";\r\nimport { Spin, Watermark } from \"antd\";\r\nimport { useStoreSlice } from \"@/hooks\";\r\nimport BaseImg from \"@/components/BaseImg\";\r\nimport BaseIcon from \"@/components/BaseIcon\";\r\nimport logoImg from \"@/assets/images/logo.svg\";\r\nimport useMenu from \"@/layout/_hooks\";\r\nimport { AntdMenuItem, ResponseMenuItem } from \"@/layout/_types\";\r\nimport cssVars from \"@/assets/styles/_var.module.less\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport s from \"./index.module.less\";\r\nimport { convertToMenuNavs } from \"@/store/modules/menu\";\r\nimport BaseEmpty from \"@/components/BaseEmpty\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n}\r\n\r\nlet reloadCb: undefined | (() => void);\r\nconst { VITE_APP_NAME } = import.meta.env;\r\nconst { mainMenuWidth, asiderWidth, asiderWidthFold } = cssVars;\r\n\r\nexport default ({ className = \"\" }: Props) => {\r\n  const { layout } = useStoreSlice(\"set\");\r\n  const { isCollapse, updateMenuState, allMenus, activeIndex } = useStoreSlice(\"menu\");\r\n  const { changeActiveIndex } = useMenu();\r\n  const [show, setShow] = useState(true);\r\n  useEffect(() => {\r\n    if (!show) {\r\n      setShow(true);\r\n      reloadCb?.();\r\n    }\r\n  }, [show]);\r\n  const maxWidthMap: CommonObj = {\r\n    columns: `calc(100vw - ${mainMenuWidth} - ${isCollapse ? asiderWidthFold : asiderWidth})`,\r\n    classics: `calc(100vw - ${isCollapse ? asiderWidthFold : asiderWidth})`,\r\n    vertical: `calc(100vw - ${isCollapse ? asiderWidthFold : asiderWidth})`,\r\n    horizontal: `100vw`,\r\n  };\r\n  const items = convertToMenuNavs(allMenus);\r\n  return (\r\n    <Watermark content={VITE_APP_NAME} gap={[80, 80]}>\r\n      <div className={`${className} ${s.layout} f-sb-s`}>\r\n        {layout.type !== \"horizontal\" && (\r\n          <>\r\n            {layout?.type === \"columns\" && (\r\n              <div className={`${s[\"main-menu\"]} f-0 f-fs-s f-fs-c-c`}>\r\n                <div className={`f-c-c-c f-0 ${s.logo}`}>\r\n                  <BaseImg src={logoImg} size=\"30px\" style={{ borderRadius: 0 }} to={{ name: \"home\" }} />\r\n                </div>\r\n                <div className={`${s.list} f-fs-c-c f-1 all-hide-scroll`}>\r\n                  {items.length > 0 ? (\r\n                    items.map((item: AntdMenuItem, ind: number) => {\r\n                      const { icon, label } = item;\r\n                      return (\r\n                        <div\r\n                          className={`${s.item} ${activeIndex === ind ? s.active : \"\"} f-c-c-c`}\r\n                          onClick={() => changeActiveIndex(ind)}\r\n                          key={ind}\r\n                        >\r\n                          {icon}\r\n                          <span className={`${s.text} line-1`}>{label}</span>\r\n                        </div>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <BaseEmpty size={40} />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <TheMenu className=\"f-0\" />\r\n          </>\r\n        )}\r\n        <div className={`${s.right} f-1 f-fs-s-c`}>\r\n          <TheHead className=\"f-0\" />\r\n          <div className={`${s.main} f-1 f-fs-s-c`} style={{ maxWidth: maxWidthMap[layout.type] }}>\r\n            {/* 需要使用Suspense包裹，不然会出现闪屏现象 */}\r\n            <Suspense\r\n              fallback={\r\n                <Spin\r\n                  // tip=\"路由加载中……\"\r\n                  className=\"f-c-c\"\r\n                  size=\"large\"\r\n                  style={{ height: \"100%\", width: \"100%\" }}\r\n                />\r\n              }\r\n            >\r\n              {show && <Outlet />}\r\n            </Suspense>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Watermark>\r\n  );\r\n};\r\n","import { GetUserCaptcha } from \"@/api-mock\";\r\nimport { Input, Form } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  name: string;\r\n  formRef: any;\r\n}\r\nexport default ({ name, formRef }: Props) => {\r\n  const [captcha, setCaptcha] = useState(\"\");\r\n  useEffect(() => {\r\n    getCaptcha();\r\n  }, []);\r\n  function getCaptcha() {\r\n    GetUserCaptcha().then((res: any) => {\r\n      setCaptcha(res);\r\n    });\r\n  }\r\n  function handleChange(e: any) {\r\n    formRef?.current?.setFieldValue?.(\"captcha\", e.target.value);\r\n  }\r\n  return (\r\n    <div className=\"f-sb-fs\">\r\n      <Form.Item className=\"mb-0\" name={name}>\r\n        <Input className=\"f-1\" maxLength={4} placeholder=\"请输入验证码\" onChange={handleChange} allowClear />\r\n      </Form.Item>\r\n      <div onClick={getCaptcha} className={`${s.captcha} ml-16 f-0 f-c-c`}>\r\n        {captcha}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { FormField } from \"@/components/BaseFormItem\";\r\nimport BaseForm from \"@/components/form/BaseForm\";\r\n\r\nconst fields: FormField[] = [\r\n  {\r\n    name: \"pheon\",\r\n    label: \"电话\",\r\n    otherAttrs: {\r\n      valid: \"phone\",\r\n    },\r\n  },\r\n  {\r\n    name: \"psd\",\r\n    label: \"密码\",\r\n    type: \"Password\",\r\n    otherAttrs: {\r\n      valid: \"password\",\r\n    },\r\n  },\r\n  { name: \"captcha\", label: \"验证码\" },\r\n];\r\nexport default () => {\r\n  return <BaseForm style={{ width: 450 }} fields={fields} />;\r\n};\r\n","import { FormField } from \"@/components/BaseFormItem\";\r\nimport BaseForm from \"@/components/form/BaseForm\";\r\n\r\nconst fields: FormField[] = [\r\n  {\r\n    name: \"pheon\",\r\n    label: \"电话\",\r\n    otherAttrs: {\r\n      valid: \"phone\",\r\n    },\r\n  },\r\n  {\r\n    name: \"psd\",\r\n    label: \"密码\",\r\n    type: \"Password\",\r\n    otherAttrs: {\r\n      valid: \"password\",\r\n    },\r\n  },\r\n  { name: \"captcha\", label: \"验证码\" },\r\n];\r\nexport default () => {\r\n  return <BaseForm style={{ width: 450 }} fields={fields} submitButton=\"注册\" />;\r\n};\r\n","import { PopupContext } from \"@/components/provider/PopupProvider\";\r\nimport { FormField } from \"@/components/BaseFormItem\";\r\nimport BaseForm from \"@/components/form/BaseForm\";\r\nimport { Button } from \"antd\";\r\nimport { useContext, useEffect, useRef, useState } from \"react\";\r\nimport Captcha from \"./_components/Captcha\";\r\nimport FindPassword from \"./_components/FindPassword\";\r\nimport Register from \"./_components/Register\";\r\nimport { useRouter, useStoreSlice } from \"@/hooks\";\r\nimport { CommonObj, OptionItem, StrNum } from \"@/vite-env\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { GetUserLoginAccounts } from \"@/api-mock\";\r\nimport s from \"./index.module.less\";\r\nimport { storage } from \"@/utils\";\r\n\r\nconst { VITE_APP_NAME } = import.meta.env;\r\n\r\nexport default () => {\r\n  const storeAccount = storage.getItem(\"rememberAccount\");\r\n  const initVals = {\r\n    phone: storeAccount?.phone ?? \"18483221518\",\r\n    psd: storeAccount?.psd ?? \"superAdmin12345\",\r\n    captcha: \"\",\r\n    remember: !!storeAccount,\r\n  };\r\n  const formRef = useRef();\r\n  const router = useRouter();\r\n  const location = useLocation();\r\n  const { handleLoginIn } = useStoreSlice(\"user\");\r\n  const [model, setModel] = useState<CommonObj>(initVals);\r\n  const [accountOpts, setAccountOpts] = useState<OptionItem[]>([]);\r\n  const { openPopup } = useContext(PopupContext);\r\n\r\n  const fields: FormField[] = [\r\n    {\r\n      name: \"phone\",\r\n      label: \"账号\",\r\n      required: true,\r\n      type: \"AutoComplete\",\r\n      attrs: {\r\n        placeholder: \"请输入账号 / 手机号\",\r\n        options: accountOpts,\r\n        onSelect: handleSelect,\r\n      },\r\n      otherAttrs: {\r\n        valid: /^\\d/.test(model.phone) ? \"phone\" : undefined,\r\n      },\r\n    },\r\n    {\r\n      name: \"psd\",\r\n      label: \"密码\",\r\n      type: \"Password\",\r\n      required: true,\r\n      otherAttrs: {\r\n        valid: \"password\",\r\n      },\r\n    },\r\n    {\r\n      name: \"captcha\",\r\n      label: \"验证码\",\r\n      type: \"Custom\",\r\n      render: (attrs: any) => <Captcha name=\"captcha\" formRef={formRef} {...attrs} />,\r\n      required: true,\r\n      rules: [{ min: 4, message: \"验证码长度不足4位\" }],\r\n    },\r\n    {\r\n      name: \"remember\",\r\n      label: \"记住我\",\r\n      type: \"Checkbox\",\r\n    },\r\n  ];\r\n  useEffect(() => {\r\n    getAccountOpts();\r\n  }, []);\r\n  function getAccountOpts() {\r\n    GetUserLoginAccounts().then((res: any) => {\r\n      const opts = res.map((item: CommonObj) => {\r\n        const { account, ...rest } = item;\r\n        return { value: account, ...rest };\r\n      });\r\n      setAccountOpts(opts);\r\n    });\r\n  }\r\n  function handleSelect(val: StrNum, opt: CommonObj) {\r\n    formRef.current?.form?.setFieldValue(\"psd\", opt.psd);\r\n  }\r\n  return (\r\n    <div className={`${s.wrap} f-c-c`}>\r\n      <div className={`${s[\"bounce-in\"]} ${s[\"login-box\"]}`}>\r\n        <h1 className={`${s.head} f-c-c`}>{VITE_APP_NAME}</h1>\r\n        <BaseForm\r\n          ref={formRef}\r\n          initialValues={initVals}\r\n          size=\"large\"\r\n          fields={fields}\r\n          onSubmit={(params: CommonObj) => handleLoginIn({ params, other: { router, location } })}\r\n          submitButton=\"登录\"\r\n          onValuesChange={(vals: CommonObj, allVals: CommonObj) => setModel(allVals)}\r\n          className={`${s.body}`}\r\n        />\r\n        <div className={`${s.foot} f-sb-c`}>\r\n          <Button\r\n            onClick={() => openPopup({ title: \"免费注册\", placement: \"left\" }, <Register />, \"drawer\")}\r\n            className={s.btn}\r\n            type=\"link\"\r\n            size=\"small\"\r\n          >\r\n            免费注册\r\n          </Button>\r\n          <Button\r\n            onClick={() => openPopup({ title: \"找回密码\", placement: \"right\" }, <FindPassword />, \"drawer\")}\r\n            className={s.btn}\r\n            type=\"link\"\r\n            size=\"small\"\r\n          >\r\n            找回密码\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * @link 嵌套路由配置：https://blog.csdn.net/Snow_GX/article/details/123656412\r\n * @link 动态路由参考：https://juejin.cn/post/7132393527501127687 和 https://blog.csdn.net/Miketutu/article/details/130445743\r\n */\r\n\r\nimport { useRoutes, Navigate, useLocation } from \"react-router-dom\";\r\nimport React, { ReactNode, useEffect, useState } from \"react\";\r\nimport Layout from \"@/layout\";\r\nimport { ResponseMenuItem } from \"@/layout/_types\";\r\nimport { CommonObj } from \"@/vite-env\";\r\nimport { useRouter, useStoreSlice } from \"@/hooks\";\r\nimport { camelCase } from \"lodash\";\r\nimport Login from \"@/views/login\";\r\nimport { getRouteIsAuth } from \"./_hooks/router\";\r\n\r\nexport interface RouteItem {\r\n  name: string; // 路由名称\r\n  path: string;\r\n  element?: ReactNode;\r\n  children?: RouteItem[];\r\n  meta?: {\r\n    title?: string;\r\n    cache?: boolean; // 是否缓存该页面\r\n    auth?: boolean; // 是否需要授权才能访问\r\n  };\r\n}\r\n\r\nconst modules: CommonObj = import.meta.glob(\"../views/**/**.tsx\");\r\n\r\nexport const LazyLoad = (path: string) => {\r\n  /**\r\n   * 不能直接使用模板字符串拼接，const Module = React.lazy(() => import(`..${path}`));\r\n   * 故用import.meta.glob导入模块的方式\r\n   * */\r\n  const Module = React.lazy(modules[`../views${path}`]);\r\n  return <Module />;\r\n};\r\n\r\n//将菜单allMenus处理成路由routes，将多层嵌套路由拉平成一级\r\nfunction getFlatRoutes(menus: ResponseMenuItem[]): RouteItem[] {\r\n  const routes: RouteItem[] = [];\r\n  menus.forEach((menu: ResponseMenuItem) => {\r\n    const { children } = menu;\r\n    children?.forEach(child => pushRoutes(child));\r\n    function pushRoutes(menu: ResponseMenuItem) {\r\n      const { label, path, component, children, link_type } = menu;\r\n      const route: RouteItem = {\r\n        name: link_type ? \"\" : camelCase(path), //外部连接不生成路由信息\r\n        path,\r\n      };\r\n      if (children?.length) {\r\n        children.forEach(child => pushRoutes(child));\r\n      } else {\r\n        route.element = LazyLoad(component as string);\r\n        route.meta = {\r\n          title: label,\r\n          // cache: true,\r\n          // auth: true,\r\n        };\r\n        routes.push(route);\r\n      }\r\n    }\r\n  });\r\n  return routes;\r\n}\r\n\r\nconst errorRoutes = [\r\n  {\r\n    path: \"/403\",\r\n    name: \"noAuth\",\r\n    element: LazyLoad(\"/error/403.tsx\"),\r\n  },\r\n  {\r\n    path: \"*\",\r\n    name: \"notFound\",\r\n    element: LazyLoad(\"/error/404.tsx\"),\r\n  },\r\n  {\r\n    path: \"/500\",\r\n    name: \"serverError\",\r\n    element: LazyLoad(\"/error/500.tsx\"),\r\n  },\r\n];\r\n\r\n// function getRoutesMap(routes: RouteItem[], map: CommonObj = {}) {\r\n//   routes.forEach((item: RouteItem) => {\r\n//     const { name, path, children } = item;\r\n//     if (!name) return; // 外部连接不生成路由信息\r\n//     if (!children?.length) {\r\n//       map[name] = path || \"/\";\r\n//     } else {\r\n//       getRoutesMap(children, map);\r\n//     }\r\n//   });\r\n//   return map;\r\n// }\r\n\r\nexport default () => {\r\n  const { allMenus } = useStoreSlice(\"menu\");\r\n  const { updateRoutesState } = useStoreSlice(\"routes\");\r\n  const router = useRouter();\r\n  const location = useLocation();\r\n  const [routes, setRoutes] = useState<RouteItem[]>([\r\n    {\r\n      name: \"root\",\r\n      path: \"/\",\r\n      element: <Layout />,\r\n      // element: <Navigate to=\"home\" />,\r\n      children: [],\r\n    },\r\n    // { path: \"/login\", element: LazyLoad(\"/views/login/index.tsx\") }, //使用懒加载会一直执行，导致页面一直处在加载中状态\r\n    { name: \"login\", path: \"/login\", element: <Login /> },\r\n    // ...errorRoutes,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    createRoutes(allMenus);\r\n  }, [allMenus]);\r\n  function createRoutes(menus: ResponseMenuItem[]) {\r\n    routes[0].children = [\r\n      { path: \"\", name: \"home\", element: LazyLoad(\"/home/index.tsx\") },\r\n      ...getFlatRoutes(menus),\r\n      ...errorRoutes,\r\n    ];\r\n    const newRoutes = [...routes];\r\n    //重置一下，解决刷新后，初次加载会白屏的问题\r\n    setRoutes(newRoutes);\r\n    setTimeout(() => {\r\n      updateRoutesState({ isCreatedRoute: true });\r\n      // const { pathname } = location;\r\n      // const isAuth = getRouteIsAuth(pathname);\r\n      // if (!isAuth) router.push(`/403?redirect=${pathname}`);\r\n    });\r\n  }\r\n  return useRoutes(routes);\r\n};\r\n","import { createContext } from \"react\";\r\n\r\nexport interface BaseContextProps {\r\n  showCount?: boolean; // 表单字段是否展示限制最大字符数\r\n  pureText?: boolean; // 是否纯文本展示\r\n}\r\n\r\ninterface Props extends BaseContextProps {\r\n  children?: any;\r\n}\r\n\r\nexport const BaseContext = createContext<BaseContextProps>({\r\n  showCount: true,\r\n  pureText: false,\r\n});\r\n\r\nexport default ({ children, ...restProps }: Props) => {\r\n  return <BaseContext.Provider value={restProps}>{children}</BaseContext.Provider>;\r\n};\r\n","import RouterView from \"@/components/RouterView\";\r\nimport BaseProvider from \"@/components/provider/BaseProvider\";\r\nimport PopupProvider from \"@/components/provider/PopupProvider\";\r\n\r\n// import { theme } from \"antd\";\r\n// const { useToken } = theme;\r\n\r\nexport default () => {\r\n  // const { token } = useToken();\r\n  // console.log(token, \"token-----------------\");\r\n  return (\r\n    <>\r\n      <BaseProvider>\r\n        <PopupProvider>\r\n          <RouterView />\r\n        </PopupProvider>\r\n      </BaseProvider>\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * 全屏加载图标\r\n */\r\n\r\nimport { Spin } from \"antd\";\r\nimport s from \"./index.module.less\";\r\n\r\ninterface Props {\r\n  className?: string;\r\n  mask?: boolean;\r\n}\r\n\r\nexport default ({ className = \"\", mask = true }: Props) => {\r\n  return (\r\n    <div\r\n      className={`${s[\"full-loading\"]} ${\r\n        mask ? s.mask : \"\"\r\n      } ${className} f-c-c`}\r\n    >\r\n      {/* <Spin size=\"large\" tip=\"玩命加载中...\" delay={500} /> */}\r\n      <Spin size=\"large\" />\r\n    </div>\r\n  );\r\n};\r\n","//  mockProdServer.ts\r\nimport { createProdMockServer } from \"vite-plugin-mock/es/createProdMockServer\";\r\n\r\n// 逐一导入您的mock.js文件\r\n// 如果使用vite.mock.config.js，只需直接导入文件\r\n// 可以使用 import.meta.glob功能来进行全部导入\r\nimport apis from \"../mock/apis\";\r\nexport function setupProdMockServer() {\r\n  createProdMockServer(apis);\r\n}\r\n\r\n// import Mock from \"mockjs\";\r\n// const mockServer = (data: any) => {\r\n//   Object.keys(data).forEach((path) => {\r\n//     Mock.mock(\r\n//       new RegExp(`^${process.env.VITE_API_BASE_URL}${path}`),\r\n//       data[path]\r\n//     );\r\n//   });\r\n// };\r\n// mockServer(apis);\r\n","import React, { Suspense } from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\r\nimport { ConfigProvider } from \"antd\";\r\nimport { Provider } from \"react-redux\";\r\nimport App from \"./App\";\r\nimport zhCN from \"antd/locale/zh_CN\";\r\nimport store from \"./store\";\r\nimport BaseEmpty from \"@/components/BaseEmpty\";\r\nimport FullLoading from \"@/components/FullLoading\";\r\nimport { setupProdMockServer } from \"./mockProdServer\";\r\n// import cssVars from \"@/assets/styles/_var.module.less\";\r\n\r\nimport \"@/assets/styles/base.less\";\r\nimport \"@/assets/styles/global.less\";\r\nimport \"antd/dist/reset.css\";\r\n\r\nsetupProdMockServer();\r\nReactDOM.createRoot(document.getElementById(\"root\") as HTMLElement).render(\r\n  //注：react 18 dev环境严格模式下首屏 useEffect会执行两次，生产环境正常\r\n  // <React.StrictMode>\r\n  <Suspense fallback={<FullLoading mask={false}></FullLoading>}>\r\n    <ConfigProvider\r\n      locale={zhCN}\r\n      // theme={{\r\n      //   token: {\r\n      //     colorPrimary: cssVars.colorPrimary,\r\n      //   },\r\n      // }}\r\n      // renderEmpty={() => <BaseEmpty></BaseEmpty>} //全局空状态处理\r\n      //是为了全局解决Select，DatePicker，Cascader等组件选项框在Modal等弹出层中不跟随页面滚动的问题\r\n      // 在 5.x版本中，不要使用，不然会导致预期之外的bug\r\n      // getPopupContainer={(node: any) => {\r\n      //   if (node) {\r\n      //     return node; //ant   4.x\r\n      //     // return node.parentNode;　//ant  3.x\r\n      //   }\r\n      //   return document.body;\r\n      // }}\r\n    >\r\n      {/* <BrowserRouter> */}\r\n      <HashRouter>\r\n        <Provider store={store}>\r\n          <App />\r\n        </Provider>\r\n      </HashRouter>\r\n      {/* </BrowserRouter> */}\r\n    </ConfigProvider>\r\n  </Suspense>\r\n  // </React.StrictMode>\r\n);\r\n"],"file":"assets/js/index-d5896f04.js"}