{"version":3,"file":"index-fb586da9.js","sources":["../../../src/views/system/role/index.tsx"],"sourcesContent":["/**\r\n * 文件说明-模板文件\r\n */\r\n\r\nimport { GetAuthRoleList } from \"@/api-mock\";\r\nimport { PopupContext } from \"@/components/provider/PopupProvider\";\r\nimport { BtnName } from \"@/components/BaseBtn\";\r\nimport BaseCrud from \"@/components/BaseCrud\";\r\nimport { FormField } from \"@/components/BaseFormItem\";\r\nimport { TableCol } from \"@/components/table/_types\";\r\nimport { useContext } from \"react\";\r\nimport AddEdit from \"./AddEdit\";\r\nimport { CommonObj, FinallyNext } from \"@/vite-env\";\r\nimport { handleBtnNext, showMessage } from \"@/utils\";\r\n\r\nconst fields: FormField[] = [\r\n  {\r\n    name: \"role_text\",\r\n    label: \"角色类型\",\r\n    type: \"Select\",\r\n    attrs: {\r\n      options: \"RoleType\",\r\n    },\r\n  },\r\n  {\r\n    name: \"status\",\r\n    label: \"状态\",\r\n    type: \"Select\",\r\n    attrs: {\r\n      options: \"EnableStatus\",\r\n    },\r\n  },\r\n  { name: \"create_time\", label: \"创建时间\", type: \"DateRangePicker\" },\r\n];\r\n\r\nconst columns: TableCol[] = [\r\n  { dataIndex: \"role_text\", title: \"角色类型\", width: 150 },\r\n  { dataIndex: \"status\", title: \"启用状态\", width: 80 },\r\n  { dataIndex: \"create_time\", title: \"创建时间\", width: 180 },\r\n  { dataIndex: \"update_time\", title: \"更新时间\", width: 180 },\r\n  { dataIndex: \"remark\", title: \"备注\", width: 250 },\r\n];\r\n\r\nexport default () => {\r\n  const { openPopup } = useContext(PopupContext);\r\n  function handleExtraBtn(name: BtnName, info: CommonObj, next: FinallyNext) {\r\n    const { ids } = info;\r\n    handleBtnNext(\r\n      {\r\n        add: () => openPopup(\"新增\", <AddEdit />),\r\n        delete: () => handleDelete(ids, next),\r\n      },\r\n      name\r\n    );\r\n  }\r\n  function handleOperateBtn(name: BtnName, row: CommonObj, next: FinallyNext) {\r\n    const { id } = row;\r\n    handleBtnNext(\r\n      {\r\n        edit: () => openPopup(\"编辑\", <AddEdit id={id} />),\r\n        delete: () => handleDelete([id], next),\r\n        view: () => openPopup(\"查看\", <AddEdit pureText />),\r\n        forbid: () => handleToggleStatus(name, id, next),\r\n        enable: () => handleToggleStatus(name, id, next),\r\n      },\r\n      name\r\n    );\r\n  }\r\n  function handleDelete(ids: string[], next: FinallyNext) {\r\n    next();\r\n  }\r\n  function handleToggleStatus(name: BtnName, id: string, next: FinallyNext) {\r\n    next();\r\n  }\r\n  return (\r\n    <BaseCrud\r\n      fields={fields}\r\n      columns={columns}\r\n      fetch={GetAuthRoleList}\r\n      extraBtns={[\"add\", \"delete\"]}\r\n      operateBtns={[\"edit\", \"delete\", \"view\", (row: CommonObj) => (true ? \"forbid\" : \"enable\")]}\r\n      onExtraBtn={handleExtraBtn}\r\n      onOperateBtn={handleOperateBtn}\r\n      selection\r\n      index\r\n      sort\r\n    ></BaseCrud>\r\n  );\r\n};\r\n"],"names":["fields","columns","index","openPopup","useContext","PopupContext","handleExtraBtn","name","info","next","ids","handleBtnNext","jsx","AddEdit","handleDelete","handleOperateBtn","row","id","handleToggleStatus","BaseCrud","GetAuthRoleList"],"mappings":"8wFAeA,MAAMA,EAAsB,CAC1B,CACE,KAAM,YACN,MAAO,OACP,KAAM,SACN,MAAO,CACL,QAAS,UACX,CACF,EACA,CACE,KAAM,SACN,MAAO,KACP,KAAM,SACN,MAAO,CACL,QAAS,cACX,CACF,EACA,CAAE,KAAM,cAAe,MAAO,OAAQ,KAAM,iBAAkB,CAChE,EAEMC,EAAsB,CAC1B,CAAE,UAAW,YAAa,MAAO,OAAQ,MAAO,GAAI,EACpD,CAAE,UAAW,SAAU,MAAO,OAAQ,MAAO,EAAG,EAChD,CAAE,UAAW,cAAe,MAAO,OAAQ,MAAO,GAAI,EACtD,CAAE,UAAW,cAAe,MAAO,OAAQ,MAAO,GAAI,EACtD,CAAE,UAAW,SAAU,MAAO,KAAM,MAAO,GAAI,CACjD,EAEAC,GAAe,IAAM,CACnB,KAAM,CAAE,UAAAC,CAAA,EAAcC,EAAA,WAAWC,CAAY,EACpC,SAAAC,EAAeC,EAAeC,EAAiBC,EAAmB,CACnE,KAAA,CAAE,IAAAC,CAAQ,EAAAF,EAChBG,EACE,CACE,IAAK,IAAMR,EAAU,KAAMS,EAAAA,IAACC,IAAQ,CAAE,EACtC,OAAQ,IAAMC,EAAaJ,EAAKD,CAAI,CACtC,EACAF,CAAA,CAEJ,CACS,SAAAQ,EAAiBR,EAAeS,EAAgBP,EAAmB,CACpE,KAAA,CAAE,GAAAQ,CAAO,EAAAD,EACfL,EACE,CACE,KAAM,IAAMR,EAAU,KAAOS,EAAA,IAAAC,EAAA,CAAQ,GAAAI,EAAQ,CAAE,EAC/C,OAAQ,IAAMH,EAAa,CAACG,CAAE,EAAGR,CAAI,EACrC,KAAM,IAAMN,EAAU,WAAOU,EAAQ,CAAA,SAAQ,GAAC,CAAE,EAChD,OAAQ,IAAMK,EAAmBX,EAAMU,EAAIR,CAAI,EAC/C,OAAQ,IAAMS,EAAmBX,EAAMU,EAAIR,CAAI,CACjD,EACAF,CAAA,CAEJ,CACS,SAAAO,EAAaJ,EAAeD,EAAmB,CACjDA,GACP,CACS,SAAAS,EAAmBX,EAAeU,EAAYR,EAAmB,CACnEA,GACP,CAEE,OAAAG,EAAA,IAACO,EAAA,CACC,OAAAnB,EACA,QAAAC,EACA,MAAOmB,EACP,UAAW,CAAC,MAAO,QAAQ,EAC3B,YAAa,CAAC,OAAQ,SAAU,OAASJ,GAA2B,QAAoB,EACxF,WAAYV,EACZ,aAAcS,EACd,UAAS,GACT,MAAK,GACL,KAAI,EAAA,CAAA,CAGV"}